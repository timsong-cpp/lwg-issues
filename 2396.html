<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
    "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta charset="utf-8">
<title>Issue 2396: underlying_type doesn't say what to do for an incomplete enumeration type</title>
<style type="text/css">
  p {text-align:justify}
  li {text-align:justify}
  blockquote.note
  {
    background-color:#E0E0E0;
    padding-left: 15px;
    padding-right: 15px;
    padding-top: 1px;
    padding-bottom: 1px;
  }
  ins {background-color:#A0FFA0}
  del {background-color:#FFA0A0}
  table {border-collapse: collapse;}
</style>
</head>
<body>
<hr>
<h3><a name="2396" href="2396">2396.</a> <tt>underlying_type</tt> doesn't say what to do for an incomplete enumeration type</h3>
<p><b>Section:</b> 23.15.7.6 <a href="https://timsong-cpp.github.io/cppwp/meta.trans.other">[meta.trans.other]</a> <b>Status:</b> <a href="lwg-active.html#WP">WP</a>
 <b>Submitter:</b> Richard Smith <b>Opened:</b> 2014-06-12 <b>Last modified:</b> 2015-09-21 14:09:02 UTC</p>
<p><b>Priority: </b>0
</p>
<p><b>View all other</b> <a href="lwg-index.html#meta.trans.other">issues</a> in <a href="https://timsong-cpp.github.io/cppwp/meta.trans.other">[meta.trans.other]</a>.</p>
<p><b>View all issues with</b> <a href="lwg-status.html#WP">WP</a> status.</p>
<p><b>Discussion:</b></p>
<p>
Consider:
</p>
<blockquote><pre>
enum E {
  e = std::underlying_type&lt;E&gt;::type(1)
};
</pre></blockquote>
<p>
Clearly this should be ill-formed, but the library section doesn't appear to ban it. Suggestion:
<p/>
Change in 23.15.7.6 <a href="https://timsong-cpp.github.io/cppwp/meta.trans.other">[meta.trans.other]</a> Table 57:
</p>
<blockquote>
<p>
Template: <tt>template&lt;class T&gt; struct underlying_type;</tt>
<p/>
Condition: <tt>T</tt> shall be <ins>a complete</ins> <del>an</del> enumeration type (7.2)
<p/>
Comments: [&hellip;]
</p>
</blockquote>

<p><i>[2014-06-16 Rapperswil]</i></p>

<p>
Move to Ready
</p>



<p><b>Proposed resolution:</b></p>
<p>This wording is relative to N3936.</p>

<ol>
<li><p>Change Table 57 &mdash; "Other transformations" as indicated:</p>

<blockquote>
<table border="1">
<caption>Table 3 &mdash; Other type transformations</caption>
<tr>
<th align="center">Template</th>
<th align="center">Condition</th>
<th align="center">Comments</th>
</tr>

<tr>
<td colspan="3" align="center">
<tt>&hellip;</tt>
</td>
</tr>

<tr>
<td>
<tt>template &lt;class T&gt;<br/>
struct underlying_type;</tt>
</td>
<td>
T shall be <ins>a complete</ins> <del>an</del> enumeration type (7.2)
</td>
<td align="center">
[&hellip;]
</td>
</tr>

</table>
</blockquote>
</li>

</ol>





</body>
</html>
