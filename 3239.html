<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
    "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta charset="utf-8">
<title>Issue 3239: Hidden friends should be specified more narrowly</title>
<style type="text/css">
  p {text-align:justify}
  li {text-align:justify}
  blockquote.note
  {
    background-color:#E0E0E0;
    padding-left: 15px;
    padding-right: 15px;
    padding-top: 1px;
    padding-bottom: 1px;
  }
  ins {background-color:#A0FFA0}
  del {background-color:#FFA0A0}
  table {border-collapse: collapse;}
</style>
</head>
<body>
<hr>
<h3><a name="3239" href="lwg-active.html#3239">3239.</a> Hidden friends should be specified more narrowly</h3>
<p><b>Section:</b> 17.10.2.2 <a href="https://timsong-cpp.github.io/cppwp/cmp.weakeq">[cmp.weakeq]</a>, 17.10.2.3 <a href="https://timsong-cpp.github.io/cppwp/cmp.strongeq">[cmp.strongeq]</a>, 17.10.2.4 <a href="https://timsong-cpp.github.io/cppwp/cmp.partialord">[cmp.partialord]</a>, 17.10.2.5 <a href="https://timsong-cpp.github.io/cppwp/cmp.weakord">[cmp.weakord]</a>, 17.10.2.6 <a href="https://timsong-cpp.github.io/cppwp/cmp.strongord">[cmp.strongord]</a>, 29.11.7 <a href="https://timsong-cpp.github.io/cppwp/fs.class.path">[fs.class.path]</a>, 22.2.4.1 <a href="https://timsong-cpp.github.io/cppwp/container.node.overview">[container.node.overview]</a> <b>Status:</b> <a href="lwg-active.html#New">New</a>
 <b>Submitter:</b> Daniel Sunderland <b>Opened:</b> 2019-07-19 <b>Last modified:</b> 2019-07-28 15:43:50 UTC</p>
<p><b>Priority: </b>Not Prioritized
</p>
<p><b>View all issues with</b> <a href="lwg-status.html#New">New</a> status.</p>
<p><b>Discussion:</b></p>
<p>
LWG has been moving papers which use hidden friends to restrict an entity's lookup to be via ADL only.  
However, the current wording does not prevent an implementation from making these entities from also 
being available via (un)qualified lookup.  
<p/>
Walter Brown and I have an unreviewed paper (<a href="http://wg21.link/p1601r0">P1601R0</a>) in the 
Post Kona mailing specifying that entities which are intended to be found via ADL only include a 
<i>Remarks</i> element which states something equivalent to the following:
<p/>
"Remarks: This function is to be found via argument-dependent lookup only."
<p/>
Adding this element after the draft ships will be a semantic change. Marshall suggested that I file 
an LWG issue to add/modify <i>Remarks</i> elements where needed to prevent (un)qualified lookup.
<p/>
The following stable names are places in the pre Cologne draft (<a href="http://wg21.link/n4820">N4820</a>) 
which potentially use hidden friends. Furthermore, there are papers that LWG added to the straw polls 
which also potentially use hidden friends. LWG should review each of these subsections/papers to determine 
if they should include the text equivalent to the <i>Remarks</i> above. [<i>Note:</i> Not all these 
subsections should restrict lookup to ADL only. It is very likely that I missed a paper or subsection 
&mdash; <i>end note</i>].
</p>
<ul>
<li><p>17.10.2.2 <a href="https://timsong-cpp.github.io/cppwp/cmp.weakeq">[cmp.weakeq]</a>: Comparisons</p></li>
<li><p>17.10.2.3 <a href="https://timsong-cpp.github.io/cppwp/cmp.strongeq">[cmp.strongeq]</a>: Comparisons</p></li>
<li><p>17.10.2.4 <a href="https://timsong-cpp.github.io/cppwp/cmp.partialord">[cmp.partialord]</a>: Comparisons</p></li>
<li><p>17.10.2.5 <a href="https://timsong-cpp.github.io/cppwp/cmp.weakord">[cmp.weakord]</a>: Comparisons</p></li>
<li><p>17.10.2.6 <a href="https://timsong-cpp.github.io/cppwp/cmp.strongord">[cmp.strongord]</a>: Comparisons</p></li>
<li><p>29.11.7 <a href="https://timsong-cpp.github.io/cppwp/fs.class.path">[fs.class.path]</a>: <tt>operator&lt;&lt;</tt>, <tt>operator&gt;&gt;</tt></p></li>
<li><p>22.2.4.1 <a href="https://timsong-cpp.github.io/cppwp/container.node.overview">[container.node.overview]</a>: <tt>swap</tt></p></li>
<li><p><a href="http://wg21.link/p0660r10">P0660R10 (Stop Token and Joining Thread)</a>: 
Comparisons, <tt>swap</tt></p></li>
<li><p><a href="http://wg21.link/p1614r2">P1614R2 (The Mothership has Landed)</a>: Comparisons</p></li>
</ul>

<p><b>Proposed resolution:</b></p>




</body>
</html>
