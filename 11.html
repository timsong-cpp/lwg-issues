<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
    "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta charset="utf-8">
<title>Issue 11: Bitset minor problems</title>
<style type="text/css">
  p {text-align:justify}
  li {text-align:justify}
  blockquote.note
  {
    background-color:#E0E0E0;
    padding-left: 15px;
    padding-right: 15px;
    padding-top: 1px;
    padding-bottom: 1px;
  }
  ins {background-color:#A0FFA0}
  del {background-color:#FFA0A0}
  table {border-collapse: collapse;}
</style>
</head>
<body>
<hr>
<h3><a name="11" href="11">11.</a> Bitset minor problems</h3>
<p><b>Section:</b> 23.9.2 <a href="https://timsong-cpp.github.io/cppwp/template.bitset">[template.bitset]</a> <b>Status:</b> <a href="lwg-active.html#TC1">TC1</a>
 <b>Submitter:</b> Matt Austern <b>Opened:</b> 1998-01-22 <b>Last modified:</b> 2016-08-09 17:08:06 UTC</p>
<p><b>Priority: </b>Not Prioritized
</p>
<p><b>View other</b> <a href="lwg-index-open.html#template.bitset">active issues</a> in <a href="https://timsong-cpp.github.io/cppwp/template.bitset">[template.bitset]</a>.</p>
<p><b>View all other</b> <a href="lwg-index.html#template.bitset">issues</a> in <a href="https://timsong-cpp.github.io/cppwp/template.bitset">[template.bitset]</a>.</p>
<p><b>View all issues with</b> <a href="lwg-status.html#TC1">TC1</a> status.</p>
<p><b>Discussion:</b></p>
<p>(1) bitset&lt;&gt;::operator[] is mentioned in the class synopsis (23.3.5), but it is
not documented in 23.3.5.2. </p>

<p>(2) The class synopsis only gives a single signature for bitset&lt;&gt;::operator[],
reference operator[](size_t pos). This doesn't make much sense. It ought to be overloaded
on const. reference operator[](size_t pos); bool operator[](size_t pos) const. </p>

<p>(3) Bitset's stream input function (23.3.5.3) ought to skip all whitespace before
trying to extract 0s and 1s. The standard doesn't explicitly say that, though. This should
go in the Effects clause.</p>


<p><b>Proposed resolution:</b></p>
<p>ITEMS 1 AND 2:<br/>
<br/>
In the bitset synopsis (23.9.2 <a href="https://timsong-cpp.github.io/cppwp/template.bitset">[template.bitset]</a>), 
replace the member function <br/>
<br/>
<tt>&nbsp;&nbsp;&nbsp; reference operator[](size_t pos);<br/>
</tt><br/>
with the two member functions<br/>
<br/>
<tt>&nbsp;&nbsp;&nbsp; bool operator[](size_t pos) const; <br/>
&nbsp;&nbsp;&nbsp; reference operator[](size_t pos); <br/>
</tt><br/>
Add the following text at the end of 23.9.2.2 <a href="https://timsong-cpp.github.io/cppwp/bitset.members">[bitset.members]</a>, 
immediately after paragraph 45:</p>

<blockquote>
  <p><tt>bool operator[](size_t pos) const;</tt><br/>
  Requires: pos is valid<br/>
  Throws: nothing<br/>
  Returns: <tt>test(pos)</tt><br/>
  <br/>
  <tt>bitset&lt;N&gt;::reference operator[](size_t pos);</tt> <br/>
  Requires: pos is valid<br/>
  Throws: nothing<br/>
  Returns: An object of type <tt>bitset&lt;N&gt;::reference</tt> such that <tt>(*this)[pos]
  == this-&gt;test(pos)</tt>, and such that <tt>(*this)[pos] = val</tt> is equivalent to <tt>this-&gt;set(pos,
  val);</tt></p>
</blockquote>


<p><b>Rationale:</b></p>
<p>The LWG believes Item 3 is not a defect. &quot;Formatted
input&quot; implies the desired semantics. See 30.7.4.2 <a href="https://timsong-cpp.github.io/cppwp/istream.formatted">[istream.formatted]</a>.
</p>





</body>
</html>
