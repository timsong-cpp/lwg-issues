<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
    "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta charset="utf-8">
<title>Issue 3214: &sect;[facet.num.get.virtuals] doesn't say what it means for digit grouping to be consistent</title>
<style type="text/css">
  p {text-align:justify}
  li {text-align:justify}
  blockquote.note
  {
    background-color:#E0E0E0;
    padding-left: 15px;
    padding-right: 15px;
    padding-top: 1px;
    padding-bottom: 1px;
  }
  ins {background-color:#A0FFA0}
  del {background-color:#FFA0A0}
  table {border-collapse: collapse;}
</style>
</head>
<body>
<hr>
<h3><a name="3214" href="lwg-active.html#3214">3214.</a> &sect;[facet.num.get.virtuals] doesn't say what it means for digit grouping to be consistent</h3>
<p><b>Section:</b> 28.4.2.1.2 <a href="https://timsong-cpp.github.io/cppwp/facet.num.get.virtuals">[facet.num.get.virtuals]</a> <b>Status:</b> <a href="lwg-active.html#New">New</a>
 <b>Submitter:</b> Jonathan Wakely <b>Opened:</b> 2019-06-03 <b>Last modified:</b> 2019-08-23 18:06:54 UTC</p>
<p><b>Priority: </b>4
</p>
<p><b>View other</b> <a href="lwg-index-open.html#facet.num.get.virtuals">active issues</a> in [facet.num.get.virtuals].</p>
<p><b>View all other</b> <a href="lwg-index.html#facet.num.get.virtuals">issues</a> in [facet.num.get.virtuals].</p>
<p><b>View all issues with</b> <a href="lwg-status.html#New">New</a> status.</p>
<p><b>Discussion:</b></p>
<p>
28.4.2.1.2 <a href="https://timsong-cpp.github.io/cppwp/facet.num.get.virtuals">[facet.num.get.virtuals]</a> paragraph 4 says:
</p>
<blockquote><p>
"Digit grouping is checked. That is, the positions of discarded separators is examined for consistency with
<tt>use_facet&lt;numpunct&lt;charT&gt;&gt;(loc).grouping()</tt>. If they are not consistent then
<tt>ios_base::failbit</tt> is assigned to <tt>err</tt>."
</p></blockquote>
<p>
It's unclear what is considered consistent or not.
<p/>
Obviously if the expected grouping is "1,234,567" then an input of "1,234,567" is consistent. Libstdc++,
MSVC and Boost all consider "1234567" to be consistent with an expected grouping "1,234,567" (and it
looks like libc++ is going to agree soon). That can be justified by saying that there are no discarded
separators to examine, so no inconsistency. But what about "1234,567"? There is only one discarded
separator here, and its position is consistent with the expected format.
<p/>
The wording should clarify that if there are no separators at all, that is OK. If there are one or more
separators then they must be at the expected positions, and there must not be any missing.
</p>

<p><i>[2019-07 Issue Prioritization]</i></p>

<p>Priority to 4 after discussion on the reflector.</p>


<p><b>Proposed resolution:</b></p>




</body>
</html>
