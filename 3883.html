<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
    "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta charset="utf-8">
<title>Issue 3883: &sect;[support.c.headers.other] Ambiguity in the requirements for includes</title>
<style type="text/css">
  p {text-align:justify}
  li {text-align:justify}
  blockquote.note
  {
    background-color:#E0E0E0;
    padding-left: 15px;
    padding-right: 15px;
    padding-top: 1px;
    padding-bottom: 1px;
  }
  ins {background-color:#A0FFA0}
  del {background-color:#FFA0A0}
  table {border-collapse: collapse;}
  @media (prefers-color-scheme: dark) {
     html {
        color: #ddd;
        background-color: black;
     }
     ins {
        background-color: #225522
     }
     del {
        background-color: #662222
     }
     a {
        color: #6af
     }
     a:visited {
        color: #6af
     }
     blockquote.note
     {
        background-color: rgba(255, 255, 255, .10)
     }
  }
</style>
</head>
<body>
<hr>
<h3><a name="3883" href="lwg-active.html#3883">3883.</a> &sect;[support.c.headers.other] Ambiguity in the requirements for includes</h3>
<p><b>Section:</b> 17.14.7 <a href="https://timsong-cpp.github.io/cppwp/support.c.headers.other">[support.c.headers.other]</a> <b>Status:</b> <a href="lwg-active.html#New">New</a>
 <b>Submitter:</b> Alex Mills <b>Opened:</b> 2023-02-09 <b>Last modified:</b> 2023-03-22 22:36:03 UTC</p>
<p><b>Priority: </b>4
</p>
<p><b>View other</b> <a href="lwg-index-open.html#support.c.headers.other">active issues</a> in [support.c.headers.other].</p>
<p><b>View all other</b> <a href="lwg-index.html#support.c.headers.other">issues</a> in [support.c.headers.other].</p>
<p><b>View all issues with</b> <a href="lwg-status.html#New">New</a> status.</p>
<p><b>Discussion:</b></p>
<p>
In 17.14.7 <a href="https://timsong-cpp.github.io/cppwp/support.c.headers.other">[support.c.headers.other]</a>, it states that the <tt>&lt;<i>name</i>.h&gt;</tt> headers behave 
"as if each name placed in the standard library namespace by the corresponding header is placed within the 
global namespace scope". There are exceptions for several different definitions in the headers, but it's left 
ambiguous as to whether their inclusion in the <tt>&lt;<i>name</i>.h&gt;</tt> headers is required or unspecified.
<p/>
While it is clear that, for example, <tt>::byte</tt> is prohibited, it isn't clear whether <tt>std::byte</tt> 
is required to be included at all (this applies to the other listed exceptions as well). Though example 1 makes 
it appear that their inclusion requirements are meant to be left unspecified, paragraph 1 does not provide clarification. 
Adding specific wording will ensure this will not be misinterpreted in the future.
<p/>
To do this, we should append a sentence to [support.c.headers.other] p1:
</p>
<blockquote><p>
Whether the listed exceptions are included in their corresponding <tt>&lt;<i>name</i>.h&gt;</tt> headers under 
the standard library namespace is unspecified.
</p></blockquote>

<p><i>[2023-03-22; Reflector poll]</i></p>

<p>
Set priority to 4 after reflector poll.
"The new wording is confusingly inconsistent with the existing wording
in that paragraph. Would prefer '... Whether the listed exceptions are declared
in the namespace std by their corresponding <code>&lt;name.h&gt;</code>
headers is unspecified.'."
</p>



<p id="res-3883"><b>Proposed resolution:</b></p>
<p>
This wording is relative to <a href="https://wg21.link/N4928">N4928</a>.
</p>

<ol>
<li><p>Modify 17.14.7 <a href="https://timsong-cpp.github.io/cppwp/support.c.headers.other">[support.c.headers.other]</a> as indicated:</p>

<blockquote>
<p>
-1- Every C header other than <tt>&lt;complex.h&gt;</tt> (17.14.2 <a href="https://timsong-cpp.github.io/cppwp/complex.h.syn">[complex.h.syn]</a>), 
<tt>&lt;iso646.h&gt;</tt> (17.14.3 <a href="https://timsong-cpp.github.io/cppwp/iso646.h.syn">[iso646.h.syn]</a>), 
<tt>&lt;stdalign.h&gt;</tt> (17.14.4 <a href="https://timsong-cpp.github.io/cppwp/stdalign.h.syn">[stdalign.h.syn]</a>),
<tt>&lt;stdatomic.h&gt;</tt> (33.5.12 <a href="https://timsong-cpp.github.io/cppwp/stdatomic.h.syn">[stdatomic.h.syn]</a>), 
<tt>&lt;stdbool.h&gt;</tt> (17.14.5 <a href="https://timsong-cpp.github.io/cppwp/stdbool.h.syn">[stdbool.h.syn]</a>), and 
<tt>&lt;tgmath.h&gt;</tt> (17.14.6 <a href="https://timsong-cpp.github.io/cppwp/tgmath.h.syn">[tgmath.h.syn]</a>), each 
of which has a name of the form <tt>&lt;<i>name</i>.h&gt;</tt>, behaves as if each name placed in 
the standard library namespace by the corresponding <tt>&lt;c<i>name</i>&gt;</tt> header is placed 
within the global namespace scope, except for the functions described in 28.7.6 <a href="https://timsong-cpp.github.io/cppwp/sf.cmath">[sf.cmath]</a>,
the <tt>std::lerp</tt> function overloads (28.7.4 <a href="https://timsong-cpp.github.io/cppwp/c.math.lerp">[c.math.lerp]</a>), the declaration of 
<tt>std::byte</tt> (17.2.1 <a href="https://timsong-cpp.github.io/cppwp/cstddef.syn">[cstddef.syn]</a>), and the functions and function templates described 
in 17.2.5 <a href="https://timsong-cpp.github.io/cppwp/support.types.byteops">[support.types.byteops]</a>. 
It is unspecified whether these names are first declared or defined within namespace scope 
(6.4.6 <a href="https://timsong-cpp.github.io/cppwp/basic.scope.namespace">[basic.scope.namespace]</a>) of the namespace <tt>std</tt> and are then injected into the 
global namespace scope by explicit <i>using-declarations</i> (9.9 <a href="https://timsong-cpp.github.io/cppwp/namespace.udecl">[namespace.udecl]</a>).
<ins>Whether the listed exceptions are included in their corresponding <tt>&lt;<i>name</i>.h&gt;</tt> 
headers under the standard library namespace is unspecified.</ins>
</p>
</blockquote>

</li>

</ol>





</body>
</html>
