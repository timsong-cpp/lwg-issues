<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
    "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta charset="utf-8">
<title>Issue 2982: Making size_type consistent in associative container deduction guides</title>
<style type="text/css">
  p {text-align:justify}
  li {text-align:justify}
  blockquote.note
  {
    background-color:#E0E0E0;
    padding-left: 15px;
    padding-right: 15px;
    padding-top: 1px;
    padding-bottom: 1px;
  }
  ins {background-color:#A0FFA0}
  del {background-color:#FFA0A0}
  table {border-collapse: collapse;}
</style>
</head>
<body>
<hr>
<h3><a name="2982" href="lwg-defects.html#2982">2982.</a> Making <tt>size_type</tt> consistent in associative container deduction guides</h3>
<p><b>Section:</b> 26.5.6.1 <a href="https://timsong-cpp.github.io/cppwp/unord.set.overview">[unord.set.overview]</a>, 26.5.7.1 <a href="https://timsong-cpp.github.io/cppwp/unord.multiset.overview">[unord.multiset.overview]</a> <b>Status:</b> <a href="lwg-active.html#WP">WP</a>
 <b>Submitter:</b> Mike Spertus <b>Opened:</b> 2017-06-16 <b>Last modified:</b> 2017-11-13 19:01:36 UTC</p>
<p><b>Priority: </b>2
</p>
<p><b>View all issues with</b> <a href="lwg-status.html#WP">WP</a> status.</p>
<p><b>Discussion:</b></p>
<p>
Due to an incompletely implemented change in Kona, some of the size_type deduction guides say something like:
</p>
<blockquote><p>
A <tt>size_type</tt> parameter type in an <tt>unordered_set</tt> deduction guide refers to the <tt>size_type</tt> 
member type of the primary <tt>unordered_set</tt> template
</p></blockquote>
<p>
while others say
</p>
<blockquote><p>
A <tt>size_type</tt> parameter type in an <tt>unordered_map</tt> deduction guide refers to the <tt>size_type</tt> 
member type of the type deduced by the deduction guide.
</p></blockquote>
<p>
Clearly they should both be the same. My recollection is that the intent of the committee was to change them all 
to be the latter. Note, however, that this issue may be mooted if the suggestions in the upcoming 
<a href="https://wg21.link/p0433r3">P0433R3</a> paper are adopted as a DR in Toronto.
</p>

<p><i>[2017-07 Toronto Monday issue prioritization]</i></p>

<p>Priority 2; Mike is preparing an updated paper &mdash; currently named <a href="https://wg21.link/p0433r3">P0433R3</a>.</p>

<p><i>[2016-07, Toronto Saturday afternoon issues processing]</i></p>

<p>Status to Ready; Marshall to check with Mike about his paper</p>


<p><b>Proposed resolution:</b></p>
<p>
This wording is relative to <a href="https://wg21.link/n4659">N4659</a>.
</p>

<ol>
<li><p>Edit 26.5.6.1 <a href="https://timsong-cpp.github.io/cppwp/unord.set.overview">[unord.set.overview]</a> as indicated:</p>

<blockquote>
<p>
-4- A <tt>size_type</tt> parameter type in an <tt>unordered_set</tt> deduction guide refers to the <tt>size_type</tt> 
member type of the <del>primary <tt>unordered_set</tt> template</del><ins>type deduced by the deduction guide</ins>.
</p>
</blockquote>
</li>

<li><p>Edit 26.5.7.1 <a href="https://timsong-cpp.github.io/cppwp/unord.multiset.overview">[unord.multiset.overview]</a> as indicated:</p>

<blockquote>
<p>
-4- A <tt>size_type</tt> parameter type in an <tt>unordered_multiset</tt> deduction guide refers to the <tt>size_type</tt> 
member type of the <del>primary <tt>unordered_multiset</tt> template</del><ins>type deduced by the deduction guide</ins>.
</p>
</blockquote>
</li>

</ol>





</body>
</html>
