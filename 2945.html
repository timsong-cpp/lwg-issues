<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
    "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta charset="utf-8">
<title>Issue 2945: Order of template parameters in optional comparisons</title>
<style type="text/css">
  p {text-align:justify}
  li {text-align:justify}
  blockquote.note
  {
    background-color:#E0E0E0;
    padding-left: 15px;
    padding-right: 15px;
    padding-top: 1px;
    padding-bottom: 1px;
  }
  ins {background-color:#A0FFA0}
  del {background-color:#FFA0A0}
  table {border-collapse: collapse;}
  @media (prefers-color-scheme: dark) {
     html {
        color: #ddd;
        background-color: black;
     }
     ins {
        background-color: #225522
     }
     del {
        background-color: #662222
     }
     a {
        color: #6af
     }
     a:visited {
        color: #6af
     }
     blockquote.note
     {
        background-color: rgba(255, 255, 255, .10)
     }
  }
</style>
</head>
<body>
<hr>
<h3><a name="2945" href="lwg-defects.html#2945">2945.</a> Order of template parameters in <tt>optional</tt> comparisons</h3>
<p><b>Section:</b> 22.5.8 <a href="https://timsong-cpp.github.io/cppwp/optional.comp.with.t">[optional.comp.with.t]</a> <b>Status:</b> <a href="lwg-active.html#C++20">C++20</a>
 <b>Submitter:</b> Jonathan Wakely <b>Opened:</b> 2017-03-13 <b>Last modified:</b> 2021-06-06 18:38:24 UTC</p>
<p><b>Priority: </b>2
</p>
<p><b>View all other</b> <a href="lwg-index.html#optional.comp.with.t">issues</a> in [optional.comp.with.t].</p>
<p><b>View all issues with</b> <a href="lwg-status.html#C++20">C++20</a> status.</p>
<p><b>Discussion:</b></p>
<p>
LWG <a href="2934">2934</a> added an additional template parameter to the comparison
operators for <tt>std::optional</tt>, but the ones that compare <tt>U</tt> with
<tt>optional&lt;T&gt;</tt> have the parameters backwards compared to the function parameters:
</p>

<blockquote>
<pre>
template &lt;class T, class U&gt;
constexpr bool operator==(const U&amp;, const optional&lt;T&gt;&amp;);
</pre>
</blockquote>

<p>
Ville confirmed there's no particular reason for this, it's just how
he wrote the proposed resolution, but as this has normative effect we
should consider if we really want the template parameters and function
parameters to be in different orders or not.
</p>

<p><i>[2017-07-13, Casey Carter provides wording]</i></p>


<p><i>[2016-07, Toronto Thursday night issues processing]</i></p>

<p>Status to Ready</p>


<p><b>Proposed resolution:</b></p>
<p>
This wording is relative to <a href="https://wg21.link/n4659">N4659</a>.
</p>

<ol>
<li>
<p>
Modify 22.5.2 <a href="https://timsong-cpp.github.io/cppwp/optional.syn">[optional.syn]</a>, <tt>&lt;optional&gt;</tt> synopsis, as indicated:
</p>
<blockquote>
<pre>
<i>//  [optional.comp_with_t], comparison with</i> T
template &lt;class T, class U&gt; constexpr bool operator==(const optional&lt;T&gt;&amp;, const U&amp;);
template &lt;class T, class U&gt; constexpr bool operator==(const <del>U</del><ins>T</ins>&amp;, const optional&lt;<del>T</del><ins>U</ins>&gt;&amp;);
template &lt;class T, class U&gt; constexpr bool operator!=(const optional&lt;T&gt;&amp;, const U&amp;);
template &lt;class T, class U&gt; constexpr bool operator!=(const <del>U</del><ins>T</ins>&amp;, const optional&lt;<del>T</del><ins>U</ins>&gt;&amp;);
template &lt;class T, class U&gt; constexpr bool operator&lt;(const optional&lt;T&gt;&amp;, const U&amp;);
template &lt;class T, class U&gt; constexpr bool operator&lt;(const <del>U</del><ins>T</ins>&amp;, const optional&lt;<del>T</del><ins>U</ins>&gt;&amp;);
template &lt;class T, class U&gt; constexpr bool operator&lt;=(const optional&lt;T&gt;&amp;, const U&amp;);
template &lt;class T, class U&gt; constexpr bool operator&lt;=(const <del>U</del><ins>T</ins>&amp;, const optional&lt;<del>T</del><ins>U</ins>&gt;&amp;);
template &lt;class T, class U&gt; constexpr bool operator&gt;(const optional&lt;T&gt;&amp;, const U&amp;);
template &lt;class T, class U&gt; constexpr bool operator&gt;(const <del>U</del><ins>T</ins>&amp;, const optional&lt;<del>T</del><ins>U</ins>&gt;&amp;);
template &lt;class T, class U&gt; constexpr bool operator&gt;=(const optional&lt;T&gt;&amp;, const U&amp;);
template &lt;class T, class U&gt; constexpr bool operator&gt;=(const <del>U</del><ins>T</ins>&amp;, const optional&lt;<del>T</del><ins>U</ins>&gt;&amp;);
</pre>
</blockquote>
</li>

<li>
<p>
Modify  [optional.comp_with_t] as indicated:
</p>
<blockquote>
<pre>
template &lt;class T, class U&gt; constexpr bool operator==(const <del>U</del><ins>T</ins>&amp; v, const optional&lt;<del>T</del><ins>U</ins>&gt;&amp; x);
</pre>
<blockquote>
<p>
-3- [&hellip;]
</p>
</blockquote>
<p>
[&hellip;]
</p>
<pre>
template &lt;class T, class U&gt; constexpr bool operator!=(const <del>U</del><ins>T</ins>&amp; v, const optional&lt;<del>T</del><ins>U</ins>&gt;&amp; x);
</pre>
<blockquote>
<p>
-7- [&hellip;]
</p>
</blockquote>
<p>
[&hellip;]
</p>
<pre>
template &lt;class T, class U&gt; constexpr bool operator&lt;(const <del>U</del><ins>T</ins>&amp; v, const optional&lt;<del>T</del><ins>U</ins>&gt;&amp; x);
</pre>
<blockquote>
<p>
-11- [&hellip;]
</p>
</blockquote>
<p>
[&hellip;]
</p>
<pre>
template &lt;class T, class U&gt; constexpr bool operator&lt;=(const <del>U</del><ins>T</ins>&amp; v, const optional&lt;<del>T</del><ins>U</ins>&gt;&amp; x);
</pre>
<blockquote>
<p>
-15- [&hellip;]
</p>
</blockquote>
<p>
[&hellip;]
</p>
<pre>
template &lt;class T, class U&gt; constexpr bool operator&gt;(const <del>U</del><ins>T</ins>&amp; v, const optional&lt;<del>T</del><ins>U</ins>&gt;&amp; x);
</pre>
<blockquote>
<p>
-19- [&hellip;]
</p>
</blockquote>
<p>
[&hellip;]
</p>
<pre>
template &lt;class T, class U&gt; constexpr bool operator&gt;=(const <del>U</del><ins>T</ins>&amp; v, const optional&lt;<del>T</del><ins>U</ins>&gt;&amp; x);
</pre>
<blockquote>
<p>
-23- [&hellip;]
</p>
</blockquote>
<p>
[&hellip;]
</p>
</blockquote>
</li>
</ol>





</body>
</html>
