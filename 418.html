<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
    "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta charset="utf-8">
<title>Issue 418: exceptions thrown during iostream cleanup</title>
<style type="text/css">
  p {text-align:justify}
  li {text-align:justify}
  blockquote.note
  {
    background-color:#E0E0E0;
    padding-left: 15px;
    padding-right: 15px;
    padding-top: 1px;
    padding-bottom: 1px;
  }
  ins {background-color:#A0FFA0}
  del {background-color:#FFA0A0}
  table {border-collapse: collapse;}
</style>
</head>
<body>
<hr>
<h3><a name="418" href="418">418.</a> exceptions thrown during iostream cleanup</h3>
<p><b>Section:</b> 30.5.3.1.6 <a href="https://timsong-cpp.github.io/cppwp/ios::Init">[ios::Init]</a> <b>Status:</b> <a href="lwg-active.html#NAD">NAD</a>
 <b>Submitter:</b> Martin Sebor <b>Opened:</b> 2003-09-18 <b>Last modified:</b> 2016-01-28 10:01:27 UTC</p>
<p><b>Priority: </b>Not Prioritized
</p>
<p><b>View all other</b> <a href="lwg-index.html#ios::Init">issues</a> in <a href="https://timsong-cpp.github.io/cppwp/ios::Init">[ios::Init]</a>.</p>
<p><b>View all issues with</b> <a href="lwg-status.html#NAD">NAD</a> status.</p>
<p><b>Discussion:</b></p>
<p>
The dtor of the <tt>ios_base::Init</tt> object is supposed to call <tt>flush()</tt> on the
6 standard iostream objects <tt>cout</tt>, <tt>cerr</tt>, <tt>clog</tt>, <tt>wcout</tt>, 
<tt>wcerr</tt>, and <tt>wclog</tt>.
This call may cause an exception to be thrown.
</p>

<p>
17.4.4.8, p3 prohibits all library destructors from throwing exceptions.
</p>

<p>
The question is: What should this dtor do if one or more of these calls
to <tt>flush()</tt> ends up throwing an exception? This can happen quite easily
if one of the facets installed in the locale imbued in the iostream
object throws.
</p>
<p><i>[Kona: We probably can't do much better than what we've got, so
  the LWG is leaning toward NAD.  At the point where the standard
  stream objects are being cleaned up, the usual error reporting
  mechanism are all unavailable.  And exception from <tt>flush</tt> at this
  point will definitely cause problems.  A quality implementation
  might reasonably swallow the exception, or call <tt>abort</tt>, or do
  something even more drastic.]</i></p>


<p><i>[
See <a href="397">397</a> and <a href="622">622</a> for related issues.
]</i></p>


<p><i>[
2009-07 Frankfurt
]</i></p>


<blockquote><p>
Moved to NAD, no consensus for change.
</p></blockquote>



<p><b>Proposed resolution:</b></p>




</body>
</html>
