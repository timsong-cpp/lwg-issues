<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
    "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta charset="utf-8">
<title>Issue 1224: condition_variable_any support for recursive mutexes?</title>
<style type="text/css">
  p {text-align:justify}
  li {text-align:justify}
  blockquote.note
  {
    background-color:#E0E0E0;
    padding-left: 15px;
    padding-right: 15px;
    padding-top: 1px;
    padding-bottom: 1px;
  }
  ins {background-color:#A0FFA0}
  del {background-color:#FFA0A0}
  table {border-collapse: collapse;}
</style>
</head>
<body>
<p>Revised 2016-11-15 at 21:11:18 UTC</p>
<hr>
<h3><a name="1224" href="1224">1224.</a> condition_variable_any support for recursive mutexes?</h3>
<p><b>Section:</b> 30.5.2 [thread.condition.condvarany] <b>Status:</b> <a href="lwg-active.html#NAD">NAD</a>
 <b>Submitter:</b> Jeffrey Yasskin <b>Opened:</b> 2009-09-30 <b>Last modified:</b> 2016-11-15</p>
<p><b>Priority: </b>Not Prioritized
</p>
<p><b>View all other</b> <a href="lwg-index.html#thread.condition.condvarany">issues</a> in [thread.condition.condvarany].</p>
<p><b>View all issues with</b> <a href="lwg-status.html#NAD">NAD</a> status.</p>
<p><b>Discussion:</b></p>
<p>
For <tt>condition_variable_any</tt>, are recursive mutexes allowed? (I think "no")
</p>

<p><i>[
2009-11-17 Moved to Tentatively NAD after 5 positive votes on c++std-lib. 
Rationale added below.
]</i></p>



<p><b>Proposed resolution:</b></p>


<p><b>Rationale:</b></p>
<p>
<tt>condition_variable_any::wait</tt> accepts any type of mutex. It calls
<tt>unlock</tt> precisely once on entry and <tt>lock</tt> precisely once on
exit. It is up to the user to ensure that this provides the required
synchronization. Use of a recursive mutex is safe if either its lock count is 1,
so after the single unlock it can be acquired by another thread, or another
mechanism is used to synchronize the data.
</p>





</body>
</html>
