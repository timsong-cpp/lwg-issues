<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
    "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta charset="utf-8">
<title>Issue 3400: Does is_nothrow_convertible consider destruction of the destination type?</title>
<style type="text/css">
  p {text-align:justify}
  li {text-align:justify}
  blockquote.note
  {
    background-color:#E0E0E0;
    padding-left: 15px;
    padding-right: 15px;
    padding-top: 1px;
    padding-bottom: 1px;
  }
  ins {background-color:#A0FFA0}
  del {background-color:#FFA0A0}
  table {border-collapse: collapse;}
</style>
</head>
<body>
<hr>
<h3><a name="3400" href="lwg-active.html#3400">3400.</a> Does <tt>is_nothrow_convertible</tt> consider destruction of the destination type?</h3>
<p><b>Section:</b> 20.15.6 <a href="https://timsong-cpp.github.io/cppwp/meta.rel">[meta.rel]</a> <b>Status:</b> <a href="lwg-active.html#New">New</a>
 <b>Submitter:</b> Jiang An <b>Opened:</b> 2020-02-10 <b>Last modified:</b> 2020-09-06 13:52:31 UTC</p>
<p><b>Priority: </b>3
</p>
<p><b>View other</b> <a href="lwg-index-open.html#meta.rel">active issues</a> in [meta.rel].</p>
<p><b>View all other</b> <a href="lwg-index.html#meta.rel">issues</a> in [meta.rel].</p>
<p><b>View all issues with</b> <a href="lwg-status.html#New">New</a> status.</p>
<p><b>Discussion:</b></p>
<p>
This issue was submitted after a previous <a href="https://github.com/cplusplus/draft/issues/3576">editorial 
change request</a> had been rejected by the project editors.
<p/>
I find that all known implementations (at least 
<a href="https://github.com/microsoft/STL/blob/master/stl/inc/type_traits#L1658">msvcstl</a>, 
<a href="https://github.com/llvm-mirror/libcxx/blob/master/include/type_traits#L1506">libc++</a>, 
<a href="https://github.com/gcc-mirror/gcc/blob/master/libstdc%2B%2B-v3/include/std/type_traits#L1458">libstdc++</a> and the sample in <a href="https://wg21.link/p0758r1#Appendix">P0758R1</a>) of <tt>std::is_nothrow_convertible</tt>
may be not clear enough to indicate that whether destruction of the destination type is considered (or not).
<p/>
For example, given a type <tt>Weird</tt> defined as
</p>
<blockquote><pre>
struct Weird 
{
  Weird(int) noexcept {}
  ~Weird() noexcept(false) {}
};
</pre></blockquote>
<p>
Then <tt>std::is_nothrow_convertible_v&lt;int, Weird&gt;</tt> is <tt>false</tt> in every known implementation. 
However, it seems that the conversion itself is <tt>noexcept</tt>.
</p>

<p><i>[2020-02-22, Daniel comments]</i></p>

<p>
This seems to be quite related to the existing issue LWG <a href="2116">2116</a>.
</p>

<p><i>[2020-03-11 Issue Prioritization]</i></p>

<p>Priority to 3 after reflector discussion.</p>


<p><b>Proposed resolution:</b></p>




</body>
</html>
