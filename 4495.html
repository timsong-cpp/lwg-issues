<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Issue 4495: &sect;[meta.reflection.queries] is_deleted on function templates</title>
<meta property="og:title" content="Issue 4495: &sect;[meta.reflection.queries] is_deleted on function templates">
<meta property="og:description" content="C++ library issue. Status: NAD">
<meta property="og:url" content="https://timsong-cpp.github.io/lwg-issues/4495.html">
<meta property="og:type" content="website">
<meta property="og:image" content="http://cplusplus.github.io/LWG/images/cpp_logo.png">
<meta property="og:image:alt" content="C++ logo">
<style>
  p {text-align:justify}
  li {text-align:justify}
  pre code.backtick::before { content: "`" }
  pre code.backtick::after { content: "`" }
  blockquote.note
  {
    background-color:#E0E0E0;
    padding-left: 15px;
    padding-right: 15px;
    padding-top: 1px;
    padding-bottom: 1px;
  }
  ins {background-color:#A0FFA0}
  del {background-color:#FFA0A0}
  table.issues-index { border: 1px solid; border-collapse: collapse; }
  table.issues-index th { text-align: center; padding: 4px; border: 1px solid; }
  table.issues-index td { padding: 4px; border: 1px solid; }
  table.issues-index td:nth-child(1) { text-align: right; }
  table.issues-index td:nth-child(2) { text-align: left; }
  table.issues-index td:nth-child(3) { text-align: left; }
  table.issues-index td:nth-child(4) { text-align: left; }
  table.issues-index td:nth-child(5) { text-align: center; }
  table.issues-index td:nth-child(6) { text-align: center; }
  table.issues-index td:nth-child(7) { text-align: left; }
  table.issues-index td:nth-child(5) span.no-pr { color: red; }
  @media (prefers-color-scheme: dark) {
     html {
        color: #ddd;
        background-color: black;
     }
     ins {
        background-color: #225522
     }
     del {
        background-color: #662222
     }
     a {
        color: #6af
     }
     a:visited {
        color: #6af
     }
     blockquote.note
     {
        background-color: rgba(255, 255, 255, .10)
     }
  }
</style>
</head>
<body>
<hr>
<h3 id="4495"><a href="lwg-closed.html#4495">4495</a>. &sect;[meta.reflection.queries] <code class='backtick'>is_deleted</code> on function templates</h3>
<p><b>Section:</b> 21.4.7 <a href="https://timsong-cpp.github.io/cppwp/meta.reflection.queries">[meta.reflection.queries]</a> <b>Status:</b> <a href="lwg-active.html#NAD">NAD</a>
 <b>Submitter:</b> Jakub Jelinek <b>Opened:</b> 2025-12-18 <b>Last modified:</b> 2026-02-20</p>
<p><b>Priority: </b>2
</p>
<p><b>View all other</b> <a href="lwg-index.html#meta.reflection.queries">issues</a> in [meta.reflection.queries].</p>
<p><b>View all issues with</b> <a href="lwg-status.html#NAD">NAD</a> status.</p>
<p><b>Discussion:</b></p>
<p>
In <a href="https://gcc.gnu.org/pipermail/gcc-patches/2025-December/704059.html">gcc-patches/2025-December/704059</a>
Jason Merrill mentioned that <code class='backtick'>std::meta::is_deleted</code> should be able to query also deleted function templates, 
not just deleted functions.
<p/>
According to 21.4.7 <a href="https://timsong-cpp.github.io/cppwp/meta.reflection.queries">[meta.reflection.queries]</a> p15
</p>
<blockquote>
<pre>
consteval bool is_deleted(info r);
consteval bool is_defaulted(info r);
</pre>
<blockquote>
<p>
<i>Returns</i>: <code class='backtick'>true</code> if <code class='backtick'>r</code> represents a function that is a deleted function (9.6.3 <a href="https://timsong-cpp.github.io/cppwp/dcl.fct.def.delete">[dcl.fct.def.delete]</a>) 
or defaulted function (9.6.2 <a href="https://timsong-cpp.github.io/cppwp/dcl.fct.def.default">[dcl.fct.def.default]</a>), respectively. Otherwise, <code class='backtick'>false</code>.
</p>
</blockquote>
</blockquote>
<p>
and as I think <code class='backtick'>is_defaulted</code> on function templates makes no sense, that would mean changing that to
</p>
<blockquote>
<pre>
consteval bool is_deleted(info r);
</pre>
<blockquote>
<p>
<i>Returns</i>: <code class='backtick'>true</code> if <code class='backtick'>r</code> represents a function <ins>or function template</ins> that is a deleted function 
(9.6.3 <a href="https://timsong-cpp.github.io/cppwp/dcl.fct.def.delete">[dcl.fct.def.delete]</a>) <del>or defaulted function (9.6.2 <a href="https://timsong-cpp.github.io/cppwp/dcl.fct.def.default">[dcl.fct.def.default]</a>), respectively</del>. 
Otherwise, <code class='backtick'>false</code>.
</p>
</blockquote>
<pre>
consteval bool is_defaulted(info r);
</pre>
<blockquote>
<p>
<i>Returns</i>: <code class='backtick'>true</code> if <code class='backtick'>r</code> represents a function that is a <del>deleted function (9.6.3 <a href="https://timsong-cpp.github.io/cppwp/dcl.fct.def.delete">[dcl.fct.def.delete]</a>) 
or</del> defaulted function (9.6.2 <a href="https://timsong-cpp.github.io/cppwp/dcl.fct.def.default">[dcl.fct.def.default]</a>)<del>, respectively</del>. Otherwise, <code class='backtick'>false</code>.
</p>
</blockquote>
</blockquote>

<p><i>[2026-02-18; Reflector poll.]</i></p>

<p>
Set priority to 2 after reflector poll.
</p>
<p>
Split between P1 and NAD votes. Not supporting <code class='backtick'>is_deleted</code> for
templates is consistent with the current design, as we also do not support
parameter reflection or allow querying <code class='backtick'>has_ellipsis_parameter</code>.
</p>

<p><i>[2026-02-20; LWG telecon; Status changed: New &rarr; NAD.]</i></p>

<p>
The current design does not support querying anything about function templates.
The ability to use these functions on function templates should be considered
in tandem with querying other properties like parameters, etc.
</p>


<p id="res-4495"><b>Proposed resolution:</b></p>
<p>
This wording is relative to <a href="https://wg21.link/N5032" title=" Working Draft, Standard for Programming Language C++">N5032</a>.
</p>

<ol>
<li><p>Modify 21.4.7 <a href="https://timsong-cpp.github.io/cppwp/meta.reflection.queries">[meta.reflection.queries]</a> as indicated:</p>

<blockquote>
<pre>
consteval bool is_deleted(info r);
<del>consteval bool is_defaulted(info r);</del>
</pre>
<blockquote>
<p>
-15- <i>Returns</i>: <code class='backtick'>true</code> if <code class='backtick'>r</code> represents a function <ins>or function template</ins> that is a deleted function 
(9.6.3 <a href="https://timsong-cpp.github.io/cppwp/dcl.fct.def.delete">[dcl.fct.def.delete]</a>) <del>or defaulted function (9.6.2 <a href="https://timsong-cpp.github.io/cppwp/dcl.fct.def.default">[dcl.fct.def.default]</a>), respectively</del>. 
Otherwise, <code class='backtick'>false</code>.
</p>
</blockquote>
<pre>
<ins>consteval bool is_defaulted(info r);</ins>
</pre>
<blockquote>
<p>
<ins>-?- <i>Returns</i>: <code class='backtick'>true</code> if <code class='backtick'>r</code> represents a function that is a defaulted function (9.6.2 <a href="https://timsong-cpp.github.io/cppwp/dcl.fct.def.default">[dcl.fct.def.default]</a>). 
Otherwise, <code class='backtick'>false</code>.</ins>
</p>
</blockquote>
</blockquote>
</li>

</ol>






</body>
</html>
