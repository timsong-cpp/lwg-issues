<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
    "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta charset="utf-8">
<title>Issue 1515: packaged_task::make_ready_at_thread_exit has no synchronization requirements</title>
<style type="text/css">
  p {text-align:justify}
  li {text-align:justify}
  blockquote.note
  {
    background-color:#E0E0E0;
    padding-left: 15px;
    padding-right: 15px;
    padding-top: 1px;
    padding-bottom: 1px;
  }
  ins {background-color:#A0FFA0}
  del {background-color:#FFA0A0}
  table {border-collapse: collapse;}
</style>
</head>
<body>
<hr>
<h3><a name="1515" href="lwg-defects.html#1515">1515.</a> <tt>packaged_task::make_ready_at_thread_exit</tt> has no synchronization requirements</h3>
<p><b>Section:</b> 30.6.10.1 <a href="https://timsong-cpp.github.io/cppwp/futures.task.members">[futures.task.members]</a> <b>Status:</b> <a href="lwg-active.html#Resolved">Resolved</a>
 <b>Submitter:</b> INCITS <b>Opened:</b> 2010-08-25 <b>Last modified:</b> 2018-08-20 12:41:52 UTC</p>
<p><b>Priority: </b>Not Prioritized
</p>
<p><b>View all other</b> <a href="lwg-index.html#futures.task.members">issues</a> in [futures.task.members].</p>
<p><b>View all issues with</b> <a href="lwg-status.html#Resolved">Resolved</a> status.</p>
<p><b>Discussion:</b></p>
<p><b>Addresses US-208</b></p>

<p>
<tt>packaged_task::make_ready_at_thread_exit</tt> has no synchronization requirements.
</p>

<p><i>[
Resolution proposed by ballot comment:
]</i></p>

<p>
Figure out what the synchronization requirements
should be and write them.
</p>

<p><i>[2011-02-09 Anthony provides a proposed resolution]</i></p>


<p><i>[2011-02-19 Additional edits by Hans, shown in the proposed resolution section]</i></p>


<p><i>[2011-02-22 Reflector discussion]</i></p>

<p>
Moved to Tentatively Ready after 5 votes.
</p> 

<blockquote class="note">
<p>Proposed Resolution</p>

<p>Add a new paragraph following 30.6.10.1 <a href="https://timsong-cpp.github.io/cppwp/futures.task.members">[futures.task.members]</a> p. 19:</p>

<blockquote><pre>
void make_ready_at_thread_exit(ArgTypes... args);
</pre></blockquote>
<blockquote>
<p>
19 - ...
</p>
<p>
<ins>?? - <i>Synchronization</i>: Following a successful call to <tt>make_ready_at_thread_exit</tt>, the
destruction of all objects with thread storage duration associated with
the current thread happens before the associated asynchronous state is
made ready. The marking of the associated asynchronous state as ready
synchronizes with (6.8.2 <a href="https://timsong-cpp.github.io/cppwp/intro.multithread">[intro.multithread]</a>) the successful return from any function that
detects that the state is set to ready.</ins>
</p>
</blockquote>
</blockquote>


<p><b>Proposed resolution:</b></p><p>
Resolved 2011-03 Madrid meeting by paper <a href="http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2011/n3278">N3278</a>
</p>




</body>
</html>
