<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
    "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta charset="utf-8">
<title>Issue 3586: Formatting character alignment inconsistencies</title>
<style type="text/css">
  p {text-align:justify}
  li {text-align:justify}
  blockquote.note
  {
    background-color:#E0E0E0;
    padding-left: 15px;
    padding-right: 15px;
    padding-top: 1px;
    padding-bottom: 1px;
  }
  ins {background-color:#A0FFA0}
  del {background-color:#FFA0A0}
  table {border-collapse: collapse;}
  @media (prefers-color-scheme: dark) {
     html {
        color: #ddd;
        background-color: black;
     }
     ins {
        background-color: #225522
     }
     del {
        background-color: #662222
     }
     a {
        color: #6af
     }
     a:visited {
        color: #6af
     }
     blockquote.note
     {
        background-color: rgba(255, 255, 255, .10)
     }
  }
</style>
</head>
<body>
<hr>
<h3><a name="3586" href="lwg-active.html#3586">3586.</a> Formatting character alignment inconsistencies</h3>
<p><b>Section:</b> 22.14.2.2 <a href="https://timsong-cpp.github.io/cppwp/format.string.std">[format.string.std]</a> <b>Status:</b> <a href="lwg-active.html#New">New</a>
 <b>Submitter:</b> Mark de Wever <b>Opened:</b> 2021-09-05 <b>Last modified:</b> 2021-12-04 13:44:33 UTC</p>
<p><b>Priority: </b>2
</p>
<p><b>View other</b> <a href="lwg-index-open.html#format.string.std">active issues</a> in [format.string.std].</p>
<p><b>View all other</b> <a href="lwg-index.html#format.string.std">issues</a> in [format.string.std].</p>
<p><b>View all issues with</b> <a href="lwg-status.html#New">New</a> status.</p>
<p><b>Discussion:</b></p>
<p>
The alignment options specified in 22.14.2.2 <a href="https://timsong-cpp.github.io/cppwp/format.string.std">[format.string.std]</a>, Table [tab:format.align] 
causes an inconsistency when formatting characters. The output differs depending on whether 
an integer is formatted using a character presentation type or when using a character directly:
</p>
<blockquote><pre>
format("{:3}", '*'); -&gt; "*  " <i>// aligned at the start of the available space</i>
format("{:3c}", 42); -&gt; "  *" <i>// aligned at the end of the available space</i>
</pre></blockquote>
<p>
I expect both calls to return the same value: <tt>"*  "</tt>. The current wording
mixes the type and the presentation type. To me, it seems clearer to adjust to wording 
to only use the presentation type. Another approach would be adjusting the wording to 
add an exception when an integer type uses the character presentation.
</p>

<p><i>[2021-09-20; Reflector poll]</i></p>

<p>
Set priority to 2 after reflector poll.
</p>
<p>
Victor said "It mostly looks correct but I think the wording needs a bit more
work because we don't mention arithmetic presentation types anywhere."
</p>


<p><i>[2021-11-29; Daniel comments]</i></p>

<p>
This issue touches the same wording area as LWG <a href="3644">3644</a> does.
</p>


<p><b>Proposed resolution:</b></p>
<p>
This wording is relative to <a href="https://wg21.link/N4892">N4892</a>.
</p>

<ol>
<li><p>Modify 22.14.2.2 <a href="https://timsong-cpp.github.io/cppwp/format.string.std">[format.string.std]</a>, Table [tab:format.align], as indicated:</p>

<blockquote>
<table border="1">
<caption>Table 59 &mdash; Meaning of <i>align</i> options  [tab:format.align]</caption>
<tr style="text-align:center">
<th>Option</th>
<th>Meaning</th>
</tr>
<tr>
<td><tt>&lt;</tt></td>
<td>Forces the field to be aligned to the start of the available space. This is the default <ins>when 
the presentation type is a non-arithmetic type</ins><del>for non-arithmetic types, <tt>charT</tt>, and 
<tt>bool</tt>, unless an integer presentation type is specified</del>.</td>
</tr>
<tr>
<td><tt>&gt;</tt></td>
<td>Forces the field to be aligned to the end of the available space. This is the default <ins>when 
the presentation type is an arithmetic type</ins><del>for arithmetic types other than <tt>charT</tt> 
and <tt>bool</tt> or when an integer presentation type is specified</del>.</td>
</tr>
<tr>
<td colspan="2" align="center">
<tt>[&hellip;]</tt>
</td>
</tr>
</table>
</blockquote>
</li>
</ol>





</body>
</html>
