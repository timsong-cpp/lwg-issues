<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
    "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta charset="utf-8">
<title>Issue 3140: COMMON_REF is unimplementable as specified</title>
<style type="text/css">
  p {text-align:justify}
  li {text-align:justify}
  blockquote.note
  {
    background-color:#E0E0E0;
    padding-left: 15px;
    padding-right: 15px;
    padding-top: 1px;
    padding-bottom: 1px;
  }
  ins {background-color:#A0FFA0}
  del {background-color:#FFA0A0}
  table {border-collapse: collapse;}
</style>
</head>
<body>
<hr>
<h3><a name="3140" href="lwg-active.html#3140">3140.</a> <tt><i>COMMON_REF</i></tt> is unimplementable as specified</h3>
<p><b>Section:</b> 19.15.7.6 <a href="https://timsong-cpp.github.io/cppwp/meta.trans.other">[meta.trans.other]</a> <b>Status:</b> <a href="lwg-active.html#New">New</a>
 <b>Submitter:</b> Casey Carter <b>Opened:</b> 2018-07-07 <b>Last modified:</b> 2018-08-10 15:44:45 UTC</p>
<p><b>Priority: </b>Not Prioritized
</p>
<p><b>View other</b> <a href="lwg-index-open.html#meta.trans.other">active issues</a> in [meta.trans.other].</p>
<p><b>View all other</b> <a href="lwg-index.html#meta.trans.other">issues</a> in [meta.trans.other].</p>
<p><b>View all issues with</b> <a href="lwg-status.html#New">New</a> status.</p>
<p><b>Discussion:</b></p>

<p>
19.15.7.6 <a href="https://timsong-cpp.github.io/cppwp/meta.trans.other">[meta.trans.other]</a>/3.2 states:
<blockquote>
[Let] <tt><i>XREF</i>(A)</tt> denote a unary class template <tt>T</tt> such that <tt>T&lt;U&gt;</tt>
denotes the same type as <tt>U</tt> with the addition of <tt>A</tt>’s cv and reference qualifiers,
for a non-reference cv-unqualified type <tt>U</tt>,
</blockquote>
which is nonsensical: a specialization of a <em>class</em> template cannot possibly be a cv-qualified
type or reference type. <tt><i>XREF</i>(A)</tt> must be a unary alias template.
</p>



<p><b>Proposed resolution:</b></p>

<p>This wording is relative to <a href="http://wg21.link/n4762">N4762</a>.</p>

<p>Change 19.15.7.6 <a href="https://timsong-cpp.github.io/cppwp/meta.trans.other">[meta.trans.other]</a> as indicated:</p>
<blockquote>
<p>
-3- Let:
</p>
<blockquote>
<p>
(3.1) &mdash; <tt><i>CREF</i>(A)</tt> be <tt>add_lvalue_reference_t&lt;const remove_reference_t&lt;A&gt;&gt;</tt>,
</p><p>
(3.2) &mdash; <tt><i>XREF</i>(A)</tt> denote a unary <del>class</del><ins>alias</ins> template <tt>T</tt>
such that <tt>T&lt;U&gt;</tt> denotes the same type as <tt>U</tt> with the addition of <tt>A</tt>’s
cv and reference qualifiers, for a non-reference cv-unqualified type <tt>U</tt>,
</p><p>
(3.3) &mdash; <tt><i>COPYCV</i>(FROM, TO)</tt> be an alias for type <tt>TO</tt> with the addition of
<tt>FROM</tt>’s top-level cv-qualifiers. [<i>Example</i>: <tt><i>COPYCV</i>(const int, volatile short)</tt>
is an alias for <tt>const volatile short</tt>. &mdash;<i>end example</i>]
</p>
</blockquote>
</blockquote>






</body>
</html>
