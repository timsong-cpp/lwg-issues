<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
    "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta charset="utf-8">
<title>Issue 1167: pair&lt;T,U&gt; doesn't model LessThanComparable in unconstrained code even if
      T and U do.</title>
<style type="text/css">
  p {text-align:justify}
  li {text-align:justify}
  blockquote.note
  {
    background-color:#E0E0E0;
    padding-left: 15px;
    padding-right: 15px;
    padding-top: 1px;
    padding-bottom: 1px;
  }
  ins {background-color:#A0FFA0}
  del {background-color:#FFA0A0}
  table {border-collapse: collapse;}
</style>
</head>
<body>
<p>Revised 2016-11-30 at 07:11:35 UTC</p>
<hr>
<h3><a name="1167" href="1167">1167.</a> <tt>pair&lt;T,U&gt;</tt> doesn't model <tt>LessThanComparable</tt> in unconstrained code even if
      <tt>T</tt> and <tt>U</tt> do.</h3>
<p><b>Section:</b> 20.4 [pairs] <b>Status:</b> <a href="lwg-active.html#NAD Concepts">NAD Concepts</a>
 <b>Submitter:</b> Dave Abrahams <b>Opened:</b> 2009-07-01 <b>Last modified:</b> 2016-01-28</p>
<p><b>Priority: </b>Not Prioritized
</p>
<p><b>View all other</b> <a href="lwg-index.html#pairs">issues</a> in [pairs].</p>
<p><b>View all issues with</b> <a href="lwg-status.html#NAD Concepts">NAD Concepts</a> status.</p>
<p><b>Discussion:</b></p>
<p>
<tt>LessThanComparable</tt> requires (and provides default
             implementations for) &lt;=,&gt;, and &gt;=.  However, the defaults
             don't take effect in unconstrained code.
</p>
<p>
Still, it's a problem to have types acting one way in
constrained code and another in unconstrained code, except in cases of
syntax adaptation.  It's also inconsistent with the containers, which
supply all those operators.
</p>
<p>
Totally Unbiased
Suggested Resolution:
</p>
<p>
accept the exported concept maps proposal and
                    change the way this stuff is handled to use an
                    explicit exported concept map rather than nested
                    function templates
</p>
<p>
e.g., remove from the body of <tt>std::list</tt>
</p>
<blockquote><pre>
template &lt;LessThanComparable T, class Allocator&gt; 
bool operator&lt; (const list&lt;T,Allocator&gt;&amp; x, const list&lt;T,Allocator&gt;&amp; y); 
template &lt;LessThanComparable T, class Allocator&gt; 
bool operator&gt; (const list&lt;T,Allocator&gt;&amp; x, const list&lt;T,Allocator&gt;&amp; y); 
template &lt;LessThanComparable T, class Allocator&gt; 
bool operator&gt;=(const list&lt;T,Allocator&gt;&amp; x, const list&lt;T,Allocator&gt;&amp; y); 
template &lt;LessThanComparable T, class Allocator&gt; 
bool operator&lt;=(const list&lt;T,Allocator&gt;&amp; x, const list&lt;T,Allocator&gt;&amp; y); 
</pre></blockquote>
<p>
and add this concept_map afterwards:
</p>
<blockquote><pre>
template &lt;LessThanComparable T, class Allocator&gt; 
export concept_map LessThanComparable&lt;list&lt;T,Allocator&gt; &gt;
{
    bool operator&lt;(const list&lt;T,Allocator&gt;&amp; x, const list&lt;T,Allocator&gt;&amp; y);
}
</pre></blockquote>
<p>
do similarly for <tt>std::pair</tt>.  While you're at it, do the same for
<tt>operator==</tt> and <tt>!=</tt> everywhere, and seek out other such opportunities.
</p>
<p>
Alternative Resolution: keep the ugly, complex specification and add the
                       missing operators to <tt>std::pair</tt>.
</p>


<p><b>Proposed resolution:</b></p>





</body>
</html>
