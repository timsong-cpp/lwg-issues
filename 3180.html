<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
    "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta charset="utf-8">
<title>Issue 3180: Inconsistently named return type for ranges::minmax_element</title>
<style type="text/css">
  p {text-align:justify}
  li {text-align:justify}
  blockquote.note
  {
    background-color:#E0E0E0;
    padding-left: 15px;
    padding-right: 15px;
    padding-top: 1px;
    padding-bottom: 1px;
  }
  ins {background-color:#A0FFA0}
  del {background-color:#FFA0A0}
  table {border-collapse: collapse;}
</style>
</head>
<body>
<hr>
<h3><a name="3180" href="lwg-active.html#3180">3180.</a> Inconsistently named return type for <tt>ranges::minmax_element</tt></h3>
<p><b>Section:</b> 24.4 <a href="https://timsong-cpp.github.io/cppwp/algorithm.syn">[algorithm.syn]</a> <b>Status:</b> <a href="lwg-active.html#Voting">Voting</a>
 <b>Submitter:</b> Casey Carter <b>Opened:</b> 2018-12-21 <b>Last modified:</b> 2019-01-21 04:50:04 UTC</p>
<p><b>Priority: </b>0
</p>
<p><b>View all issues with</b> <a href="lwg-status.html#Voting">Voting</a> status.</p>
<p><b>Discussion:</b></p>
<p>
The overloads of <tt>std::ranges::minmax_element</tt> are specified to return
<tt>std::ranges::minmax_result</tt>, which is inconsistent with the intended
design. When an algorithm <tt>foo</tt> returns an aggregate of multiple results,
the return type should be named <tt>foo_result</tt>.
The spec should introduce an alias <tt>minmax_element_result</tt> for
<tt>minmax_result</tt> and use that alias as the return type of the
<tt>std::ranges::minmax_element</tt> overloads.
</p>

<p><i>[2019-01-11 Status to Tentatively Ready after five positive votes on the reflector.]</i></p>

<p>
During that reflector discussion several contributers questioned the choice of alias templates to denote
algorithm result types or particular apsects of it. Since this approach had been approved by LEWG before, 
it was suggested to those opponents to instead write a paper, because changing this as part of this issue 
would be a design change that would require a more global fixing approach.
</p>



<p><b>Proposed resolution:</b></p>
<p>This wording is relative to <a href="https://wg21.link/n4791">N4791</a>.</p>

<ol>
<li><p>Change 24.4 <a href="https://timsong-cpp.github.io/cppwp/algorithm.syn">[algorithm.syn]</a> as indicated, and adjust the
declarations of <tt>std::ranges::minmax_element</tt>
in 24.7.8 <a href="https://timsong-cpp.github.io/cppwp/alg.min.max">[alg.min.max]</a> to agree:</p>
<blockquote>
<pre>
[&hellip;]
template&lt;class ExecutionPolicy, class ForwardIterator, class Compare&gt;
  pair&lt;ForwardIterator, ForwardIterator&gt;
    minmax_element(ExecutionPolicy&amp;&amp; exec, // see 24.3.5 <a href="https://timsong-cpp.github.io/cppwp/algorithms.parallel.overloads">[algorithms.parallel.overloads]</a>
                   ForwardIterator first, ForwardIterator last, Compare comp);

namespace ranges {
  <ins>template&lt;class I&gt;</ins>
  <ins>using minmax_element_result = minmax_result&lt;I&gt;;</ins>

  template&lt;ForwardIterator I, Sentinel&lt;I&gt; S, class Proj = identity,
           IndirectStrictWeakOrder&lt;projected&lt;I, Proj&gt;&gt; Comp = ranges::less&lt;&gt;&gt;
    constexpr minmax_<ins>element_</ins>result&lt;I&gt;
      minmax_element(I first, S last, Comp comp = {}, Proj proj = {});
  template&lt;ForwardRange R, class Proj = identity,
           IndirectStrictWeakOrder&lt;projected&lt;iterator_t&lt;R&gt;, Proj&gt;&gt; Comp = ranges::less&lt;&gt;&gt;
    constexpr minmax_<ins>element_</ins>result&lt;safe_iterator_t&lt;R&gt;&gt;
      minmax_element(R&amp;&amp; r, Comp comp = {}, Proj proj = {});
}

// 24.7.9 <a href="https://timsong-cpp.github.io/cppwp/alg.clamp">[alg.clamp]</a>, bounded value
[&hellip;]
</pre>
</blockquote>
</li>
</ol>





</body>
</html>
