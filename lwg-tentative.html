<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>C++ Standard Library Tentative Issues</title>
<style>
  p {text-align:justify}
  li {text-align:justify}
  pre code.backtick::before { content: "`" }
  pre code.backtick::after { content: "`" }
  blockquote.note
  {
    background-color:#E0E0E0;
    padding-left: 15px;
    padding-right: 15px;
    padding-top: 1px;
    padding-bottom: 1px;
  }
  ins {background-color:#A0FFA0}
  del {background-color:#FFA0A0}
  table.issues-index { border: 1px solid; border-collapse: collapse; }
  table.issues-index th { text-align: center; padding: 4px; border: 1px solid; }
  table.issues-index td { padding: 4px; border: 1px solid; }
  table.issues-index td:nth-child(1) { text-align: right; }
  table.issues-index td:nth-child(2) { text-align: left; }
  table.issues-index td:nth-child(3) { text-align: left; }
  table.issues-index td:nth-child(4) { text-align: left; }
  table.issues-index td:nth-child(5) { text-align: center; }
  table.issues-index td:nth-child(6) { text-align: center; }
  table.issues-index td:nth-child(7) { text-align: left; }
  table.issues-index td:nth-child(5) span.no-pr { color: red; }
  @media (prefers-color-scheme: dark) {
     html {
        color: #ddd;
        background-color: black;
     }
     ins {
        background-color: #225522
     }
     del {
        background-color: #662222
     }
     a {
        color: #6af
     }
     a:visited {
        color: #6af
     }
     blockquote.note
     {
        background-color: rgba(255, 255, 255, .10)
     }
  }
</style>
</head>
<body>
<p>Revised 2026-2-22
</p><h2>Tentative Issues</h2>
<hr>
<h3 id="3831"><a href="3831">3831</a>. Two-digit formatting of negative <code>year</code> is ambiguous</h3>
<p><b>Section:</b> 30.12 <a href="https://timsong-cpp.github.io/cppwp/time.format">[time.format]</a>, 30.13 <a href="https://timsong-cpp.github.io/cppwp/time.parse">[time.parse]</a> <b>Status:</b> <a href="lwg-active.html#Ready">Tentatively Ready</a>
 <b>Submitter:</b> Matt Stephanson <b>Opened:</b> 2022-11-18 <b>Last modified:</b> 2025-12-04</p>
<p><b>Priority: </b>3
</p>
<p><b>View other</b> <a href="lwg-index-open.html#time.format">active issues</a> in [time.format].</p>
<p><b>View all other</b> <a href="lwg-index.html#time.format">issues</a> in [time.format].</p>
<p><b>View all issues with</b> <a href="lwg-status.html#Tentatively Ready">Tentatively Ready</a> status.</p>
<p><b>Discussion:</b></p>
<p>
An <a href="https://github.com/microsoft/STL/issues/3166">issue</a> has been identified regarding the two-digit 
formatting of negative years according to Table [tab:time.format.spec] (30.12 <a href="https://timsong-cpp.github.io/cppwp/time.format">[time.format]</a>):
</p>
<blockquote><pre>
cout &lt;&lt; format("{:%y} ", 1976y)  // "76"
     &lt;&lt; format("{:%y}", -1976y); // also "76"?
</pre></blockquote>
<p>
The relevant wording is
</p>
<blockquote style="border-left: 3px solid #ccc;padding-left: 15px;">
<p>
The last two decimal digits of the year. If the result is a single digit it is prefixed by <code>0</code>. 
The modified command <code>%Oy</code> produces the locale's alternative representation. The modified command 
<code>%Ey</code> produces the locale's alternative representation of offset from <code>%EC</code> (year only).
</p>
</blockquote> 
<p>
MSVC STL treats the regular modified form symmetrically. Just as <code>%Ey</code> is the offset from 
<code>%EC</code>, so <code>%y</code> is the offset from <code>%C</code>, which is itself "[t]he year divided by 100 
using <em>floored division</em>." (emphasis added). Because -1976 is the 24th year of the -20th century, 
the above code will print "76 24" using MSVC STL. However, many users expect, and 
<a href="https://github.com/llvm/llvm-project/blob/8f3f15c1a208932689a8bdef22d6ca3d4c3408c5/libcxx/include/__chrono/formatter.h#L238-L240">libc++</a> 
gives, a result based on the literal wording, "76 76".
<p/>
<a href="https://pubs.opengroup.org/onlinepubs/9699919799.2008edition/functions/strftime.html">IEEE 1003.1-2008 strftime</a>
expects the century to be nonnegative, but the glibc implementation 
<a href="https://godbolt.org/z/1jYoeYT9d">prints 24</a> for -1976. My own opinion is that this is the 
better result, because it consistently interprets <code>%C</code> and <code>%y</code> as the quotient and remainder 
of floored division by 100.
<p/>
Howard Hinnant, coauthor of the original 30.12 <a href="https://timsong-cpp.github.io/cppwp/time.format">[time.format]</a> wording in <a href="https://wg21.link/P0355" title=" Extending <chrono> to Calendars and Time Zones">P0355</a> adds:
</p>
<blockquote style="border-left: 3px solid #ccc;padding-left: 15px;">
<p>
On the motivation for this design it is important to remember a few things:
</p>
<ul>
<li><p>POSIX <code>strftime</code>/<code>strptime</code> doesn't handle negative years in this department, so this is an 
opportunity for an extension in functionality.</p></li>
<li><p>This is a formatting/parsing issue, as opposed to a computational issue. This means that human readability 
of the string syntax is the most important aspect. Computational simplicity takes a back seat (within reason).</p></li>
<li><p><code>%C</code> can't be truncated division, otherwise the years [-99, -1] would map to the same century as the years 
[0, 99]. So floored division is a pretty easy and obvious solution.</p></li>
<li><p><code>%y</code> is obvious for non-negative years: The last two decimal digits, or <code>y % 100</code>.</p></li>
</ul>
<p>
This leaves how to represent negative years with <code>%y</code>. I can think of 3 options:
</p>
<ol>
<li><p>Use the last two digits without negating:  -1976 &rarr; 76.</p></li>
<li><p>Use the last two digits and negate it:     -1976 &rarr; -76.</p></li>
<li><p>Use floored modulus arithmetic:            -1976 &rarr; 24.</p></li>
</ol>
<p>
The algorithm to convert <code>%C</code> and <code>%y</code> into a year is not important to the client because these are both 
strings, not integers. The client will do it with <code>parse</code>, not <code>100*C + y</code>.
<p/>
I discounted solution 3 as not sufficiently obvious. If the output for -1976 was 23, the human reader wouldn't 
immediately know that this is off by 1. The reader is expecting the POSIX spec:
</p>
<blockquote style="border-left: 3px solid #ccc;padding-left: 15px;">
<p>
the last two digits of the year as a decimal number [00,99].
</p></blockquote>
<p>
24 just doesn't cut it.
<p/>
That leaves solution 1 or 2. I discounted solution 2 because having the negative in 2 places (the <code>%C</code> and <code>%y</code>) 
seemed overly complicated and more error prone. The negative sign need only be in one place, and it has to be in 
<code>%C</code> to prevent ambiguity.
<p/>
That leaves solution 1. I believe this is the solution for an extension of the POSIX spec to negative years with the 
property of least surprise to the client. The only surprise is in <code>%C</code>, not <code>%y</code>, and the surprise in 
<code>%C</code> seems unavoidable.
</p></blockquote>

<p><i>[2022-11-30; Reflector poll]</i></p>

<p>
Set priority to 3 after reflector poll.
</p>
<p>A few votes for priority 2. Might need to go to LEWG.</p>

<p><strong>Previous resolution [SUPERSEDED]:</strong></p>
<blockquote class="note">

<p>
This wording is relative to <a href="https://wg21.link/N4917" title=" Working Draft, Standard for Programming Language C++">N4917</a>.
</p>

<blockquote class="note">
<p>
[<i>Drafting Note:</i> Two mutually exclusive options are prepared, depicted below by <b>Option A</b> and 
<b>Option B</b>, respectively.] 
</p>
</blockquote>

<p>
<b>Option A:</b> This is Howard Hinnant's choice (3)
</p>

<ol>
<li><p>Modify 30.12 <a href="https://timsong-cpp.github.io/cppwp/time.format">[time.format]</a>, Table [tab:time.format.spec] as indicated:</p>

<blockquote>

<table border="1">
<caption>Table 102 &mdash; Meaning of conversion specifiers  [tab:time.format.spec]</caption>
<tr style="text-align:center">
<th>Specifier</th>
<th>Replacement</th>
</tr>
<tr>
<td colspan="2" align="center">
<code>[&hellip;]</code>
</td>
</tr>
<tr>
<td><code>%y</code></td>
<td>The <del>last two decimal digits of the year</del><ins>remainder after dividing the year by 100 using floored division</ins>.<br/>
If the result is a single digit it is prefixed by <code>0</code>.<br/>
The modified command <code>%Oy</code> produces the locale's alternative representation. The<br/>
modified command <code>%Ey</code> produces the locale's alternative representation of offset from<br/>
<code>%EC</code> (year only).</td>
</tr>
<tr>
<td colspan="2" align="center">
<code>[&hellip;]</code>
</td>
</tr>
</table>

</blockquote>
</li>

<li><p>Modify 30.13 <a href="https://timsong-cpp.github.io/cppwp/time.parse">[time.parse]</a>, Table [tab:time.parse.spec] as indicated:</p>

<blockquote>

<table border="1">
<caption>Table 103 &mdash; Meaning of <code>parse</code> flags  [tab:time.parse.spec]</caption>
<tr style="text-align:center">
<th>Flag</th>
<th>Parsed value</th>
</tr>
<tr>
<td colspan="2" align="center">
<code>[&hellip;]</code>
</td>
</tr>
<tr>
<td><code>%y</code></td>
<td>The <del>last two decimal digits of the year</del><ins>remainder after dividing the year by 100 using floored division</ins>.<br/> 
If the century is not otherwise specified (e.g.<br/>
with <code>%C</code>), values in the range [<code>69</code>, <code>99</code>] are presumed to refer to the years 1969 to 1999,<br/>
and values in the range [<code>00</code>, <code>68</code>] are presumed to refer to the years 2000 to 2068. The<br/>
modified command <code>%<i>N</i> y</code> specifies the maximum number of characters to read. If <i>N</i> is<br/>
not specified, the default is 2. Leading zeroes are permitted but not required. The<br/>
modified commands <code>%Ey</code> and <code>%Oy</code> interpret the locale's alternative representation.</td>
</tr>
<tr>
<td colspan="2" align="center">
<code>[&hellip;]</code>
</td>
</tr>
</table>

</blockquote>
</li>
</ol>

<p>
<b>Option B:</b> This is Howard Hinnant's choice (1)
</p>

<ol>
<li><p>Modify 30.12 <a href="https://timsong-cpp.github.io/cppwp/time.format">[time.format]</a>, Table [tab:time.format.spec] as indicated:</p>

<blockquote>

<table border="1">
<caption>Table 102 &mdash; Meaning of conversion specifiers  [tab:time.format.spec]</caption>
<tr style="text-align:center">
<th>Specifier</th>
<th>Replacement</th>
</tr>
<tr>
<td colspan="2" align="center">
<code>[&hellip;]</code>
</td>
</tr>
<tr>
<td><code>%y</code></td>
<td>The last two decimal digits of the year<ins>, regardless of the sign of the year</ins>.<br/>
If the result is a single digit it is prefixed by <code>0</code>.<br/>
The modified command <code>%Oy</code> produces the locale's alternative representation. The<br/>
modified command <code>%Ey</code> produces the locale's alternative representation of offset from<br/>
<code>%EC</code> (year only).<br/>
<ins>[<i>Example ?:</i> <code>cout &lt;&lt; format("{:%C %y}", -1976y);</code> prints <code>-20 76</code>. &mdash; <i>end example</i>]</ins>
</td>
</tr>
<tr>
<td colspan="2" align="center">
<code>[&hellip;]</code>
</td>
</tr>
</table>

</blockquote>
</li>

<li><p>Modify 30.13 <a href="https://timsong-cpp.github.io/cppwp/time.parse">[time.parse]</a>, Table [tab:time.parse.spec] as indicated:</p>

<blockquote>

<table border="1">
<caption>Table 103 &mdash; Meaning of <code>parse</code> flags  [tab:time.parse.spec]</caption>
<tr style="text-align:center">
<th>Flag</th>
<th>Parsed value</th>
</tr>
<tr>
<td colspan="2" align="center">
<code>[&hellip;]</code>
</td>
</tr>
<tr>
<td><code>%y</code></td>
<td>The last two decimal digits of the year<ins>, regardless of the sign of the year</ins>.<br/> 
If the century is not otherwise specified (e.g.<br/>
with <code>%C</code>), values in the range [<code>69</code>, <code>99</code>] are presumed to refer to the years 1969 to 1999,<br/>
and values in the range [<code>00</code>, <code>68</code>] are presumed to refer to the years 2000 to 2068. The<br/>
modified command <code>%<i>N</i> y</code> specifies the maximum number of characters to read. If <i>N</i> is<br/>
not specified, the default is 2. Leading zeroes are permitted but not required. The<br/>
modified commands <code>%Ey</code> and <code>%Oy</code> interpret the locale's alternative representation.<br/>
<ins>[<i>Example ?:</i> <code>year y; istringstream{"-20 76"} &gt;&gt; parse("%3C %y", y);</code> results in<br/> 
<code>y == -1976y</code>. &mdash; <i>end example</i>]</ins>
</td>
</tr>
<tr>
<td colspan="2" align="center">
<code>[&hellip;]</code>
</td>
</tr>
</table>

</blockquote>
</li>
</ol>

</blockquote>

<p><i>[2025-10-17; Jonathan provides updated wording using Option B]</i></p>



<p><i>[2025-12-04; Reflector poll.]</i></p>

<p>
Set status to Tentatively Ready after seven votes in favour during reflector poll.
</p>


<p id="res-3831"><b>Proposed resolution:</b></p>
<p>
This wording is relative to <a href="https://wg21.link/N5014" title=" Working Draft, Standard for Programming Language C++">N5014</a>.
</p>

<ol>
<li><p>Modify 30.12 <a href="https://timsong-cpp.github.io/cppwp/time.format">[time.format]</a>, Table [tab:time.format.spec] as indicated:</p>

<blockquote>

<table border="1">
<caption>Table 133 &mdash; Meaning of conversion specifiers  [tab:time.format.spec]</caption>
<tr style="text-align:center">
<th>Specifier</th>
<th>Replacement</th>
</tr>
<tr>
<td colspan="2" align="center">
<code>[&hellip;]</code>
</td>
</tr>
<tr>
<td><code>%y</code></td>
<td>The last two decimal digits of the year<ins>, regardless of the sign of the year</ins>.<br/>
If the result is a single digit it is prefixed by <code>0</code>.<br/>
The modified command <code>%Oy</code> produces the locale's alternative representation. The<br/>
modified command <code>%Ey</code> produces the locale's alternative representation of offset from<br/>
<code>%EC</code> (year only).<br/>
<ins>[<i>Example ?:</i> <code>cout &lt;&lt; format("{:%C %y}", -1976y);</code> prints <code>-20 76</code>. &mdash; <i>end example</i>]</ins>
</td>
</tr>
<tr>
<td colspan="2" align="center">
<code>[&hellip;]</code>
</td>
</tr>
</table>

</blockquote>
</li>

<li><p>Modify 30.13 <a href="https://timsong-cpp.github.io/cppwp/time.parse">[time.parse]</a>, Table [tab:time.parse.spec] as indicated:</p>

<blockquote>

<table border="1">
<caption>Table 103 &mdash; Meaning of <code>parse</code> flags  [tab:time.parse.spec]</caption>
<tr style="text-align:center">
<th>Flag</th>
<th>Parsed value</th>
</tr>
<tr>
<td colspan="2" align="center">
<code>[&hellip;]</code>
</td>
</tr>
<tr>
<td><code>%y</code></td>
<td>The last two decimal digits of the year<ins>, regardless of the sign of the year</ins>.<br/>
If the century is not otherwise specified (e.g.<br/>
with <code>%C</code>), values in the range [<code>69</code>, <code>99</code>] are presumed to refer to the years 1969 to 1999,<br/>
and values in the range [<code>00</code>, <code>68</code>] are presumed to refer to the years 2000 to 2068. The<br/>
modified command <code>%<i>N</i> y</code> specifies the maximum number of characters to read. If <i>N</i> is<br/>
not specified, the default is 2. Leading zeroes are permitted but not required. The<br/>
modified commands <code>%Ey</code> and <code>%Oy</code> interpret the locale's alternative representation.<br/>
<ins>[<i>Example ?:</i> <code>year y; istringstream{"-20 76"} &gt;&gt; parse("%3C %y", y);</code> results in<br/>
<code>y == -1976y</code>. &mdash; <i>end example</i>]</ins>
</td>
</tr>
<tr>
<td colspan="2" align="center">
<code>[&hellip;]</code>
</td>
</tr>
</table>

</blockquote>
</li>
</ol>






<hr>
<h3 id="4090"><a href="4090">4090</a>. Underspecified use of locale facets for locale-dependent <code>std::format</code></h3>
<p><b>Section:</b> 28.5.2.2 <a href="https://timsong-cpp.github.io/cppwp/format.string.std">[format.string.std]</a> <b>Status:</b> <a href="lwg-active.html#Ready">Tentatively Ready</a>
 <b>Submitter:</b> Jens Maurer <b>Opened:</b> 2024-04-30 <b>Last modified:</b> 2026-01-19</p>
<p><b>Priority: </b>3
</p>
<p><b>View other</b> <a href="lwg-index-open.html#format.string.std">active issues</a> in [format.string.std].</p>
<p><b>View all other</b> <a href="lwg-index.html#format.string.std">issues</a> in [format.string.std].</p>
<p><b>View all issues with</b> <a href="lwg-status.html#Tentatively Ready">Tentatively Ready</a> status.</p>
<p><b>Discussion:</b></p>
<p>
There are <code>std::format</code> variants that take an explicit <code>std::locale</code> parameter.
There is the <code>"L"</code> format specifier that uses that locale (or some environment
locale) for formatting, according to 28.5.2.2 <a href="https://timsong-cpp.github.io/cppwp/format.string.std">[format.string.std]</a> p17:
</p>
<blockquote>
<p>
"For integral types, the locale-specific form causes the context's locale to
be used to insert the appropriate digit group separator characters."
</p>
</blockquote>
<p>
It is unclear which specific facets are used to make this happen.
This is important, because users can install their own facets into
a given locale. Specific questions include:
</p>
<ul>
<li><p>Is <code>num_put&lt;&gt;</code> being used? Or just <code>numpunct&lt;&gt;</code>?</p></li>
<li><p> Are any of the <code>_byname</code> facets being used?</p></li>
</ul>
<p>
Assuming the encoding for <code>char</code> is UTF-8, the use of a user-provided
<code>num_put&lt;&gt;</code> facet (as opposed to <code>std::format</code> creating the output based on
<code>numpunct&lt;&gt;</code>) would allow digit separators that are not expressibly as a
single UTF-8 code unit.
</p>

<p><i>[2024-05-08; Reflector poll]</i></p>

<p>
Set priority to 3 after reflector poll.
</p>

<p><i>[2024-06-12; SG16 meeting]</i></p>

<p>
The three major implementations all use <code class='backtick'>numpunct</code> but not <code class='backtick'>num_put</code>,
clarify that this is the intended behaviour.
</p>

<p><i>[2025-06-12; Jonathan provides wording]</i></p>


<p><strong>Previous resolution [SUPERSEDED]:</strong></p>
<blockquote class="note">

<p>
This wording is relative to <a href="https://wg21.link/N5008" title=" Working Draft, Programming Languages — C++">N5008</a>.
</p>

<ol>
<li><p>Modify 28.5.2.2 <a href="https://timsong-cpp.github.io/cppwp/format.string.std">[format.string.std]</a> as indicated:</p>

<blockquote>
-17-
When the <code class='backtick'>L</code> option is used, the form used for the conversion is called the
<i>locale-specific</i> form.
The <code class='backtick'>L</code> option is only valid for arithmetic types,
and its effect depends upon the type.
<ol style="list-style-type: none">
<li>
(17.1) &mdash;
For integral types, the locale-specific form causes the context’s locale
to be used to insert the appropriate digit group separator characters
<ins>
as if obtained with <code>numpunct<ins>&lt;charT&gt;</ins>::grouping</code>
and <code>numpunct<ins>&lt;charT&gt;</ins>::thousands_sep</code>
</ins>.
</li>
<li>
(17.2) &mdash;
For floating-point types, the locale-specific form causes the context’s locale to be used to insert the
appropriate digit group and radix separator characters
<ins>
as if obtained with <code>numpunct<ins>&lt;charT&gt;</ins>::grouping</code>,
<code>numpunct<ins>&lt;charT&gt;</ins>::thousands_sep</code>, and
<code>numpunct<ins>&lt;charT&gt;</ins>::decimal_point</code>
</ins>.
</li>
<li>
(17.3) &mdash;
For the textual representation of <code class='backtick'>bool</code>, the locale-specific form causes
the context’s locale to be used to insert the appropriate string
as if obtained with <code>numpunct<ins>&lt;charT&gt;</ins>::truename</code>
or <code>numpunct<ins>&lt;charT&gt;</ins>::falsename</code>.
</li>
</ol>
</blockquote>
</li>
</ol>

</blockquote>

<p><i>[2025-08-27; SG16 meeting]</i></p>

<p>
SG16 unanimously approved new wording from Victor.
The new wording incorporates similar wording as added by <a href="https://wg21.link/P2419R2" title=" Clarify handling of encodings in localized formatting of chrono types">P2419R2</a>
to address <a href="3565" title="Handling of encodings in localized formatting of chrono types is underspecified (Status: Resolved)">3565</a>. Status updated SG16 &rarr; Open.
</p>


<p><i>[2026-01-16; Reflector poll.]</i></p>

<p>
Set status to Tentatively Ready after six votes in favour during reflector poll.
</p>


<p id="res-4090"><b>Proposed resolution:</b></p>

<p>
This wording is relative to <a href="https://wg21.link/N5014" title=" Working Draft, Standard for Programming Language C++">N5014</a>.
</p>

<ol>
<li><p>Modify 28.5.2.2 <a href="https://timsong-cpp.github.io/cppwp/format.string.std">[format.string.std]</a> as indicated:</p>

<blockquote>
-17-
When the <code class='backtick'>L</code> option is used, the form used for the conversion is called the
<i>locale-specific</i> form.
The <code class='backtick'>L</code> option is only valid for arithmetic types,
and its effect depends upon the type.
<ol style="list-style-type: none">
<li>
(17.1) &mdash;
For integral types, the locale-specific form causes the context’s locale
to be used to insert the appropriate digit group separator characters
<ins>
as if obtained with <code>numpunct<ins>&lt;charT&gt;</ins>::grouping</code>
and <code>numpunct<ins>&lt;charT&gt;</ins>::thousands_sep</code>
</ins>.
</li>
<li>
(17.2) &mdash;
For floating-point types, the locale-specific form causes the context’s locale to be used to insert the
appropriate digit group and radix separator characters
<ins>
as if obtained with <code>numpunct<ins>&lt;charT&gt;</ins>::grouping</code>,
<code>numpunct<ins>&lt;charT&gt;</ins>::thousands_sep</code>, and
<code>numpunct<ins>&lt;charT&gt;</ins>::decimal_point</code>
</ins>.
</li>
<li>
(17.3) &mdash;
For the textual representation of <code class='backtick'>bool</code>, the locale-specific form causes
the context’s locale to be used to insert the appropriate string
as if obtained with <code>numpunct<ins>&lt;charT&gt;</ins>::truename</code>
or <code>numpunct<ins>&lt;charT&gt;</ins>::falsename</code>.
</li>
</ol>
<ins>
If the string literal encoding is a Unicode encoding form
and the locale is among an implementation-defined set of locales,
each replacement that depends on the locale is performed as if
the replacement character sequence is converted to the string literal encoding.
</ins>
</blockquote>
</li>
</ol>






<hr>
<h3 id="4130"><a href="4130">4130</a>. Preconditions for <code>std::launder</code> might be overly strict</h3>
<p><b>Section:</b> 17.6.5 <a href="https://timsong-cpp.github.io/cppwp/ptr.launder">[ptr.launder]</a> <b>Status:</b> <a href="lwg-active.html#Ready">Tentatively Ready</a>
 <b>Submitter:</b> Jiang An <b>Opened:</b> 2024-07-30 <b>Last modified:</b> 2026-02-13</p>
<p><b>Priority: </b>3
</p>
<p><b>View all other</b> <a href="lwg-index.html#ptr.launder">issues</a> in [ptr.launder].</p>
<p><b>View all issues with</b> <a href="lwg-status.html#Tentatively Ready">Tentatively Ready</a> status.</p>
<p><b>Discussion:</b></p>
<p>
From issue <a href="https://github.com/cplusplus/draft/issues/4553">cplusplus/draft#4553</a>
which is considered non-editorial.
<p/>
Currently, <code>std::launder</code> has a precondition that the pointed to object must be within
its lifetime. However, per the example added by <a href="https://wg21.link/P0593R6" title=" Implicit creation of objects for low-level object manipulation">P0593R6</a>, it's probably intended
that the result of <code>std::launder</code> should be allowed to point to an array element
subobject whose lifetime has not started yet.
</p>

<p><i>[2024-10-02; Reflector poll]</i></p>

<p>
Set priority to 3 after reflector poll. Needs review by Core.
</p>

<p><i>[Wrocław 2024-11-18; approved by Core]</i></p>



<p><i>[2026-02-13; Reflector poll.]</i></p>

<p>
Set status to Tentatively Ready after seven votes in favour during reflector poll.
</p>


<p id="res-4130"><b>Proposed resolution:</b></p>
<p>
This wording is relative to <a href="https://wg21.link/N4986" title=" Working Draft, Programming Languages — C++">N4986</a>.
</p>

<ol>
<li><p>Modify 17.6.5 <a href="https://timsong-cpp.github.io/cppwp/ptr.launder">[ptr.launder]</a> as indicated:</p>

<blockquote>
<pre>
template&lt;class T&gt; [[nodiscard]] constexpr T* launder(T* p) noexcept;
</pre>
<blockquote>
<p>
-1- <i>Mandates</i>: <code>!is_function_v&lt;T&gt; &amp;&amp; !is_void_v&lt;T&gt;</code> is <code>true</code>.
<p/>
-2- <i>Preconditions</i>: <code>p</code> represents the address <i>A</i> of a byte in memory.
An object <i>X</i> <del>that is within its lifetime (6.8.4 <a href="https://timsong-cpp.github.io/cppwp/basic.life">[basic.life]</a>) and</del>
whose type is similar (7.3.6 <a href="https://timsong-cpp.github.io/cppwp/conv.qual">[conv.qual]</a>) to <code>T</code> is located at the address
<i>A</i><ins>, and is either within its lifetime (6.8.4 <a href="https://timsong-cpp.github.io/cppwp/basic.life">[basic.life]</a>) or is an array
element subobject whose containing array object is within its lifetime</ins>. All bytes of storage
that would be reachable through (6.9.4 <a href="https://timsong-cpp.github.io/cppwp/basic.compound">[basic.compound]</a>) the result are reachable through
<code>p</code>.
<p/>
-3- <i>Returns</i>: A value of type <code>T*</code> that points to <i>X</i>.
<p/>
[&hellip;]
</p>
</blockquote>
</blockquote>

</li>

</ol>





<hr>
<h3 id="4259"><a href="4259">4259</a>. P1148R0 changed the return values of searching functions of <code class='backtick'>std::basic_string</code> on some platforms</h3>
<p><b>Section:</b> 27.4.3.8.2 <a href="https://timsong-cpp.github.io/cppwp/string.find">[string.find]</a> <b>Status:</b> <a href="lwg-active.html#Ready">Tentatively Ready</a>
 <b>Submitter:</b> Jiang An <b>Opened:</b> 2025-05-05 <b>Last modified:</b> 2025-12-04</p>
<p><b>Priority: </b>3
</p>
<p><b>View other</b> <a href="lwg-index-open.html#string.find">active issues</a> in [string.find].</p>
<p><b>View all other</b> <a href="lwg-index.html#string.find">issues</a> in [string.find].</p>
<p><b>View all issues with</b> <a href="lwg-status.html#Tentatively Ready">Tentatively Ready</a> status.</p>
<p><b>Discussion:</b></p>
<p>
<a href="https://wg21.link/P1148R0" title=" Cleaning up Clause 20">P1148R0</a> respecified the searching functions of <code class='backtick'>std::basic_string</code> to return 
corresponding string view type's <code class='backtick'>npos</code> member constant (equal to <code class='backtick'>std::size_t(-1)</code>), converted 
to the string type <code class='backtick'>S</code>'s member <code class='backtick'>S::size_type</code>, when the search fails. Before the change, 
<code class='backtick'>S::npos</code> (equal to <code class='backtick'>S::size_type(-1)</code>) was returned on failure.
<p/>
On platforms where <code class='backtick'>std::size_t</code> isn't the widest unsigned integer type (e.g. on usual 32-bit 
platforms), the return value can change. Because there can be an allocator with a wider size_type, 
and when the basic_string type <code class='backtick'>S</code> uses such an allocator, <code class='backtick'>S::size_type</code> is specified to be that 
type, which in turn makes <code class='backtick'>S::size_type(std::size_t(-1))</code> not equal to <code class='backtick'>S::size_type(-1)</code>.
<p/>
Do we want to restore the old return values?
</p>

<p><strong>Previous resolution [SUPERSEDED]:</strong></p>
<blockquote class="note">

<p>
This wording is relative to <a href="https://wg21.link/N5008" title=" Working Draft, Programming Languages — C++">N5008</a>.
</p>
<ol>

<li><p>Modify 27.4.3.8.2 <a href="https://timsong-cpp.github.io/cppwp/string.find">[string.find]</a> as indicated:</p>

<blockquote>
<pre>
template&lt;class T&gt;
  constexpr size_type find(const T&amp; t, size_type pos = 0) const noexcept(<i>see below</i>);
[&hellip;]
template&lt;class T&gt;
  constexpr size_type find_last_not_of(const T&amp; t, size_type pos = npos) const noexcept(<i>see below</i>);
</pre>
<blockquote>
<p>
-2- <i>Constraints</i>: [&hellip;]
<p/>
-3- <i>Effects</i>: Let <code><i>G</i></code> be the name of the function. Equivalent to:
</p>
<blockquote><pre>
basic_string_view&lt;charT, traits&gt; s = *this, sv = t;
<del>return s.<i>G</i>(sv, pos);</del>
<ins>if (auto result = s.<i>G</i>(sv, pos); result == size_t(-1))
  return npos;
else
  return result;</ins>
</pre></blockquote>
</blockquote>
</blockquote>
</li>
</ol>
</blockquote>

<p><i>[2025-06-10, reflector discussion]</i></p>

<p>
During reflector discussion of this issue there was a preference to adjust the
proposed wording to use <code class='backtick'>s.npos</code> instead of <code class='backtick'>size_t(-1)</code>. 
</p>

<p><i>[2025-10-21; Reflector poll.]</i></p>

<p>
Set priority to 3 after reflector poll.
</p>

<p><i>[2025-12-04; Reflector poll.]</i></p>

<p>
Set status to Tentatively Ready after five votes in favour during reflector poll.
</p>


<p id="res-4259"><b>Proposed resolution:</b></p>
<p>
This wording is relative to <a href="https://wg21.link/N5008" title=" Working Draft, Programming Languages — C++">N5008</a>.
</p>
<ol>

<li><p>Modify 27.4.3.8.2 <a href="https://timsong-cpp.github.io/cppwp/string.find">[string.find]</a> as indicated:</p>

<blockquote>
<pre>
template&lt;class T&gt;
  constexpr size_type find(const T&amp; t, size_type pos = 0) const noexcept(<i>see below</i>);
[&hellip;]
template&lt;class T&gt;
  constexpr size_type find_last_not_of(const T&amp; t, size_type pos = npos) const noexcept(<i>see below</i>);
</pre>
<blockquote>
<p>
-2- <i>Constraints</i>: [&hellip;]
<p/>
-3- <i>Effects</i>: Let <code><i>G</i></code> be the name of the function. Equivalent to:
</p>
<blockquote><pre>
basic_string_view&lt;charT, traits&gt; s = *this, sv = t;
<del>return s.<i>G</i>(sv, pos);</del>
<ins>if (auto result = s.<i>G</i>(sv, pos); result == s.npos)
  return npos;
else
  return result;</ins>
</pre></blockquote>
</blockquote>
</blockquote>
</li>
</ol>





<hr>
<h3 id="4324"><a href="4324">4324</a>. <code>unique_ptr&lt;void&gt;::operator*</code> is not SFINAE-friendly</h3>
<p><b>Section:</b> 20.3.1.3.5 <a href="https://timsong-cpp.github.io/cppwp/unique.ptr.single.observers">[unique.ptr.single.observers]</a> <b>Status:</b> <a href="lwg-active.html#Ready">Tentatively Ready</a>
 <b>Submitter:</b> Hewill Kang <b>Opened:</b> 2025-08-24 <b>Last modified:</b> 2025-12-04</p>
<p><b>Priority: </b>3
</p>
<p><b>View other</b> <a href="lwg-index-open.html#unique.ptr.single.observers">active issues</a> in [unique.ptr.single.observers].</p>
<p><b>View all other</b> <a href="lwg-index.html#unique.ptr.single.observers">issues</a> in [unique.ptr.single.observers].</p>
<p><b>View all issues with</b> <a href="lwg-status.html#Tentatively Ready">Tentatively Ready</a> status.</p>
<p><b>Discussion:</b></p>
<p>
LWG <a href="2762" title="unique_ptr operator*() should be noexcept (Status: C++23)">2762</a> added a conditional <code class='backtick'>noexcept</code> specification to <code class='backtick'>unique_ptr::operator*</code>
to make it consistent with <code class='backtick'>shared_ptr::operator*</code>:
</p>
<pre>
constexpr add_lvalue_reference_t&lt;T&gt; operator*() const <ins>noexcept(noexcept(*declval&lt;pointer&gt;()))</ins>;
</pre>
<p>
This unexpectedly makes <code>unique_ptr&lt;void&gt;::operator*</code> no longer SFINAE-friendly, 
<a href="https://godbolt.org/z/xd15jYPhz">for example</a>:
</p>
<blockquote><pre>
#include &lt;memory&gt;

template&lt;class T&gt; concept dereferenceable = requires(T&amp; t) { *t; };

static_assert( dereferenceable&lt;int *&gt;);
static_assert(!dereferenceable&lt;void*&gt;);

static_assert( dereferenceable&lt;std::shared_ptr&lt;int &gt;&gt;);
static_assert(!dereferenceable&lt;std::shared_ptr&lt;void&gt;&gt;);

static_assert( dereferenceable&lt;std::unique_ptr&lt;int &gt;&gt;);
static_assert( dereferenceable&lt;std::unique_ptr&lt;void&gt;&gt;); // <span  style="color:#C80000;font-weight:bold">hard error</span>
</pre></blockquote>
<p>
Given that the standard intends for <code class='backtick'>operator*</code> of <code class='backtick'>shared_ptr</code> and <code class='backtick'>unique_ptr</code> to be 
SFINAE-friendly based on 20.3.2.2.6 <a href="https://timsong-cpp.github.io/cppwp/util.smartptr.shared.obs">[util.smartptr.shared.obs]</a>, regardless of the value of 
<code class='backtick'>static_assert</code>, it is reasonable to assume that there should be no hard error here.
</p>

<p><strong>Previous resolution [SUPERSEDED]:</strong></p>
<blockquote class="note">

<p>
This wording is relative to <a href="https://wg21.link/N5014" title=" Working Draft, Standard for Programming Language C++">N5014</a>.
</p>

<ol>

<li><p>Modify 20.3.1.3.5 <a href="https://timsong-cpp.github.io/cppwp/unique.ptr.single.observers">[unique.ptr.single.observers]</a> as indicated:</p>

<blockquote>
<pre>
constexpr add_lvalue_reference_t&lt;T&gt; operator*() const noexcept(<del>noexcept(*declval&lt;pointer&gt;())</del><ins><i>see below</i></ins>);
</pre>
<blockquote>
<p>
-1- <i>Mandates</i>: <code>reference_converts_from_temporary_v&lt;add_lvalue_reference_t&lt;T&gt;, 
decltype(*declval&lt;pointer&gt;())&gt;</code> is <code class='backtick'>false</code>.
<p/>
-2- <i>Preconditions</i>: <code class='backtick'>get() != nullptr</code> is <code class='backtick'>true</code>.
<p/>
-3- <i>Returns</i>: <code class='backtick'>*get()</code>.
<p/>
<ins>-?- <i>Remarks:</i>: The exception specification is equivalent to:</ins>
</p>
<blockquote><pre>
<ins>!requires { *declval&lt;pointer&gt;(); } || requires { { *declval&lt;pointer&gt;() } noexcept; }</ins>
</pre></blockquote>
</blockquote>
</blockquote>

</li>

</ol>
</blockquote>

<p><i>[2025-08-26; Reflector discussion]</i></p>

<p>
During reflector triaging it had been pointed out that a better solution would be to constrain the 
<code class='backtick'>operator*</code> directly. The proposed wording has been updated to that effect.
</p>

<p><i>[2025-10-22; Reflector poll.]</i></p>

<p>
Set priority to 3 after reflector poll.
</p>

<p><i>[2025-12-04; Reflector poll.]</i></p>

<p>
Set status to Tentatively Ready after eight votes in favour during reflector poll.
</p>


<p id="res-4324"><b>Proposed resolution:</b></p>
<p>
This wording is relative to <a href="https://wg21.link/N5014" title=" Working Draft, Standard for Programming Language C++">N5014</a>.
</p>

<ol>

<li><p>Modify 20.3.1.3.5 <a href="https://timsong-cpp.github.io/cppwp/unique.ptr.single.observers">[unique.ptr.single.observers]</a> as indicated:</p>

<blockquote>
<pre>
constexpr add_lvalue_reference_t&lt;T&gt; operator*() const noexcept(noexcept(*declval&lt;pointer&gt;()));
</pre>
<blockquote>
<p>
<ins>-?- <i>Constraints</i>: <code>*declval&lt;pointer&gt;()</code> is a well-formed expression.</ins>
<p/>
-1- <i>Mandates</i>: <code>reference_converts_from_temporary_v&lt;add_lvalue_reference_t&lt;T&gt;, 
decltype(*declval&lt;pointer&gt;())&gt;</code> is <code class='backtick'>false</code>.
<p/>
-2- <i>Preconditions</i>: <code class='backtick'>get() != nullptr</code> is <code class='backtick'>true</code>.
<p/>
-3- <i>Returns</i>: <code class='backtick'>*get()</code>.
</p>
</blockquote>
</blockquote>

</li>

</ol>





<hr>
<h3 id="4417"><a href="4417">4417</a>. <code class='backtick'>views::indices</code> is underconstrained</h3>
<p><b>Section:</b> 25.6.4.1 <a href="https://timsong-cpp.github.io/cppwp/range.iota.overview">[range.iota.overview]</a> <b>Status:</b> <a href="lwg-active.html#NAD">Tentatively NAD</a>
 <b>Submitter:</b> Hewill Kang <b>Opened:</b> 2025-10-15 <b>Last modified:</b> 2026-01-16</p>
<p><b>Priority: </b>Not Prioritized
</p>
<p><b>View all other</b> <a href="lwg-index.html#range.iota.overview">issues</a> in [range.iota.overview].</p>
<p><b>View all issues with</b> <a href="lwg-status.html#Tentatively NAD">Tentatively NAD</a> status.</p>
<p><b>Discussion:</b></p>
<p>
Whether an integer-class type satisfies <code class='backtick'>weakly_incrementable</code> is unspecified according to
25.6.4.2 <a href="https://timsong-cpp.github.io/cppwp/range.iota.view">[range.iota.view]</a>. For example, the library may provide a member
type alias <code class='backtick'>difference_type</code> for the integer-class type to make it <code class='backtick'>weakly_incrementable</code>, or not.
<p/>
If the latter, then <code>views::iota(<i>integer-class-type</i>(0))</code> is always ill-formed because
<code>iota_view&lt;W, Bound&gt;</code> requires <code class='backtick'>W</code> to be <code class='backtick'>weakly_incrementable</code>.
<p/>
However, unlike <code class='backtick'>views::iota</code>, <code class='backtick'>views::indices</code> unconditionally accepts integer-class types,
which will lead to a hard error in the function body if the integer-class type is not 
<code class='backtick'>weakly_incrementable</code>, which is true for both libstdc++ and MSVC-STL.
</p>

<p><i>[2026-01-16; Reflector poll. Status &rarr; Tentatively NAD.]</i></p>

<p>
"This is implied by the expression-equivalence."
</p>


<p id="res-4417"><b>Proposed resolution:</b></p>
<p>
This wording is relative to <a href="https://wg21.link/N5014" title=" Working Draft, Standard for Programming Language C++">N5014</a>.
</p>

<ol>
<li><p>Modify 25.6.4.1 <a href="https://timsong-cpp.github.io/cppwp/range.iota.overview">[range.iota.overview]</a> as indicated:</p>

<blockquote>
<p>
-4- The name <code class='backtick'>views::indices</code> denotes a customization point object (16.3.3.3.5 <a href="https://timsong-cpp.github.io/cppwp/customization.point.object">[customization.point.object]</a>).
Given subexpression <code class='backtick'>E</code>, let <code class='backtick'>T</code> be <code>remove_cvref_t&lt;decltype((E))&gt;</code>.
<code class='backtick'>views::indices(E)</code> is expression-equivalent to <code class='backtick'>views::iota(T(0), E)</code> if
<code><i>is-integer-like</i>&lt;T&gt;</code> is <code class='backtick'>true</code> <ins>and <code class='backtick'>T</code> models <code class='backtick'>weakly_incrementable</code></ins>,
and ill-formed otherwise.
</p>
</blockquote>
</li>
</ol>






<hr>
<h3 id="4457"><a href="4457">4457</a>. freestanding for <code class='backtick'>stable_sort</code>, <code class='backtick'>stable_partition</code> and <code class='backtick'>inplace_merge</code></h3>
<p><b>Section:</b> 26.4 <a href="https://timsong-cpp.github.io/cppwp/algorithm.syn">[algorithm.syn]</a> <b>Status:</b> <a href="lwg-active.html#Ready">Tentatively Ready</a>
 <b>Submitter:</b> Braden Ganetsky <b>Opened:</b> 2025-11-06 <b>Last modified:</b> 2026-01-16</p>
<p><b>Priority: </b>Not Prioritized
</p>
<p><b>View all other</b> <a href="lwg-index.html#algorithm.syn">issues</a> in [algorithm.syn].</p>
<p><b>View all issues with</b> <a href="lwg-status.html#Tentatively Ready">Tentatively Ready</a> status.</p>
<p><b>Discussion:</b></p>
<b>Addresses <a href="https://github.com/cplusplus/nbballot/issues/830">US 157-255</a></b>
<p>
This applies the resolution for US 157-255.
</p>

<p><i>[2026-01-16; Reflector poll.]</i></p>

<p>
Set status to Tentatively Ready after ten votes in favour during reflector poll.
</p>


<p id="res-4457"><b>Proposed resolution:</b></p>
<p>
This wording is relative to <a href="https://wg21.link/N5014" title=" Working Draft, Standard for Programming Language C++">N5014</a>.
</p>

<ol>

<li><p>Modify 26.4 <a href="https://timsong-cpp.github.io/cppwp/algorithm.syn">[algorithm.syn]</a>, as indicated:</p>
<blockquote><pre>
namespace ranges {
  template&lt;random_access_iterator I, sentinel_for&lt;I&gt; S, class Comp = ranges::less,
           class Proj = identity&gt;
    requires sortable&lt;I, Comp, Proj&gt;
    constexpr I stable_sort(I first, S last, Comp comp = {}, Proj proj = {});         // hosted
  template&lt;random_access_range R, class Comp = ranges::less, class Proj = identity&gt;
    requires sortable&lt;iterator_t&lt;R&gt;, Comp, Proj&gt;
    constexpr borrowed_iterator_t&lt;R&gt;
      stable_sort(R&amp;&amp; r, Comp comp = {}, Proj proj = {});                             // hosted

  template&lt;execution-policy Ep, random_access_iterator I, sized_sentinel_for&lt;I&gt; S,
           class Comp = ranges::less, class Proj = identity&gt;
    requires sortable&lt;I, Comp, Proj&gt;
    I stable_sort(Ep&amp;&amp; exec, I first, S last, Comp comp = {},
                  Proj proj = {});                                        // <del>freestanding-deleted</del><ins>hosted</ins>
  template&lt;execution-policy Ep, sized-random-access-range R, class Comp = ranges::less,
           class Proj = identity&gt;
    requires sortable&lt;iterator_t&lt;R&gt;, Comp, Proj&gt;
    borrowed_iterator_t&lt;R&gt;
      stable_sort(Ep&amp;&amp; exec, R&amp;&amp; r, Comp comp = {}, Proj proj = {});      // <del>freestanding-deleted</del><ins>hosted</ins>
}
</pre></blockquote>
</li>

<li><p>Modify 26.4 <a href="https://timsong-cpp.github.io/cppwp/algorithm.syn">[algorithm.syn]</a>, as indicated:</p>
<blockquote><pre>
namespace ranges {
  template&lt;bidirectional_iterator I, sentinel_for&lt;I&gt; S, class Proj = identity,
           indirect_unary_predicate&lt;projected&lt;I, Proj&gt;&gt; Pred&gt;
    requires permutable&lt;I&gt;
    constexpr subrange&lt;I&gt; stable_partition(I first, S last, Pred pred,            // hosted
                                           Proj proj = {});
  template&lt;bidirectional_range R, class Proj = identity,
           indirect_unary_predicate&lt;projected&lt;iterator_t&lt;R&gt;, Proj&gt;&gt; Pred&gt;
    requires permutable&lt;iterator_t&lt;R&gt;&gt;
    constexpr borrowed_subrange_t&lt;R&gt; stable_partition(R&amp;&amp; r, Pred pred,           // hosted
                                                      Proj proj = {});

  template&lt;execution-policy Ep, random_access_iterator I, sized_sentinel_for&lt;I&gt; S,
           class Proj = identity, indirect_unary_predicate&lt;projected&lt;I, Proj&gt;&gt; Pred&gt;
    requires permutable&lt;I&gt;
    subrange&lt;I&gt;
      stable_partition(Ep&amp;&amp; exec, I first, S last, Pred pred,
                       Proj proj = {});                                   // <del>freestanding-deleted</del><ins>hosted</ins>
  template&lt;execution-policy Ep, sized-random-access-range R, class Proj = identity,
           indirect_unary_predicate&lt;projected&lt;iterator_t&lt;R&gt;, Proj&gt;&gt; Pred&gt;
    requires permutable&lt;iterator_t&lt;R&gt;&gt;
    borrowed_subrange_t&lt;R&gt;
      stable_partition(Ep&amp;&amp; exec, R&amp;&amp; r, Pred pred, Proj proj = {});      // <del>freestanding-deleted</del><ins>hosted</ins>
}
</pre></blockquote>
</li>

<li><p>Modify 26.4 <a href="https://timsong-cpp.github.io/cppwp/algorithm.syn">[algorithm.syn]</a>, as indicated:</p>
<blockquote><pre>
namespace ranges {
  template&lt;bidirectional_iterator I, sentinel_for&lt;I&gt; S, class Comp = ranges::less,
           class Proj = identity&gt;
    requires sortable&lt;I, Comp, Proj&gt;
    constexpr I
      inplace_merge(I first, I middle, S last, Comp comp = {}, Proj proj = {});       // hosted
  template&lt;bidirectional_range R, class Comp = ranges::less, class Proj = identity&gt;
    requires sortable&lt;iterator_t&lt;R&gt;, Comp, Proj&gt;
    constexpr borrowed_iterator_t&lt;R&gt;
      inplace_merge(R&amp;&amp; r, iterator_t&lt;R&gt; middle, Comp comp = {}, Proj proj = {});     // hosted

  template&lt;execution-policy Ep, random_access_iterator I, sized_sentinel_for&lt;I&gt; S,
           class Comp = ranges::less, class Proj = identity&gt;
    requires sortable&lt;I, Comp, Proj&gt;
    I inplace_merge(Ep&amp;&amp; exec, I first, I middle, S last, Comp comp = {},
                    Proj proj = {});                          // <del>freestanding-deleted</del><ins>hosted</ins>
  template&lt;execution-policy Ep, sized-random-access-range R, class Comp = ranges::less,
           class Proj = identity&gt;
    requires sortable&lt;iterator_t&lt;R&gt;, Comp, Proj&gt;
    borrowed_iterator_t&lt;R&gt;
      inplace_merge(Ep&amp;&amp; exec, R&amp;&amp; r, iterator_t&lt;R&gt; middle, Comp comp = {},
                    Proj proj = {});                          // <del>freestanding-deleted</del><ins>hosted</ins>
}
</pre></blockquote>
</li>

</ol>





<hr>
<h3 id="4460"><a href="4460">4460</a>. Missing <i>Throws</i>: for last <code class='backtick'>variant</code> constructor</h3>
<p><b>Section:</b> 22.6.3.2 <a href="https://timsong-cpp.github.io/cppwp/variant.ctor">[variant.ctor]</a> <b>Status:</b> <a href="lwg-active.html#Ready">Tentatively Ready</a>
 <b>Submitter:</b> Jonathan Wakely <b>Opened:</b> 2025-11-07 <b>Last modified:</b> 2025-12-04</p>
<p><b>Priority: </b>Not Prioritized
</p>
<p><b>View other</b> <a href="lwg-index-open.html#variant.ctor">active issues</a> in [variant.ctor].</p>
<p><b>View all other</b> <a href="lwg-index.html#variant.ctor">issues</a> in [variant.ctor].</p>
<p><b>View all issues with</b> <a href="lwg-status.html#Tentatively Ready">Tentatively Ready</a> status.</p>
<p><b>Discussion:</b></p>
<p>
All <code class='backtick'>variant</code> constructors except the last one have a <i>Throws</i>: element
saying what they're allowed to throw.
</p>
<p>
This originates from an editorial pull request, where the submitter said:
</p>
<blockquote>
"It looks like this defect is an artifact of a change between
<a href="https://wg21.link/P0088R0" title=" Variant: a type-safe union that is rarely invalid (v5)">P0088R0</a> and <a href="https://wg21.link/P0088R1" title=" Variant: a type-safe union that is rarely invalid (v6)">P0088R1</a>.
Note how in R0 neither one of the <code class='backtick'>emplaced_type_t</code>/<code class='backtick'>emplaced_index_t</code>
(as they were then called) + <code class='backtick'>initializer_list</code> constructors have a
throws clause. In R1 only one of them gained it."
</blockquote>
<p><strong>Previous resolution [SUPERSEDED]:</strong></p>
<blockquote class="note">

<p>
This wording is relative to <a href="https://wg21.link/N5014" title=" Working Draft, Standard for Programming Language C++">N5014</a>.
</p>

<ol>
<li><p>Modify 22.6.3.2 <a href="https://timsong-cpp.github.io/cppwp/variant.ctor">[variant.ctor]</a>, as indicated:</p>

<blockquote>
<pre>
template&lt;size_t I, class U, class... Args&gt;
  constexpr explicit variant(in_place_index_t&lt;I&gt;, initializer_list&lt;U&gt; il, Args&amp;&amp;... args);
</pre>
<blockquote>
<p>-35- <i>Constraints</i>:
<ol style="list-style-type: none">
<li>(35.1) &mdash; <code class='backtick'>I</code> is less than <code class='backtick'>sizeof...(Types)</code> and</li>
<li>(35.2) &mdash;
<code>is_constructible_v&lt;T<sub>I</sub>, initializer_list&lt;U&gt;&amp;, Args...&gt;</code>
is <code class='backtick'>true</code>.
</li>
</ol>
</p>
<p>-36- <i>Effects</i>:
Direct-non-list-initializes the contained value of type
<code>T<sub>I</sub></code> with <code>il, std::forward&lt;Args&gt;(args)...</code>.
</p>
<p>-37- <i>Postconditions</i>: <code class='backtick'>index()</code> is <code class='backtick'>I</code>.</p>
<p><ins>-?- <i>Throws</i>:
Any exception thrown by calling the selected constructor of
<code>T<sub>I</sub></code>.
</ins>
</p>
<p>-38- <i>Remarks</i>:
If <code>T<sub>I</sub></code>’s selected constructor is a constexpr constructor,
this constructor is a constexpr constructor.
</p>
</blockquote>
</blockquote>
</li>
</ol>
</blockquote>

<p><i>[2025-11-11; Jonathan provides improved wording]</i></p>



<p><i>[2025-12-04; Reflector poll.]</i></p>

<p>
Set status to Tentatively Ready after six votes in favour during reflector poll.
</p>


<p id="res-4460"><b>Proposed resolution:</b></p>

<p>
This wording is relative to <a href="https://wg21.link/N5014" title=" Working Draft, Standard for Programming Language C++">N5014</a>.
</p>

<ol>
<li><p>Modify 22.6.3.2 <a href="https://timsong-cpp.github.io/cppwp/variant.ctor">[variant.ctor]</a>, as indicated:</p>

<blockquote>
<pre>
constexpr variant() noexcept(<i>see below</i>);
</pre>
<blockquote>
<p>-2- <i>Constraints</i>:
<code>is_default_constructible_v&lt;T<sub>0</sub>&gt;</code> is <code class='backtick'>true</code>.
</p>
<p>-3- <i>Effects</i>:
Constructs a <code class='backtick'>variant</code> holding a value-initialized value of type <code>T<sub>0</sub></code>.
</p>
<p>-4- <i>Postconditions</i>:
<code class='backtick'>valueless_by_exception()</code> is <code class='backtick'>false</code> and <code class='backtick'>index()</code> is <code class='backtick'>0</code>.
</p>
<p>-5- <i>Throws</i>:
Any exception thrown by the value-initialization of <code>T<sub>0</sub></code>.
</p>
<p>-6- <i>Remarks</i>: [&hellip;]
</p>
</blockquote>

<pre>
constexpr variant(const variant&amp;);
</pre>
<blockquote>
<p>-7- <i>Effects</i>:
If <code class='backtick'>w</code> holds a value, initializes the <code class='backtick'>variant</code> to hold the same alternative
as <code class='backtick'>w</code> and direct-initializes the contained value with
<code><i>GET</i>&lt;j&gt;(w)</code>, where <code class='backtick'>j</code> is <code class='backtick'>w.index()</code>.
Otherwise, initializes the <code class='backtick'>variant</code> to not hold a value.
</p>
<p>-8- <i>Throws</i>:
Any exception thrown by
<del>direct-initializating any <code>T<sub>i</sub></code> for all <i>i</i></del>
<ins>the initialization of the contained value</ins>.
</p>
<p>-9- <i>Remarks</i>: [&hellip;]
</p>
</blockquote>

<pre>
constexpr variant(variant&amp;&amp;) noexcept(<i>see below</i>);
</pre>
<blockquote>
<p>-10- <i>Constraints</i>:
<code>is_move_constructible_v&lt;T<sub>i</sub>&gt;</code> is <code class='backtick'>true</code>
for all <i>i</i>.
</p>
<p>-11- <i>Effects</i>:
If <code class='backtick'>w</code> holds a value, initializes the <code class='backtick'>variant</code> to hold the same alternative
as <code class='backtick'>w</code> and direct-initializes the contained value with
<code><i>GET</i>&lt;j&gt;(std::move(w))</code>, where <code class='backtick'>j</code> is <code class='backtick'>w.index()</code>.
Otherwise, initializes the <code class='backtick'>variant</code> to not hold a value.
</p>
<p>-12- <i>Throws</i>:
Any exception thrown by
<del>move-constructing any <code>T<sub>i</sub></code> for all <i>i</i></del>
<ins>the initialization of the contained value</ins>.
</p>
<p>-13- <i>Remarks</i>: [&hellip;]
</p>
</blockquote>

<pre>
template&lt;class T&gt; constexpr variant(T&amp;&amp;) noexcept(<i>see below</i>);
</pre>
<blockquote>
<p>-14-
Let <code>T<sub>j</sub></code> be a type that is determined as follows:
build an imaginary function <code><i>FUN</i>(T<sub>i</sub>)</code>
for each alternative type <code>T<sub>i</sub></code>
for which <code>T<sub>i</sub> x[] = {std::forward&lt;T&gt;(t)};</code>
is well-formed for some invented variable <code class='backtick'>x</code>.
The overload <code><i>FUN</i>(T<sub>j</sub>)</code> selected by overload resolution
for the expression <code><i>FUN</i>(std::forward&lt;T&gt;(t))</code> defines
the alternative <code>T<sub>j</sub></code> which is the type
of the contained value after construction.
</p>
<p>-15- <i>Constraints</i>: [&hellip;]
</p>
<p>-16- <i>Effects</i>:
Initializes <code class='backtick'>*this</code> to hold the alternative type <code>T<sub>j</sub></code>
and direct-non-list-initializes the contained value with
<code>std::forward&lt;T&gt;(t)</code>.
</p>
<p>-17- <i>Postconditions</i>: [&hellip;]
</p>
<p>-18- <i>Throws</i>:
Any exception thrown by the initialization of the
<del>selected alternative <code>T<sub>j</sub></code></del>
<ins>contained value</ins>.
</p>
<p>-19- <i>Remarks</i>: [&hellip;]
</p>
</blockquote>

<pre>
template&lt;class T, class... Args&gt; constexpr variant(in_place_type_t&lt;T&gt;, Args&amp;&amp;... args);
</pre>
<blockquote>
<p>-20- <i>Constraints</i>: [&hellip;]
</p>
<p>-21- <i>Effects</i>:
Direct-non-list-initializes the contained value of type <code class='backtick'>T</code>
with
<code>std::forward&lt;Args&gt;(args)...</code>.
</p>
<p>-22- <i>Postconditions</i>: [&hellip;]
</p>
<p>-23- <i>Throws</i>:
Any exception thrown by
<del>the selected constructor of <code class='backtick'>T</code></del>
<ins>the initialization of the contained value</ins>.
</p>
<p>-24- <i>Remarks</i>: [&hellip;]
</p>
</blockquote>

<pre>
template&lt;class T, class U, class... Args&gt;
  constexpr variant(in_place_type_t&lt;T&gt;, initializer_list&lt;U&gt; li, Args&amp;&amp;... args);
</pre>
<blockquote>
<p>-25- <i>Constraints</i>: [&hellip;]
</p>
<p>-26- <i>Effects</i>:
Direct-non-list-initializes the contained value of type <code class='backtick'>T</code>
with
<code>il, std::forward&lt;Args&gt;(args)...</code>.
</p>
<p>-27- <i>Postconditions</i>: [&hellip;]
</p>
<p>-28- <i>Throws</i>:
Any exception thrown by
<del>the selected constructor of <code class='backtick'>T</code></del>
<ins>the initialization of the contained value</ins>.
</p>
<p>-29- <i>Remarks</i>: [&hellip;]
</p>
</blockquote>

<pre>
template&lt;size_t I, class... Args&gt;
  constexpr explicit variant(in_place_index_t&lt;I&gt;, Args&amp;&amp;... args);
</pre>
<blockquote>
<p>-30- <i>Constraints</i>:
<ol style="list-style-type: none">
<li>(30.1) &mdash; <code class='backtick'>I</code> is less than <code class='backtick'>sizeof...(Types)</code> and</li>
<li>(30.2) &mdash;
<code>is_constructible_v&lt;T<sub>I</sub>, Args...&gt;</code>
is <code class='backtick'>true</code>.
</li>
</ol>
</p>
<p>-31- <i>Effects</i>:
Direct-non-list-initializes the contained value of type
<code>T<sub>I</sub></code> with <code>std::forward&lt;Args&gt;(args)...</code>.
</p>
<p>-32- <i>Postconditions</i>: <code class='backtick'>index()</code> is <code class='backtick'>I</code>.</p>
<p>-33- <i>Throws</i>:
Any exception thrown by
<del>the selected constructor of <code>T<sub>i</sub></code></del>
<ins>the initialization of the contained value</ins>.
</p>
<p>-34- <i>Remarks</i>:
If <code>T<sub>I</sub></code>’s selected constructor is a constexpr constructor,
this constructor is a constexpr constructor.
</p>
</blockquote>

<pre>
template&lt;size_t I, class U, class... Args&gt;
  constexpr explicit variant(in_place_index_t&lt;I&gt;, initializer_list&lt;U&gt; il, Args&amp;&amp;... args);
</pre>
<blockquote>
<p>-35- <i>Constraints</i>:
<ol style="list-style-type: none">
<li>(35.1) &mdash; <code class='backtick'>I</code> is less than <code class='backtick'>sizeof...(Types)</code> and</li>
<li>(35.2) &mdash;
<code>is_constructible_v&lt;T<sub>I</sub>, initializer_list&lt;U&gt;&amp;, Args...&gt;</code>
is <code class='backtick'>true</code>.
</li>
</ol>
</p>
<p>-36- <i>Effects</i>:
Direct-non-list-initializes the contained value of type
<code>T<sub>I</sub></code> with <code>il, std::forward&lt;Args&gt;(args)...</code>.
</p>
<p>-37- <i>Postconditions</i>: <code class='backtick'>index()</code> is <code class='backtick'>I</code>.</p>
<p><ins>-?- <i>Throws</i>:
Any exception thrown by the initialization of the contained value.
</ins>
</p>
<p>-38- <i>Remarks</i>:
If <code>T<sub>I</sub></code>’s selected constructor is a constexpr constructor,
this constructor is a constexpr constructor.
</p>
</blockquote>
</blockquote>
</li>
</ol>






<hr>
<h3 id="4467"><a href="4467">4467</a>. <code class='backtick'>hive::splice</code> can throw <code class='backtick'>bad_alloc</code></h3>
<p><b>Section:</b> 23.3.9.5 <a href="https://timsong-cpp.github.io/cppwp/hive.operations">[hive.operations]</a> <b>Status:</b> <a href="lwg-active.html#Ready">Tentatively Ready</a>
 <b>Submitter:</b> Jonathan Wakely <b>Opened:</b> 2025-11-07 <b>Last modified:</b> 2025-12-04</p>
<p><b>Priority: </b>Not Prioritized
</p>
<p><b>View other</b> <a href="lwg-index-open.html#hive.operations">active issues</a> in [hive.operations].</p>
<p><b>View all other</b> <a href="lwg-index.html#hive.operations">issues</a> in [hive.operations].</p>
<p><b>View all issues with</b> <a href="lwg-status.html#Tentatively Ready">Tentatively Ready</a> status.</p>
<p><b>Discussion:</b></p>
<p>
Moving blocks from the source <code class='backtick'>hive</code> to the destination <code class='backtick'>hive</code> might require
reallocating the array of pointers to blocks, so the <i>Throws</i>: element
should allow this.
</p>

<p><i>[2025-12-04; Reflector poll.]</i></p>

<p>
Set status to Tentatively Ready after seven votes in favour during reflector poll.
</p>


<p id="res-4467"><b>Proposed resolution:</b></p>
<p>
This wording is relative to <a href="https://wg21.link/N5014" title=" Working Draft, Standard for Programming Language C++">N5014</a>.
</p>

<ol>
<li><p>Modify 23.3.9.5 <a href="https://timsong-cpp.github.io/cppwp/hive.operations">[hive.operations]</a>, as indicated:</p>
<blockquote>
<pre>
void splice(hive&amp; x);
void splice(hive&amp;&amp; x);
</pre>
<blockquote>
<p>-2- <i>Preconditions</i>:
<code class='backtick'>get_allocator() == x.get_allocator()</code> is <code class='backtick'>true</code>.
</p>
<p>-3- <i>Effects</i>:
If <code class='backtick'>addressof(x) == this</code> is <code class='backtick'>true</code>,
the behavior is erroneous and there are no effects.
Otherwise, inserts the contents of <code class='backtick'>x</code> into <code class='backtick'>*this</code> and <code class='backtick'>x</code> becomes empty.
Pointers and references to the moved elements of <code class='backtick'>x</code> now refer to those same
elements but as members of <code class='backtick'>*this</code>.
Iterators referring to the moved elements continue to refer to their elements,
but they now behave as iterators into <code class='backtick'>*this</code>, not into <code class='backtick'>x</code>.
</p>
<p>-4- <i>Throws</i>:
<code class='backtick'>length_error</code> if any of <code class='backtick'>x</code>'s active blocks are not within the bounds of
<i><code class='backtick'>current-limits</code></i>
<ins>, as well as any exceptions thrown by the allocator</ins>.
</p>
<p>-5- <i>Complexity</i>:
Linear in the sum of all element blocks in <code class='backtick'>x</code>
plus all element blocks in <code class='backtick'>*this</code>.
</p>
<p>-6- <i>Remarks</i>: Reserved blocks in <code class='backtick'>x</code> are not transferred into <code class='backtick'>*this</code>.
If <code class='backtick'>addressof(x) == this</code> is <code class='backtick'>false</code>,
invalidates the past-the-end iterator for both <code class='backtick'>x</code> and <code class='backtick'>*this</code>.
</p>
</blockquote>
</blockquote>
</li>
</ol>






<hr>
<h3 id="4468"><a href="4468">4468</a>. &sect;[const.wrap.class] "<code class='backtick'>operator decltype(auto)</code>" is ill-formed</h3>
<p><b>Section:</b> 21.3.5 <a href="https://timsong-cpp.github.io/cppwp/const.wrap.class">[const.wrap.class]</a> <b>Status:</b> <a href="lwg-active.html#Ready">Tentatively Ready</a>
 <b>Submitter:</b> Jiang An <b>Opened:</b> 2025-11-07 <b>Last modified:</b> 2025-12-04</p>
<p><b>Priority: </b>Not Prioritized
</p>
<p><b>View other</b> <a href="lwg-index-open.html#const.wrap.class">active issues</a> in [const.wrap.class].</p>
<p><b>View all other</b> <a href="lwg-index.html#const.wrap.class">issues</a> in [const.wrap.class].</p>
<p><b>View all issues with</b> <a href="lwg-status.html#Tentatively Ready">Tentatively Ready</a> status.</p>
<p><b>Discussion:</b></p>
<p>
Following the approval of <a href="https://wg21.link/cwg1670">CWG 1670</a> in Kona 2025, the 
following declaration in class template <code class='backtick'>constant_wrapper</code>, 21.3.5 <a href="https://timsong-cpp.github.io/cppwp/const.wrap.class">[const.wrap.class]</a>, 
is ill-formed:
</p>
<blockquote><pre>
constexpr operator decltype(auto)() const noexcept { return value; }
</pre></blockquote>

<p><i>[2025-12-04; Reflector poll.]</i></p>

<p>
Set status to Tentatively Ready after seven votes in favour during reflector poll.
</p>


<p id="res-4468"><b>Proposed resolution:</b></p>
<p>
This wording is relative to <a href="https://wg21.link/N5014" title=" Working Draft, Standard for Programming Language C++">N5014</a>.
</p>

<ol>
<li><p>Modify 21.3.5 <a href="https://timsong-cpp.github.io/cppwp/const.wrap.class">[const.wrap.class]</a>, class template <code class='backtick'>constant_wrapper</code> synopsis, as indicated:</p>

<blockquote>
<pre>
[&hellip;]
template&lt;<i>cw-fixed-value</i> X, class>
struct constant_wrapper : <i>cw-operators</i> {
  static constexpr const auto &amp; value = X.<i>data</i>;

  using type = constant_wrapper;
  using value_type = typename decltype(X)::<i>type</i>;

  [&hellip;]
  constexpr operator decltype(<del>auto</del><ins>value</ins>)() const noexcept { return value; }
};
</pre>
</blockquote>
</li>
</ol>






<hr>
<h3 id="4474"><a href="4474">4474</a>. "<code class='backtick'>round_to_nearest</code>" rounding mode is unclear</h3>
<p><b>Section:</b> 17.3.4 <a href="https://timsong-cpp.github.io/cppwp/round.style">[round.style]</a> <b>Status:</b> <a href="lwg-active.html#Ready">Tentatively Ready</a>
 <b>Submitter:</b> Jan Schultke <b>Opened:</b> 2025-11-13 <b>Last modified:</b> 2026-01-16</p>
<p><b>Priority: </b>Not Prioritized
</p>
<p><b>View all issues with</b> <a href="lwg-status.html#Tentatively Ready">Tentatively Ready</a> status.</p>
<p><b>Discussion:</b></p>
<p>
Consider the specification of <code class='backtick'>round_to_nearest</code> in 17.3.4 <a href="https://timsong-cpp.github.io/cppwp/round.style">[round.style]</a>:
</p>
<blockquote><p>
<code class='backtick'>round_to_nearest</code> if the rounding style is to the nearest representable value
</p></blockquote>
<p>
It is unclear how exact ties are rounded. For example, with this rounding, would a value
that is equidistant to zero and <code>numeric_limits&lt;float&gt;::min()</code> be rounded 
towards zero or away from zero?
<p/>
In 17.3.5.2 <a href="https://timsong-cpp.github.io/cppwp/numeric.limits.members">[numeric.limits.members]</a>, there exists a footnote for <code>numeric_limits&lt;T&gt;::round_style</code>:
</p>
<blockquote><p>
185) Equivalent to <code class='backtick'>FLT_ROUNDS</code>. Required by ISO/IEC 10967-1:2012.
</p></blockquote>
<p>
In C23 5.2.4.2.2 [Characteristics of floating types <code>&lt;float.h&gt;</code>], it is specified 
that a value of <code class='backtick'>1</code> for <code class='backtick'>FLT_ROUNDS</code> (which equals <code class='backtick'>round_to_nearest</code>) means
</p>
<blockquote><p>
to nearest, ties to even
</p></blockquote>
<p>
This is also the default ISO/IEC 60559 rounding mode, and chosen by standard libraries such as 
libstdc++ for <code class='backtick'>numeric_limits</code> under that assumption. Do note that C23 no longer references 
ISO/IEC 10967 in any normative wording, so presumably, matching <code class='backtick'>FLT_ROUNDS</code> values means to match 
the value that exists in C23, including its meaning.
</p>

<p><i>[2026-01-16; Reflector poll.]</i></p>

<p>
Set status to Tentatively Ready after seven votes in favour during reflector poll.
</p>
<p>
"IEEE 754-2019 talks about what to do in case of a tie for single digit precision types,
such as FP4 (E2M1). Will raise this with WG14." [E2M1 is 1 sign bit, 2 exponent bits, 1 explicit mantissa bit]
</p>


<p id="res-4474"><b>Proposed resolution:</b></p>
<p>
This wording is relative to <a href="https://wg21.link/N5014" title=" Working Draft, Standard for Programming Language C++">N5014</a>.
</p>

<ol>
<li><p>Modify 17.3.4 <a href="https://timsong-cpp.github.io/cppwp/round.style">[round.style]</a> as indicated:</p>

<blockquote>
<p>
-1- The rounding mode for floating-point arithmetic is characterized by the values:
</p>
<ul style="list-style-type: none">
<li>(1.1) &mdash; 
<code class='backtick'>round_indeterminate</code> if the rounding style is indeterminable
</li>
<li>(1.2) &mdash; 
<code class='backtick'>round_toward_zero</code> if the rounding style is toward zero
</li>
<li>(1.3) &mdash; 
<code class='backtick'>round_to_nearest</code> if the rounding style is to the nearest representable value<ins>; if there are 
two equally near such values, the one with an even least significant digit is chosen</ins>
</li>
<li>(1.4) &mdash; 
<code class='backtick'>round_toward_infinity</code> if the rounding style is toward infinity
</li>
<li>(1.5) &mdash; 
<code class='backtick'>round_toward_neg_infinity</code> if the rounding style is toward negative infinity
</li>
</ul>

</blockquote>
</li>
</ol>





<hr>
<h3 id="4475"><a href="4475">4475</a>. The description to single total order in [thread.mutex.requirements.mutex.general] is hollow</h3>
<p><b>Section:</b> 32.6.4.2.1 <a href="https://timsong-cpp.github.io/cppwp/thread.mutex.requirements.mutex.general">[thread.mutex.requirements.mutex.general]</a> <b>Status:</b> <a href="lwg-active.html#NAD">Tentatively NAD</a>
 <b>Submitter:</b> jim x <b>Opened:</b> 2025-11-14 <b>Last modified:</b> 2026-01-16</p>
<p><b>Priority: </b>Not Prioritized
</p>
<p><b>View other</b> <a href="lwg-index-open.html#thread.mutex.requirements.mutex.general">active issues</a> in [thread.mutex.requirements.mutex.general].</p>
<p><b>View all other</b> <a href="lwg-index.html#thread.mutex.requirements.mutex.general">issues</a> in [thread.mutex.requirements.mutex.general].</p>
<p><b>View all issues with</b> <a href="lwg-status.html#Tentatively NAD">Tentatively NAD</a> status.</p>
<p><b>Discussion:</b></p>
<p>
32.6.4.2.1 <a href="https://timsong-cpp.github.io/cppwp/thread.mutex.requirements.mutex.general">[thread.mutex.requirements.mutex.general]</a> p4 says:
</p>
<blockquote style="border-left: 3px solid #ccc;padding-left: 15px;">
<p>
For purposes of determining the existence of a data race, these behave as atomic operations 
(6.10.2 <a href="https://timsong-cpp.github.io/cppwp/intro.multithread">[intro.multithread]</a>). The lock and unlock operations on a single mutex appears 
to occur in a single total order.
</p>
</blockquote>
<p>
Even for atomic operations, the precondition for ordering them in a single total order is that 
they must be <code class='backtick'>memory_order::seq_cst</code> operations, such that we can form the total order to reason. 
<p/>
Put aside the fact that we impose the preconditions on <code class='backtick'>unlock</code> and <code class='backtick'>lock</code>. Is this a possible 
total order if <code class='backtick'>lock</code> reads <code class='backtick'>unlock_1</code>, but there is a <code class='backtick'>unlock_2</code> between them
</p>
<blockquote>
<p>
<code class='backtick'>unlock_1</code> &lt; <code class='backtick'>unlock_2</code> &lt; <code class='backtick'>lock</code>
</p>
</blockquote>
<p>
First, although we have said that lock and unlock operations behave as atomic operations, 
and <code class='backtick'>lock</code> reads <code class='backtick'>unlock_1</code>, meaning that <code class='backtick'>unlock_1</code> is coherence-ordered before <code class='backtick'>lock</code>, 
however, we don't specify that they are <code class='backtick'>memory_order::seq_cst</code> operations, so 
32.5.4 <a href="https://timsong-cpp.github.io/cppwp/atomics.order">[atomics.order]</a> p4 doesn't apply here
</p>
<blockquote style="border-left: 3px solid #ccc;padding-left: 15px;">
<p>
Second, for every pair of atomic operations <code><i>A</i></code> and <code><i>B</i></code> on an 
object <code><i>M</i></code>, where <code><i>A</i></code> is coherence-ordered before <code><i>B</i></code>, 
the following four conditions are required to be satisfied by <code><i>S</i></code>:
</p>
<ul style="list-style-type: none">
<li>(4.1) &mdash; 
if <code><i>A</i></code> and <code><i>B</i></code> are both <code class='backtick'>memory_order::seq_cst</code> operations, 
then <code><i>A</i></code> precedes <code><i>B</i></code> in <code><i>S</i></code>; and
</li>
</ul>
</blockquote>
<p>
So, it is not helpful to decide that <code class='backtick'>unlock_1</code> precedes <code class='backtick'>lock</code> in a single total order. 
Similarly, excluding <code class='backtick'>unlock_1</code> &lt; <code class='backtick'>unlock_2</code> &lt; <code class='backtick'>lock</code> is not possible.
<p/>
<b>Suggested resolution:</b>
<p/>
The lock and unlock operations on a single mutex appears to occur in a single total order; 
for this purpose, these operations are considered as <code class='backtick'>memory_order::seq_cst</code> operations 
</p>

<p><i>[2026-01-16; Reflector poll. Status &rarr; Tentatively NAD.]</i></p>

<p>
For atomic objects, the modification order is already a single total order, <code class='backtick'>seq_cst</code> or not.
This isn't a useful change.
</p>


<p id="res-4475"><b>Proposed resolution:</b></p>
<p>
This wording is relative to <a href="https://wg21.link/N5014" title=" Working Draft, Standard for Programming Language C++">N5014</a>.
</p>

<ol>
<li><p>Modify 32.6.4.2.1 <a href="https://timsong-cpp.github.io/cppwp/thread.mutex.requirements.mutex.general">[thread.mutex.requirements.mutex.general]</a> as indicated:</p>

<blockquote>
<p>
-4- The implementation provides lock and unlock operations, as described below. For purposes of determining
the existence of a data race, these behave as atomic operations (6.10.2 <a href="https://timsong-cpp.github.io/cppwp/intro.multithread">[intro.multithread]</a>). 
The lock and unlock operations on a single mutex appears to occur in a single total order<ins>; for 
this purpose, these operations are considered as <code class='backtick'>memory_order::seq_cst</code> operations</ins>.
</p>
</blockquote>
</li>
</ol>





<hr>
<h3 id="4477"><a href="4477">4477</a>. Placement <code class='backtick'>operator delete</code> should be constexpr</h3>
<p><b>Section:</b> 17.6.3.4 <a href="https://timsong-cpp.github.io/cppwp/new.delete.placement">[new.delete.placement]</a> <b>Status:</b> <a href="lwg-active.html#Ready">Tentatively Ready</a>
 <b>Submitter:</b> Jakub Jelinek <b>Opened:</b> 2025-11-18 <b>Last modified:</b> 2025-11-26</p>
<p><b>Priority: </b>Not Prioritized
</p>
<p><b>View other</b> <a href="lwg-index-open.html#new.delete.placement">active issues</a> in [new.delete.placement].</p>
<p><b>View all other</b> <a href="lwg-index.html#new.delete.placement">issues</a> in [new.delete.placement].</p>
<p><b>View all issues with</b> <a href="lwg-status.html#Tentatively Ready">Tentatively Ready</a> status.</p>
<p><b>Discussion:</b></p>
<p>
The <a href="https://wg21.link/P2747R2" title=" constexpr placement new">P2747R2</a> paper made placement operator new constexpr.
At that time constexpr exceptions weren't in C++26,
so that was all that was needed.
But later on when <a href="https://wg21.link/P3068R5" title=" Allowing exception throwing in constant-evaluation">P3068R5</a> was voted in,
the P2747R2 changes look insufficient.
The problem is that when you throw from a constructor during operator new,
it invokes placement operator delete.  And P2747R2 didn't touch that.
</p>
<p>
This makes it impossible to handle an exception thrown by a placement
new-expression during constant evaluation.
</p>

<p><i>[2025-11-26; Reflector poll.]</i></p>

<p>
Set status to Tentatively Ready after six votes in favour during reflector poll.
</p>


<p id="res-4477"><b>Proposed resolution:</b></p>
<p>
This wording is relative to <a href="https://wg21.link/N5014" title=" Working Draft, Standard for Programming Language C++">N5014</a>.
</p>

<ol>
<li><p>Modify 17.6.2 <a href="https://timsong-cpp.github.io/cppwp/new.syn">[new.syn]</a> as indicated:</p>

<pre>
constexpr void* operator new  (std::size_t size, void* ptr) noexcept;
constexpr void* operator new[](std::size_t size, void* ptr) noexcept;
<ins>constexpr</ins> void operator delete  (void* ptr, void*) noexcept;
<ins>constexpr</ins> void operator delete[](void* ptr, void*) noexcept;
</pre>
</li>

<li><p>Modify 17.6.3.4 <a href="https://timsong-cpp.github.io/cppwp/new.delete.placement">[new.delete.placement]</a> as indicated:</p>

<blockquote>
<pre>
constexpr void* operator new(std::size_t size, void* ptr) noexcept;
</pre>
<blockquote>
<p>[&hellip;]</p>
</blockquote>
<pre>
constexpr void* operator new[](std::size_t size, void* ptr) noexcept;
</pre>
<blockquote>
<p>[&hellip;]</p>
</blockquote>
<pre>
<ins>constexpr</ins> void operator delete(void* ptr, void*) noexcept;
</pre>
<blockquote>
<p>-7- <i>Effects</i>: Intentionally performs no action. </p>
<p>-8- <i>Remarks</i>:
Default function called when any part of the initialization in a
placement <i>new-expression</i> that invokes the library's non-array
placement operator new terminates by throwing an exception
(7.6.2.8 <a href="https://timsong-cpp.github.io/cppwp/expr.new">[expr.new]</a>).
</p>
</blockquote>
<pre>
<ins>constexpr</ins> void operator delete[](void* ptr, void*) noexcept;
</pre>
<blockquote>
<p>-9- <i>Effects</i>: Intentionally performs no action. </p>
<p>-10- <i>Remarks</i>:
Default function called when any part of the initialization in a
placement <i>new-expression</i> that invokes the library's array
placement operator new terminates by throwing an exception
(7.6.2.8 <a href="https://timsong-cpp.github.io/cppwp/expr.new">[expr.new]</a>).
</p>
</blockquote>
</blockquote>
</li>
</ol>






<hr>
<h3 id="4480"><a href="4480">4480</a>. <code>&lt;stdatomic.h&gt;</code> should provide <code class='backtick'>ATOMIC_CHAR8_T_LOCK_FREE</code></h3>
<p><b>Section:</b> 32.5.12 <a href="https://timsong-cpp.github.io/cppwp/stdatomic.h.syn">[stdatomic.h.syn]</a> <b>Status:</b> <a href="lwg-active.html#Ready">Tentatively Ready</a>
 <b>Submitter:</b> Jiang An <b>Opened:</b> 2025-11-21 <b>Last modified:</b> 2025-12-04</p>
<p><b>Priority: </b>Not Prioritized
</p>
<p><b>View all other</b> <a href="lwg-index.html#stdatomic.h.syn">issues</a> in [stdatomic.h.syn].</p>
<p><b>View all issues with</b> <a href="lwg-status.html#Tentatively Ready">Tentatively Ready</a> status.</p>
<p><b>Discussion:</b></p>
<p>
Currently, <code>&lt;stdatomic.h&gt;</code> is specified to provide <code class='backtick'>atomic_char8_t</code> but not its 
corresponding <code class='backtick'>ATOMIC_CHAR8_T_LOCK_FREE</code> macro, which is self-inconsistent. Also, given  
<a href="https://www.open-std.org/jtc1/sc22/wg14/www/docs/n2653.htm">WG14 N2653</a> added 
<code class='backtick'>ATOMIC_CHAR8_T_LOCK_FREE</code> to C's <code>&lt;stdatomic.h&gt;</code> in C23, perhaps C++ should do 
the same thing in the spirit of <a href="https://wg21.link/P3348R4" title=" C++26 should refer to C23 not C17">P3348R4</a>.
</p>

<p><i>[2025-12-04; Reflector poll.]</i></p>

<p>
Set status to Tentatively Ready after seven votes in favour during reflector poll.
</p>


<p id="res-4480"><b>Proposed resolution:</b></p>
<p>
This wording is relative to <a href="https://wg21.link/N5014" title=" Working Draft, Standard for Programming Language C++">N5014</a>.
</p>

<ol>
<li><p>Modify 32.5.12 <a href="https://timsong-cpp.github.io/cppwp/stdatomic.h.syn">[stdatomic.h.syn]</a>, header <code>&lt;stdatomic.h&gt;</code> synopsis, as indicated:</p>

<blockquote>
<pre>
template&lt;class T&gt;
  using <i>std-atomic</i> = std::atomic&lt;T&gt;; <i>// exposition only</i>

#define _Atomic(T) <i>std-atomic</i>&lt;T&gt;

#define ATOMIC_BOOL_LOCK_FREE <i>see below</i>
#define ATOMIC_CHAR_LOCK_FREE <i>see below</i>
<ins>#define ATOMIC_CHAR8_T_LOCK_FREE <i>see below</i></ins>
#define ATOMIC_CHAR16_T_LOCK_FREE <i>see below</i>
#define ATOMIC_CHAR32_T_LOCK_FREE <i>see below</i>
#define ATOMIC_WCHAR_T_LOCK_FREE <i>see below</i>
#define ATOMIC_SHORT_LOCK_FREE <i>see below</i>
#define ATOMIC_INT_LOCK_FREE <i>see below</i>
#define ATOMIC_LONG_LOCK_FREE <i>see below</i>
#define ATOMIC_LLONG_LOCK_FREE <i>see below</i>
#define ATOMIC_POINTER_LOCK_FREE <i>see below</i>

[&hellip;]
</pre>
</blockquote>
</li>
</ol>






<hr>
<h3 id="4481"><a href="4481">4481</a>. Disallow <code>chrono::duration&lt;const T, P&gt;</code></h3>
<p><b>Section:</b> 30.5.1 <a href="https://timsong-cpp.github.io/cppwp/time.duration.general">[time.duration.general]</a> <b>Status:</b> <a href="lwg-active.html#Ready">Tentatively Ready</a>
 <b>Submitter:</b> Jonathan Wakely <b>Opened:</b> 2025-11-26 <b>Last modified:</b> 2026-01-16</p>
<p><b>Priority: </b>Not Prioritized
</p>
<p><b>View all issues with</b> <a href="lwg-status.html#Tentatively Ready">Tentatively Ready</a> status.</p>
<p><b>Discussion:</b></p>
<p>
Using a const type as the <code class='backtick'>rep</code> for a <code class='backtick'>chrono::duration</code> causes various problems
but there seems to be no rule preventing it.
</p>
<p>
The non-const member operators that modify a <code class='backtick'>duration</code> don't work if
the <code class='backtick'>rep</code> type is const, e.g.
<code>duration&lt;const int&gt;::operator++()</code> 
is typically ill-formed (unless the implementation chooses to store
<code>remove_cv_t&lt;rep&gt;</code> as the data member).
<code>hash&lt;duration&lt;const int&gt;&gt;</code> uses
<code>hash&lt;const int&gt;</code> which is not enabled,
so you can't hash a <code class='backtick'>duration</code> with a const rep.
Generic code that wants to perform arithmetic with the <code class='backtick'>rep</code> type
would need to remember to consistently use <code>remove_cv_t&lt;rep&gt;</code>
to work correctly with const types.
</p>
<p>
We should just disallow const <code class='backtick'>rep</code> types.
If you want a non-modifiable duration,
use <code>const duration&lt;R,P&gt;</code>
not <code>duration&lt;const R, P&gt;</code>
</p>


<p><i>[2026-01-16; Reflector poll.]</i></p>

<p>
Set status to Tentatively Ready after ten votes in favour during reflector poll.
</p>
<p>
This loses support for <code>duration&lt;volatile T, P&gt;</code> but that seems OK.
</p>


<p id="res-4481"><b>Proposed resolution:</b></p>
<p>
This wording is relative to <a href="https://wg21.link/N5014" title=" Working Draft, Standard for Programming Language C++">N5014</a>.
</p>

<ol>
<li><p>Modify 30.5.1 <a href="https://timsong-cpp.github.io/cppwp/time.duration.general">[time.duration.general]</a> as indicated:</p>

<blockquote>
<p>-2-
<code class='backtick'>Rep</code> shall be an arithmetic type or a class emulating an arithmetic type.
If <ins>a specialization of</ins> <code class='backtick'>duration</code> is instantiated with a
<ins>cv-qualified type or a specialization of</ins> <code class='backtick'>duration</code> <del>type</del>
as the argument for the template parameter <code class='backtick'>Rep</code>, the program is ill-formed.
</p>
<p>-3-
If <code class='backtick'>Period</code> is not a specialization of <code class='backtick'>ratio</code>, the program is ill-formed.
If <code class='backtick'>Period::num</code> is not positive, the program is ill-formed.
</p>
<p>-4-
Members of <code class='backtick'>duration</code> do not throw exceptions other than those thrown by
the indicated operations on their representations.
</p>
</blockquote>
</li>
</ol>






<hr>
<h3 id="4485"><a href="4485">4485</a>. Move specification for <code class='backtick'>task::stop_token_type</code></h3>
<p><b>Section:</b> 33.13.6.4 <a href="https://timsong-cpp.github.io/cppwp/task.state">[task.state]</a> <b>Status:</b> <a href="lwg-active.html#Ready">Tentatively Ready</a>
 <b>Submitter:</b> Tomasz Kamiński <b>Opened:</b> 2025-12-08 <b>Last modified:</b> 2026-01-16</p>
<p><b>Priority: </b>Not Prioritized
</p>
<p><b>View all issues with</b> <a href="lwg-status.html#Tentatively Ready">Tentatively Ready</a> status.</p>
<p><b>Discussion:</b></p>
<b>Addresses <a href="https://github.com/cplusplus/nbballot/issues/954">US 249-379</a></b>
<p>
It is not clear what bullet 33.13.6.4 <a href="https://timsong-cpp.github.io/cppwp/task.state">[task.state]</a> p4.6 is – it reads like a requirement on <code class='backtick'>stop_token_type</code>,
but if so, this paragraph is a poor place for it.
</p>

<p><i>[2025-12-05 Tomasz comments]</i></p>

<p>The paragraph expresses requirements on user supplied <code class='backtick'>Environment::stop_source_type</code>,
that needs to model <code><i>stoppable-source</i></code>, which includes <code><i>stoppable-callback-for</i></code>
on associated token. We should also require that <code class='backtick'>Environment::scheduler_type</code> shall satisfy <code class='backtick'>scheduler</code>.</p>

<p>We also need to clarify that <code class='backtick'>stop_possible</code> and <code class='backtick'>stop_requested</code> on <code><i>prom</i>.token</code> returns
same value as <code class='backtick'>st</code> during lifetime of asynchronous operation.</p>

<p><i>[2026-01-16; Reflector poll.]</i></p>

<p>
Set status to Tentatively Ready after six votes in favour during reflector poll.
</p>


<p id="res-4485"><b>Proposed resolution:</b></p>
<p>
This wording is relative to <a href="https://wg21.link/N5014" title=" Working Draft, Standard for Programming Language C++">N5014</a>.
</p>

<ol>
<li><p>Modify 33.13.6 <a href="https://timsong-cpp.github.io/cppwp/exec.task">[exec.task]</a> as indicated:</p>

<blockquote>
<p>-5-
<code class='backtick'>allocator_type</code> shall meet the <i>Cpp17Allocator</i> requirements<ins>,
<code class='backtick'>scheduler_type</code> shall model <code class='backtick'>scheduler</code>,
and <code class='backtick'>stop_source_type</code> shall model <code><i>stoppable-source</i></code></ins>.
</p>
</blockquote>
</li>

<li><p>Modify 33.13.6.4 <a href="https://timsong-cpp.github.io/cppwp/task.state">[task.state]</a> as indicated:</p>

<pre>
void start() &amp; noexcept;
</pre>
<blockquote>
<p>-4- <i>Effects</i>: Effects: Let <code><i>prom</i></code> be the object <code><i>handle</i>.promise()</code>.
Associates <code><i>STATE</i>(<i>prom</i>)</code>, <code><i>RCVR</i>(<i>prom</i>)</code>, and <code><i>SCHED</i>(<i>prom</i>)</code> with <code class='backtick'>*this</code> as follows: 
<ul>
<li>-4.1- [&hellip;]</li>
<li>-4.2- [&hellip;]</li>
<li>-4.3- [&hellip;]</li>
</ul>
Let <code class='backtick'>st</code> be <code class='backtick'>get_stop_token(get_env(rcvr))</code>. Initializes <code><i>prom</i>.token</code> and <code><i>prom</i>.source</code> such that
<ins>during the lifetime of the asynchronous operation (33.3 <a href="https://timsong-cpp.github.io/cppwp/exec.async.ops">[exec.async.ops]</a>) associated with <code class='backtick'>*this</code></ins>
<ul>
<li>-4.4- <code><i>prom</i>.token.stop_requested()</code> returns <code>st.stop_requested()</code>;</li>
<li>-4.5- <code><i>prom</i>.token.stop_possible()</code> returns <code>st.stop_possible()</code><del>;</del><ins>.</ins></li>
<li><del>-4.6- for types <code class='backtick'>Fn</code> and <code class='backtick'>Init</code> such that both <code>invocable&lt;Fn&gt;</code> and <code>constructible_from&lt;Fn, Init&gt;</code> are modeled,
  <code>stop_token_type::callback_type&lt;Fn&gt;</code> models <code><i>stoppable-callback-for</i>&lt;Fn, stop_token_type, Init&gt;</code>.</del></li>
</ul></p>
</blockquote>
</li>

</ol>





<hr>
<h3 id="4491"><a href="4491">4491</a>. Rename <code class='backtick'>submdspan_extents</code> and <code class='backtick'>submdspan_canonicalize_slices</code></h3>
<p><b>Section:</b> 23.7.3.7 <a href="https://timsong-cpp.github.io/cppwp/mdspan.sub">[mdspan.sub]</a> <b>Status:</b> <a href="lwg-active.html#Ready">Tentatively Ready</a>
 <b>Submitter:</b> Tomasz Kamiński <b>Opened:</b> 2025-12-16 <b>Last modified:</b> 2026-01-16</p>
<p><b>Priority: </b>Not Prioritized
</p>
<p><b>View all issues with</b> <a href="lwg-status.html#Tentatively Ready">Tentatively Ready</a> status.</p>
<p><b>Discussion:</b></p>
<b>Addresses <a href="https://github.com/cplusplus/nbballot/issues/815">US 152-243</a>
and <a href="https://github.com/cplusplus/nbballot/issues/817">PL-008</a>.</b>

<p>Rename <code class='backtick'>submdspan_extents</code> to <code class='backtick'>subextents</code> and <code class='backtick'>submdspan_canonicalize_slices</code> to <code class='backtick'>canonical_slices</code>.</p>

<p><i>[2026-01-16; Reflector poll.]</i></p>

<p>
Set status to Tentatively Ready after six votes in favour during reflector poll.
</p>


<p id="res-4491"><b>Proposed resolution:</b></p>
<p>
This wording is relative to <a href="https://wg21.link/N5032" title=" Working Draft, Standard for Programming Language C++">N5032</a>.
</p>

<ol>
<li><p>Modify 23.7.3.2 <a href="https://timsong-cpp.github.io/cppwp/mdspan.syn">[mdspan.syn]</a> as follows:</p>

<blockquote>
<pre>
// 23.7.3.7 <a href="https://timsong-cpp.github.io/cppwp/mdspan.sub">[mdspan.sub]</a>, submdspan creation
template&lt;class OffsetType, class LengthType, class StrideType&gt;
  struct strided_slice;

template&lt;class LayoutMapping&gt;
  struct submdspan_mapping_result;

struct full_extent_t { explicit full_extent_t() = default; };
inline constexpr full_extent_t full_extent{};

template&lt;class IndexType, size_t... Extents, class... SliceSpecifiers&gt;
  constexpr auto sub<del>mdspan_</del>extents(const extents&lt;IndexType, Extents...&gt;&amp;, SliceSpecifiers...);

//  [mdspan.sub.canonical], submdspan slice canonicalization
template&lt;class IndexType, size_t... Extents, class... Slices&gt;
  constexpr auto <del>submdspan_canonicalize</del><ins>canonical</ins>_slices(const extents&lt;IndexType, Extents...&gt;&amp; src,
                                               Slices... slices);
</pre>
</blockquote>
</li>

<li><p>Modify  [mdspan.sub.canonical] as follows:</p>

<blockquote>
<h4><code class='backtick'>submdspan</code> slice canonicalization</h4>
<pre>
template&lt;class IndexType, size_t... Extents, class... Slices&gt;
  constexpr auto <del>submdspan_canonicalize</del><ins>canonical</ins>_slices(const extents&lt;IndexType, Extents...&gt;&amp; src,
                                               Slices... slices);
</pre>
</blockquote>
</li>

<li><p>Modify 23.7.3.7.5 <a href="https://timsong-cpp.github.io/cppwp/mdspan.sub.extents">[mdspan.sub.extents]</a> as follows:</p>

<blockquote>
<h4>23.7.3.7.5 <a href="https://timsong-cpp.github.io/cppwp/mdspan.sub.extents">[mdspan.sub.extents]</a> <code>sub<del>mdspan_</del>extents</code> function</h4>

<pre>
template&lt;class IndexType, size_t... Extents, class... SliceSpecifiers&gt;
  constexpr auto sub<del>mdspan_</del>extents(const extents&lt;IndexType, Extents...&gt;&amp; src,
                                   SliceSpecifiers... raw_slices);
</pre>
<blockquote>
<p>-1- Let <code class='backtick'>slices</code> be the pack introduced by the following declaration:
<pre>
  auto [...slices] = <del>submdspan_canonicalize</del><ins>canonical</ins>_slices(src, raw_slices...)
</pre></p>
</blockquote>
</blockquote>
</li>

<li><p>Modify  [mdspan.sub.map.sliceable] as follows:</p>
<blockquote>
<blockquote>
<p>-5- <i>Returns</i>: An object <code class='backtick'>smr</code> of type <code class='backtick'>SMR</code> such that
<ul>
<li>-5.1- <code>smr.mapping.extents() == sub<del>mdspan_</del>extents(m.extents(), valid_slices...)</code> is <code class='backtick'>true</code>; and</li>
<li>-5.2- [&hellip;]</li>
</ul></p>
</blockquote>
</blockquote>
</li>

<li><p>Modify 23.7.3.7.6.1 <a href="https://timsong-cpp.github.io/cppwp/mdspan.sub.map.common">[mdspan.sub.map.common]</a> as follows:</p>
<blockquote>
<blockquote>
<p>-5- Let <code class='backtick'>sub_ext</code> be the result of <code>sub<del>mdspan_</del>extents(extents(), slices...)</code>
and let <code class='backtick'>SubExtents</code> be <code class='backtick'>decltype(sub_ext)</code>.</p>
</blockquote>
</blockquote>
</li>

<li><p>Modify 23.7.3.7.7 <a href="https://timsong-cpp.github.io/cppwp/mdspan.sub.sub">[mdspan.sub.sub]</a> as follows:</p>
<blockquote>
<blockquote>
<p>-2- Let <code class='backtick'>slices</code> be the pack introduced by the following declaration:
<pre>
  auto [...slices] = <del>submdspan_canonicalize</del><ins>canonical</ins>_slices(src, raw_slices...)
</pre></p>
</blockquote>
</blockquote>
</li>

</ol>






<hr>
<h3 id="4493"><a href="4493">4493</a>. Specification for some functions of bit reference types seems missing</h3>
<p><b>Section:</b> 22.9.2.1 <a href="https://timsong-cpp.github.io/cppwp/template.bitset.general">[template.bitset.general]</a>, 23.3.14.1 <a href="https://timsong-cpp.github.io/cppwp/vector.bool.pspc">[vector.bool.pspc]</a> <b>Status:</b> <a href="lwg-active.html#Ready">Tentatively Ready</a>
 <b>Submitter:</b> Jiang An <b>Opened:</b> 2025-12-16 <b>Last modified:</b> 2026-02-18</p>
<p><b>Priority: </b>Not Prioritized
</p>
<p><b>View all other</b> <a href="lwg-index.html#template.bitset.general">issues</a> in [template.bitset.general].</p>
<p><b>View all issues with</b> <a href="lwg-status.html#Tentatively Ready">Tentatively Ready</a> status.</p>
<p><b>Discussion:</b></p>
<p>
We haven't explicitly specified the return values of <code>bitset&lt;N&gt;::reference::operator bool()</code> and 
<code>vector&lt;bool, A&gt;::reference::operator bool()</code>, although the intended return values can be inferred 
from "a class that simulates a reference to a single bit in the sequence". Moreover, specification for 
<code>bitset&lt;N&gt;::reference::operator~</code> seems completely missing, and the comment "flip the bit" seems 
misleading. Implementations consistently make the <code class='backtick'>operator~</code> return <code class='backtick'>!operator bool()</code>.
</p>

<p><i>[2026-02-18; Reflector poll.]</i></p>

<p>
Changed resolution to say "the bit referred to by <code class='backtick'>*this</code>" instead of
"the referred to bit".
</p>
<p>
Set status to Tentatively Ready after six votes in favour during reflector poll.
</p>


<p id="res-4493"><b>Proposed resolution:</b></p>
<p>
This wording is relative to <a href="https://wg21.link/N5032" title=" Working Draft, Standard for Programming Language C++">N5032</a>.
</p>

<ol>
<li><p>Modify 22.9.2.1 <a href="https://timsong-cpp.github.io/cppwp/template.bitset.general">[template.bitset.general]</a> as indicated:</p>

<blockquote>
<blockquote>
<pre>
[&hellip;]
<i>// bit reference</i>
class reference {
public:
  constexpr reference(const reference&amp; x) noexcept;
  constexpr ~reference();
  constexpr reference&amp; operator=(bool x) noexcept; // for b[i] = x;
  constexpr reference&amp; operator=(const reference&amp; x) noexcept; // for b[i] = b[j];
  constexpr const reference&amp; operator=(bool x) const noexcept;
  constexpr operator bool() const noexcept; // for x = b[i];
  constexpr bool operator~() const noexcept; <del>// flips the bit</del>
  constexpr reference&amp; flip() noexcept; // for b[i].flip();
  
  friend constexpr void swap(reference x, reference y) noexcept;
  friend constexpr void swap(reference x, bool&amp; y) noexcept;
  friend constexpr void swap(bool&amp; x, reference y) noexcept;
};
[&hellip;]
</pre>
</blockquote>
[&hellip;]
<pre>
constexpr reference&amp; reference::operator=(bool x) noexcept;
constexpr reference&amp; reference::operator=(const reference&amp; x) noexcept;
constexpr const reference&amp; reference::operator=(bool x) const noexcept;
</pre>
<blockquote>
<p>
-6- <i>Effects</i>: Sets the bit referred to by <code class='backtick'>*this</code> if <code class='backtick'>bool(x)</code> is <code class='backtick'>true</code>, and clears it otherwise.
<p/>
-7- <i>Returns</i>: <code class='backtick'>*this</code>.
</p>
</blockquote>
<pre>
<ins>constexpr reference::operator bool() const noexcept;</ins>
</pre>
<blockquote>
<p>
<ins>-?- <i>Returns</i>: <code class='backtick'>true</code> if the value of bit referred to by <code class='backtick'>*this</code> is one, <code class='backtick'>false</code> otherwise.</ins>
</p>
</blockquote>
<pre>
<ins>constexpr bool reference::operator~() const noexcept;</ins>
</pre>
<blockquote>
<p>
<ins>-?- <i>Returns</i>: <code class='backtick'>!bool(*this)</code>.</ins>
</p>
</blockquote>
</blockquote>
</li>

<li><p>Modify 23.3.14.1 <a href="https://timsong-cpp.github.io/cppwp/vector.bool.pspc">[vector.bool.pspc]</a> as indicated:</p>

<blockquote>
[&hellip;]
<pre>
constexpr reference&amp; reference::operator=(bool x) noexcept;
constexpr reference&amp; reference::operator=(const reference&amp; x) noexcept;
constexpr const reference&amp; reference::operator=(bool x) const noexcept;
</pre>
<blockquote>
<p>
-7- <i>Effects</i>: Sets the bit referred to by <code class='backtick'>*this</code> when <code class='backtick'>bool(x)</code> is <code class='backtick'>true</code>, and clears it otherwise.
<p/>
-8- <i>Returns</i>: <code class='backtick'>*this</code>.
</p>
</blockquote>
<pre>
<ins>constexpr reference::operator bool() const noexcept;</ins>
</pre>
<blockquote>
<p>
<ins>-?- <i>Returns</i>: <code class='backtick'>true</code> if the value of the bit referred to by <code class='backtick'>*this</code> is one, <code class='backtick'>false</code> otherwise.</ins>
</p>
</blockquote>
</blockquote>
</li>

</ol>






<hr>
<h3 id="4494"><a href="4494">4494</a>. Add <code class='backtick'>consteval</code> to <code class='backtick'>std::meta::exception</code> defaulted member functions</h3>
<p><b>Section:</b> 21.4.4 <a href="https://timsong-cpp.github.io/cppwp/meta.reflection.exception">[meta.reflection.exception]</a> <b>Status:</b> <a href="lwg-active.html#NAD">Tentatively NAD</a>
 <b>Submitter:</b> Marek Polacek <b>Opened:</b> 2025-12-16 <b>Last modified:</b> 2026-01-28</p>
<p><b>Priority: </b>Not Prioritized
</p>
<p><b>View other</b> <a href="lwg-index-open.html#meta.reflection.exception">active issues</a> in [meta.reflection.exception].</p>
<p><b>View all other</b> <a href="lwg-index.html#meta.reflection.exception">issues</a> in [meta.reflection.exception].</p>
<p><b>View all issues with</b> <a href="lwg-status.html#Tentatively NAD">Tentatively NAD</a> status.</p>
<p><b>Discussion:</b></p>
<p>
<a href="https://cplusplus.github.io/CWG/issues/cwg_defects.html#3115">CWG 3115</a> states that every function of consteval-only type shall be an
immediate function.  This caused a problem for <code class='backtick'>std::meta::exception::what()</code> which was marked <code class='backtick'>constexpr</code> 
but not <code class='backtick'>consteval</code>. To be able to mark it <code class='backtick'>consteval</code>, we had to tweak the rules about overriding by a consteval
virtual function (<a href="https://cplusplus.github.io/CWG/issues/cwg_defects.html#3117">CWG 3117</a>).
<p/>
But 21.4.4 <a href="https://timsong-cpp.github.io/cppwp/meta.reflection.exception">[meta.reflection.exception]</a> still defines <code class='backtick'>std::meta::exception</code> such that it contains these 
defaulted special member functions:
</p>
<blockquote><pre>
exception(const exception&amp;) = default;
exception(exception&amp;&amp;) = default;

exception&amp; operator=(const exception&amp;) = default;
exception&amp; operator=(exception&amp;&amp;) = default;
</pre></blockquote>
<p>
which aren't <code class='backtick'>consteval</code> (and since they're not templates, they won't be
promoted to <code class='backtick'>consteval</code> as per <a href="https://wg21.link/P2564" title=" consteval needs to propagate up">P2564</a>). I propose to make the four functions
<code class='backtick'>consteval</code>:
</p>
<blockquote><pre>
<ins>consteval</ins> exception(const exception&amp;) = default;
<ins>consteval</ins> exception(exception&amp;&amp;) = default;

<ins>consteval</ins> exception&amp; operator=(const exception&amp;) = default;
<ins>consteval</ins> exception&amp; operator=(exception&amp;&amp;) = default;
</pre></blockquote>

<p><i>[2026-01-28; Reflector poll. Status &rarr; Tentatively NAD.]</i></p>

<p>
The second change in <a href="https://cplusplus.github.io/CWG/issues/3115.html">CWG 3115</a> fixes this.
</p>


<p id="res-4494"><b>Proposed resolution:</b></p>
<p>
This wording is relative to <a href="https://wg21.link/N5032" title=" Working Draft, Standard for Programming Language C++">N5032</a>.
</p>

<ol>
<li><p>Modify 21.4.4 <a href="https://timsong-cpp.github.io/cppwp/meta.reflection.exception">[meta.reflection.exception]</a> as indicated:</p>

<blockquote>
<pre>
namespace std::meta {
  class exception : public std::exception {
  private:
    optional&lt;string&gt; <i>what_</i>;  <i>// exposition only</i>
    u8string <i>u8what_</i>;        <i>// exposition only</i>
    info <i>from_</i>;              <i>// exposition only</i>
    source_location <i>where_</i>;  <i>// exposition only</i>
  public:
    consteval exception(u8string_view what, info from,
                        source_location where = source_location::current()) noexcept;
                        
    consteval exception(string_view what, info from,
                        source_location where = source_location::current()) noexcept;
                        
    <ins>consteval</ins> exception(const exception&amp;) = default;
    <ins>consteval</ins> exception(exception&amp;&amp;) = default;
    
    <ins>consteval</ins> exception&amp; operator=(const exception&amp;) = default;
    <ins>consteval</ins> exception&amp; operator=(exception&amp;&amp;) = default;
    
    constexpr const char* what() const noexcept override;
    consteval u8string_view u8what() const noexcept;
    consteval info from() const noexcept;
    consteval source_location where() const noexcept;
  };
}
</pre>
</blockquote>
</li>

</ol>






<hr>
<h3 id="4500"><a href="4500">4500</a>. <code class='backtick'>constant_wrapper</code> wording problems</h3>
<p><b>Section:</b> 21.3.5 <a href="https://timsong-cpp.github.io/cppwp/const.wrap.class">[const.wrap.class]</a> <b>Status:</b> <a href="lwg-active.html#Ready">Tentatively Ready</a>
 <b>Submitter:</b> Matthias Wippich <b>Opened:</b> 2026-01-07 <b>Last modified:</b> 2026-01-16</p>
<p><b>Priority: </b>Not Prioritized
</p>
<p><b>View other</b> <a href="lwg-index-open.html#const.wrap.class">active issues</a> in [const.wrap.class].</p>
<p><b>View all other</b> <a href="lwg-index.html#const.wrap.class">issues</a> in [const.wrap.class].</p>
<p><b>View all issues with</b> <a href="lwg-status.html#Tentatively Ready">Tentatively Ready</a> status.</p>
<p><b>Discussion:</b></p>
<p>
During resolution of LWG <a href="4383" title="constant_wrapper's pseudo-mutators are underconstrained
 (Status: WP)">4383</a> prefix and postfix increment and
decrement operators were changed to
</p>
<blockquote><pre>
template&lt;<i>constexpr-param</i> T&gt;
  constexpr auto operator++(this T) noexcept -&gt; constant_wrapper&lt;++Y&gt;
    { return {}; }
template&lt;<i>constexpr-param</i> T&gt;
  constexpr auto operator++(this T, int) noexcept ->
    constant_wrapper&lt;Y++&gt; { return {}; }
template&lt;<i>constexpr-param</i> T&gt;
  constexpr auto operator--(this T) noexcept -&gt; constant_wrapper&lt;--Y&gt;
    { return {}; }
template&lt;<i>constexpr-param</i> T&gt;
  constexpr auto operator--(this T, int) noexcept -&gt;
    constant_wrapper&lt;Y--&gt; { return {}; }
</pre></blockquote>
<p>
However, we do not actually specify what <code class='backtick'>Y</code> is. Additionally, the
assignment operator has been changed to
</p>
<blockquote><pre>
template&lt;<i>constexpr-param</i> R&gt;
  constexpr auto operator=(R) const noexcept
    -&gt; constant_wrapper&lt;X = R::value&gt; { return {}; }
</pre></blockquote>
<p>
This is grammatically not valid C++. The assignment must be parenthesized.
</p>

<p><i>[2026-01-16; Reflector poll.]</i></p>

<p>
Set status to Tentatively Ready after five votes in favour during reflector poll.
</p>


<p id="res-4500"><b>Proposed resolution:</b></p>
<p>
This wording is relative to <a href="https://wg21.link/N5032" title=" Working Draft, Standard for Programming Language C++">N5032</a>.
</p>

<ol>

<li><p>Modify 21.3.5 <a href="https://timsong-cpp.github.io/cppwp/const.wrap.class">[const.wrap.class]</a>,
class template <code class='backtick'>constant_wrapper</code> synopsis, as indicated:</p>

<blockquote><pre>
struct <i>cw-operators</i> { <i>// exposition only</i>
  &hellip;
  <i>// pseudo-mutators</i>
  template&lt;<i>constexpr-param</i> T&gt;
    constexpr auto operator++(this T) noexcept
      -&gt; constant_wrapper&lt;<del>++Y</del> <ins>(++T::value)</ins>&gt; { return {}; }
  template&lt;<i>constexpr-param</i> T&gt;
    constexpr auto operator++(this T, int) noexcept
      -&gt; constant_wrapper&lt;<del>Y++</del> <ins>(T::value++)</ins>&gt; { return {}; }
  template&lt;<i>constexpr-param</i> T&gt;
    constexpr auto operator--(this T) noexcept
      -&gt; constant_wrapper&lt;<del>--Y</del> <ins>(--T::value)</ins>&gt; { return {}; }
  template&lt;<i>constexpr-param</i> T&gt;
    constexpr auto operator--(this T, int) noexcept
      -&gt; constant_wrapper&lt;<del>Y--</del> <ins>(T::value--)</ins>&gt; { return {}; }
  &hellip;
};

template&lt;<i>cw-fixed-value</i> X, class&gt;
struct constant_wrapper : <i>cw-operators</i> {
  static constexpr const auto &amp; value = X.<i>data</i>;
  using type = constant_wrapper;
  using value_type = decltype(X)::<i>type</i>;

  template&lt;<i>constexpr-param</i> R&gt;
    constexpr auto operator=(R) const noexcept
      -&gt; constant_wrapper&lt;<ins>(</ins>X = R::value<ins>)</ins>&gt; { return {}; }
  constexpr operator decltype(auto)() const noexcept { return value; }
};
</pre></blockquote>
</li>
</ol>






<hr>
<h3 id="4514"><a href="4514">4514</a>. Missing absolute value of <code class='backtick'>init</code> in <code class='backtick'>vector_two_norm</code> and <code class='backtick'>matrix_frob_norm</code></h3>
<p><b>Section:</b> 29.9.13.9 <a href="https://timsong-cpp.github.io/cppwp/linalg.algs.blas1.nrm2">[linalg.algs.blas1.nrm2]</a>, 29.9.13.12 <a href="https://timsong-cpp.github.io/cppwp/linalg.algs.blas1.matfrobnorm">[linalg.algs.blas1.matfrobnorm]</a> <b>Status:</b> <a href="lwg-active.html#Ready">Tentatively Ready</a>
 <b>Submitter:</b> Mark Hoemmen <b>Opened:</b> 2026-01-28 <b>Last modified:</b> 2026-02-13</p>
<p><b>Priority: </b>Not Prioritized
</p>
<p><b>View all other</b> <a href="lwg-index.html#linalg.algs.blas1.nrm2">issues</a> in [linalg.algs.blas1.nrm2].</p>
<p><b>View all issues with</b> <a href="lwg-status.html#Tentatively Ready">Tentatively Ready</a> status.</p>
<p><b>Discussion:</b></p>
<p>
<a href="https://github.com/kokkos/stdBLAS/pull/321#discussion_r2737915864">This pull request discussion</a> 
points out two issues with the current wording of <code class='backtick'>vector_two_norm</code>:
</p>
<ol>
<li><p>
If <code class='backtick'>Scalar</code> is the complex number <code class='backtick'>1 + i</code>, then the current wording
would make <code class='backtick'>vector_two_norm</code> return <code>sqrt(2i + <i>nonnegative_real_number</i>)</code>. 
This would have nonzero imaginary part.
</p></li>
<li><p>
If <code class='backtick'>Scalar</code> is the real number <code class='backtick'>-1.0</code>, then the current wording would
make <code class='backtick'>vector_two_norm</code> return <code>sqrt(-1.0 + <i>nonnegative_real_number</i>)</code>.
If <code><i>nonnegative_real_number</i></code> is less than <code class='backtick'>1</code>, then the result would be
imaginary.
</p></li>
</ol>
<p>
The analogous issues would also apply to <code class='backtick'>matrix_frob_norm</code>.
<p/>
It's acceptable for the return type <code class='backtick'>Scalar</code> to be <code class='backtick'>complex</code>.
However, the point of letting <code class='backtick'>init</code> be nonzero is to support
computing the 2-norm of a vector (or the Frobenius norm of a matrix)
in multiple steps. The value of <code class='backtick'>init</code> should thus always represent a
valid 2-norm (or Frobenius norm) result.
<p/>
There are two ways to fix this:
</p>
<ol>
<li><p>
Impose a precondition on <code class='backtick'>init</code>, that it have nonnegative real part
and zero imaginary part.
</p></li>
<li><p>
Change the <i>Returns</i> element to take the absolute value of <code class='backtick'>init</code>.
(The 29.9 <a href="https://timsong-cpp.github.io/cppwp/linalg">[linalg]</a> clause generally uses "absolute value" to mean the
magnitude of a complex number, or the absolute value of a non-complex
number.)
</p></li>
</ol>
<p>
We offer (2) as the Proposed Fix, as it is consistent with the
approach we took for fixing LWG <a href="4136" title="Specify behavior of [linalg] Hermitian algorithms on diagonal with nonzero imaginary part (Status: WP)">4136</a>.
</p>

<p><i>[2026-02-13; Reflector poll.]</i></p>

<p>
Set status to Tentatively Ready after six votes in favour during reflector poll.
</p>


<p id="res-4514"><b>Proposed resolution:</b></p>
<p>
This wording is relative to <a href="https://wg21.link/N5032" title=" Working Draft, Standard for Programming Language C++">N5032</a>.
</p>

<ol>
<li><p>Modify 29.9.13.9 <a href="https://timsong-cpp.github.io/cppwp/linalg.algs.blas1.nrm2">[linalg.algs.blas1.nrm2]</a> as indicated:</p>

<blockquote class="note">
<p>
[<i>Drafting note</i>: As a drive-by fix the missing closing parenthesis of the
<code>decltype</code> form has been added.]
</p>
</blockquote>

<blockquote>
<pre>
template&lt;<i>in-vector</i> InVec, <i>scalar</i> Scalar&gt;
  Scalar vector_two_norm(InVec v, Scalar init);
template&lt;class ExecutionPolicy, <i>in-vector</i> InVec, <i>scalar</i> Scalar&gt;
  Scalar vector_two_norm(ExecutionPolicy&amp;&amp; exec, InVec v, Scalar init);
</pre>
<blockquote>
<p>
-1- [<i>Note 1</i>: These functions correspond to the BLAS function <code>xNRM2</code>[17]. &mdash; <i>end note</i>]
<p/>
-2- <i>Mandates</i>: <code class='backtick'>InVec::value_type</code> and <code class='backtick'>Scalar</code> are either a floating-point type, or a specialization of
<code class='backtick'>complex</code>. Let <code class='backtick'>a</code> be <code><i>abs-if-needed</i>(declval&lt;typename InVec::value_type&gt;())</code> 
<ins>and let <code class='backtick'>init_abs</code> be <code><i>abs-if-needed</i>(init)</code></ins>. Then, 
<code>decltype(init<ins>_abs * init_abs</ins> + a * a<ins>)</ins></code> is convertible to <code class='backtick'>Scalar</code>.
<p/>
-3- <i>Returns</i>: The square root of the sum <del>of the square of <code class='backtick'>init</code> and the squares of the 
absolute values of the elements of <code class='backtick'>v</code>.</del><ins>whose terms are the following:</ins>
</p>
<ul style="list-style-type: none">
<li><p><ins>(3.1) &mdash; the square of the absolute value of <code class='backtick'>init</code>, and</ins></p></li>
<li><p><ins>(3.2) &mdash; the squares of the absolute values of the elements of <code class='backtick'>v</code>.</ins></p></li>
</ul>
<p>
[<i>Note 2</i>: For <code class='backtick'>init</code> equal to zero, this is the Euclidean norm (also called 2-norm) of the vector 
<code class='backtick'>v</code>. &mdash; <i>end note</i>]
<p/>
-4- <i>Remarks</i>: If <code class='backtick'>Scalar</code> has higher precision than <code class='backtick'>InVec::value_type</code>, then intermediate terms in the
sum use <code class='backtick'>Scalar</code>'s precision or greater.
</p>
</blockquote>
</blockquote>
</li>

<li><p>Modify 29.9.13.12 <a href="https://timsong-cpp.github.io/cppwp/linalg.algs.blas1.matfrobnorm">[linalg.algs.blas1.matfrobnorm]</a> as indicated:</p>

<blockquote class="note">
<p>
[<i>Drafting note</i>: As a drive-by fix one spurious <code class='backtick'>InVec</code> has been changed to <code class='backtick'>InMat</code>]
</p>
</blockquote>

<blockquote>
<pre>
template&lt;<i>in-matrix</i> InMat, <i>scalar</i> Scalar&gt;
  Scalar matrix_frob_norm(InMat A, Scalar init);
template&lt;class ExecutionPolicy, <i>in-matrix</i> InMat, <i>scalar</i> Scalar&gt;
  Scalar matrix_frob_norm(ExecutionPolicy&amp;&amp; exec, InMat A, Scalar init);
</pre>
<blockquote>
<p>
-2- <i>Mandates</i>: <code><del>InVec</del><ins>InMat</ins>::value_type</code> and <code class='backtick'>Scalar</code> 
are either a floating-point type, or a specialization of <code class='backtick'>complex</code>. 
Let <code class='backtick'>a</code> be <code><i>abs-if-needed</i>(declval&lt;typename InMat::value_type&gt;())</code> 
<ins>and let <code class='backtick'>init_abs</code> be <code><i>abs-if-needed</i>(init)</code></ins>. Then, 
<code>decltype(init<ins>_abs * init_abs</ins> + a * a)</code> is convertible to <code class='backtick'>Scalar</code>.
<p/>
-3- <i>Returns</i>: The square root of the sum <del>of the squares of <code class='backtick'>init</code> and the absolute values 
of the elements of <code class='backtick'>A</code>.</del><ins>whose terms are the following:</ins>
</p>
<ul style="list-style-type: none">
<li><p><ins>(3.1) &mdash; the square of the absolute value of <code class='backtick'>init</code>, and</ins></p></li>
<li><p><ins>(3.2) &mdash; the squares of the absolute values of the elements of <code class='backtick'>A</code>.</ins></p></li>
</ul>
<p>
[<i>Note 2</i>: For <code class='backtick'>init</code> equal to zero, this is the Frobenius norm of the matrix <code class='backtick'>A</code>. &mdash; <i>end note</i>]
<p/>
-4- <i>Remarks</i>: If <code class='backtick'>Scalar</code> has higher precision than <code class='backtick'>InMat::value_type</code>, then intermediate terms in the
sum use <code class='backtick'>Scalar</code>'s precision or greater.
</p>
</blockquote>
</blockquote>
</li>

</ol>





</body>
</html>
