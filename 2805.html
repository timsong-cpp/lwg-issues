<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
    "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta charset="utf-8">
<title>Issue 2805: void and reference type alternatives in variant, variant&lt;&gt; and 
index()</title>
<style type="text/css">
  p {text-align:justify}
  li {text-align:justify}
  blockquote.note
  {
    background-color:#E0E0E0;
    padding-left: 15px;
    padding-right: 15px;
    padding-top: 1px;
    padding-bottom: 1px;
  }
  ins {background-color:#A0FFA0}
  del {background-color:#FFA0A0}
  table {border-collapse: collapse;}
</style>
</head>
<body>
<p>Revised 2016-11-16 at 09:11:03 UTC</p>
<hr>
<h3><a name="2805" href="2805">2805.</a> <tt>void</tt> and reference type alternatives in <tt>variant</tt>, <tt>variant&lt;&gt;</tt> and 
<tt>index()</tt></h3>
<p><b>Section:</b> 20.7 [variant], 20.7.2 [variant.variant], 20.7.2.1 [variant.ctor] <b>Status:</b> <a href="lwg-active.html#New">New</a>
 <b>Submitter:</b> Marshall Clow <b>Opened:</b> 2016-11-10 <b>Last modified:</b> 2016-11-16</p>
<p><b>Priority: </b>Not Prioritized
</p>
<p><b>View all issues with</b> <a href="lwg-status.html#New">New</a> status.</p>
<p><b>Discussion:</b></p>
<p>
<b>Addresses CH 3, CH 4, CH 5, CH 6, CH 8</b>
</p>
<ol>
<li><p><tt>variant</tt> allows reference types as   
alternatives; <tt>optional</tt> explicitly forbids  
to  be  instantiated for reference types.  
This is inconsistent.</p></li>
<li><p><tt>variant&lt;int, void&gt;</tt> should be as   
usable as <tt>variant&lt;int&gt;</tt>.</p></li>
<li><p><tt>variant&lt;&gt;</tt> should not have an     
<tt>index()</tt> function.</p></li>
<li><p>Clarify the intended behavior of     
<tt>variant</tt> for alternative  types  that  are  
references.</p></li>
<li><p>Clarify <tt>variant</tt> construction.</p></li>
</ol>
<p>
Proposed change:
<p/>
<ol>
<li><p>Consider allowing reference types for both or none.</p></li>
<li><p>&mdash;</p></li>
<li><p>Consider  specifying a specialization for <tt>variant&lt;&gt;</tt>
like:</p>
<blockquote><pre>
template&lt;&gt; 
class variant&lt;&gt; 
{ 
public: 
  variant() = delete; 
  variant(const variant&amp;) = delete; 
  variant&amp; operator=(variant const&amp;) = delete;
};
</pre></blockquote>
</li>
<li><p>Add a respective note.</p></li>
<li><p>Add a note that <tt>variant&lt;&gt;</tt> cannot be constructed.</p></li>
</ol>
</p>



<p><b>Proposed resolution:</b></p>





</body>
</html>
