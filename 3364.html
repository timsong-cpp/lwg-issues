<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
    "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta charset="utf-8">
<title>Issue 3364: Initialize data members of ranges and their iterators</title>
<style type="text/css">
  p {text-align:justify}
  li {text-align:justify}
  blockquote.note
  {
    background-color:#E0E0E0;
    padding-left: 15px;
    padding-right: 15px;
    padding-top: 1px;
    padding-bottom: 1px;
  }
  ins {background-color:#A0FFA0}
  del {background-color:#FFA0A0}
  table {border-collapse: collapse;}
</style>
</head>
<body>
<hr>
<h3><a name="3364" href="lwg-active.html#3364">3364.</a> Initialize data members of ranges and their iterators</h3>
<p><b>Section:</b> 24.7.7.2 <a href="https://timsong-cpp.github.io/cppwp/range.take.while.view">[range.take.while.view]</a>, 24.7.8.2 <a href="https://timsong-cpp.github.io/cppwp/range.drop.view">[range.drop.view]</a>, 24.7.9.2 <a href="https://timsong-cpp.github.io/cppwp/range.drop.while.view">[range.drop.while.view]</a>, 24.7.15.3 <a href="https://timsong-cpp.github.io/cppwp/range.elements.iterator">[range.elements.iterator]</a> <b>Status:</b> <a href="lwg-active.html#New">New</a>
 <b>Submitter:</b> Johel Ernesto Guerrero Pe&ntilde;a <b>Opened:</b> 2020-01-07 <b>Last modified:</b> 2020-01-07 19:06:33 UTC</p>
<p><b>Priority: </b>Not Prioritized
</p>
<p><b>View other</b> <a href="lwg-index-open.html#range.take.while.view">active issues</a> in [range.take.while.view].</p>
<p><b>View all other</b> <a href="lwg-index.html#range.take.while.view">issues</a> in [range.take.while.view].</p>
<p><b>View all issues with</b> <a href="lwg-status.html#New">New</a> status.</p>
<p><b>Discussion:</b></p>
<p>Before P1035 was accepted, no data member in [ranges] whose type could
potentially be an aggregate or fundamental type was left without initializer. 
P1035 left some such data members without initializer, so it is possible
to have them have indeterminate values. We propose restoring consistency.</p>


<p><b>Proposed resolution:</b></p>
<p>This wording is relative to <a href="http://wg21.link/N4842">N4842</a>.</p>

<ol>
<li><p>Modify 24.7.7.2 <a href="https://timsong-cpp.github.io/cppwp/range.take.while.view">[range.take.while.view]</a> as follows:</p>
<blockquote>
<pre>
  class take_while_view : public view_interface&lt;take_while_view&lt;V, Pred&gt;&gt; {
    template&lt;bool&gt; class sentinel;                      // exposition only

    V base_<ins> = V()</ins>;                                      // exposition only
    semiregular-box&lt;Pred&gt; pred_;                        // exposition only

  public:
</pre>
</blockquote>
</li>

<li><p>Modify 24.7.8.2 <a href="https://timsong-cpp.github.io/cppwp/range.drop.view">[range.drop.view]</a> as follows:</p>
<blockquote>
<pre>
  private:
    V base_<ins> = V()</ins>;                              // exposition only
    range_difference_t&lt;V&gt; count_<ins> = 0</ins>;           // exposition only
  };
</pre>
</blockquote>
</li>

<li><p>Modify 24.7.9.2 <a href="https://timsong-cpp.github.io/cppwp/range.drop.while.view">[range.drop.while.view]</a> as follows:</p>
<blockquote>
<pre>
  private:
    V base_<ins> = V()</ins>;                                      // exposition only
    semiregular-box&lt;Pred&gt; pred_;                        // exposition only
  };
</pre>
</blockquote>
</li>

<li><p>Modify 24.7.15.3 <a href="https://timsong-cpp.github.io/cppwp/range.elements.iterator">[range.elements.iterator]</a> as follows:</p>
<blockquote>
<pre>
  class elements_view&lt;V, N&gt;::iterator {                 // exposition only
    using base-t = conditional_t&lt;Const, const V, V&gt;;
    friend iterator&lt;!Const&gt;;

    iterator_t&lt;base-t&gt; current_<ins> = iterator_t&lt;base-t&gt;()</ins>;
  public:
</pre>
</blockquote>
</li>

</ol>





</body>
</html>
