<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
    "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta charset="utf-8">
<title>Issue 1114: Type traits underspecified</title>
<style type="text/css">
  p {text-align:justify}
  li {text-align:justify}
  blockquote.note
  {
    background-color:#E0E0E0;
    padding-left: 15px;
    padding-right: 15px;
    padding-top: 1px;
    padding-bottom: 1px;
  }
  ins {background-color:#A0FFA0}
  del {background-color:#FFA0A0}
  table {border-collapse: collapse;}
</style>
</head>
<body>
<hr>
<h3><a name="1114" href="1114">1114.</a> Type traits underspecified</h3>
<p><b>Section:</b> 23.15 <a href="https://timsong-cpp.github.io/cppwp/meta">[meta]</a> <b>Status:</b> <a href="lwg-active.html#C++11">C++11</a>
 <b>Submitter:</b> Daniel Kr&uuml;gler <b>Opened:</b> 2009-05-12 <b>Last modified:</b> 2016-01-28 10:01:27 UTC</p>
<p><b>Priority: </b>Not Prioritized
</p>
<p><b>View other</b> <a href="lwg-index-open.html#meta">active issues</a> in <a href="https://timsong-cpp.github.io/cppwp/meta">[meta]</a>.</p>
<p><b>View all other</b> <a href="lwg-index.html#meta">issues</a> in <a href="https://timsong-cpp.github.io/cppwp/meta">[meta]</a>.</p>
<p><b>View all issues with</b> <a href="lwg-status.html#C++11">C++11</a> status.</p>
<p><b>Discussion:</b></p>

<p>
Related to <a href="975">975</a> and <a href="1023">1023</a>.
</p>

<p>
The current wording in 23.15.1 <a href="https://timsong-cpp.github.io/cppwp/meta.rqmts">[meta.rqmts]</a> is still unclear concerning
it's requirements on the type traits classes regarding ambiguities.
Specifically it's unclear
</p>

<ul>
<li>
if a predicate trait (23.15.4 <a href="https://timsong-cpp.github.io/cppwp/meta.unary">[meta.unary]</a>, 23.15.6 <a href="https://timsong-cpp.github.io/cppwp/meta.rel">[meta.rel]</a>) could derive from both
<tt>true_type</tt>&#47;<tt>false_type</tt>.
</li>
<li>
if any of the type traits (23.15.1 <a href="https://timsong-cpp.github.io/cppwp/meta.rqmts">[meta.rqmts]</a>, 23.15.4 <a href="https://timsong-cpp.github.io/cppwp/meta.unary">[meta.unary]</a>, 23.15.6 <a href="https://timsong-cpp.github.io/cppwp/meta.rel">[meta.rel]</a>) could ambiguously derive
from the same specified result type.
</li>
<li>
if any of the type traits (23.15.1 <a href="https://timsong-cpp.github.io/cppwp/meta.rqmts">[meta.rqmts]</a>, 23.15.4 <a href="https://timsong-cpp.github.io/cppwp/meta.unary">[meta.unary]</a>, 23.15.6 <a href="https://timsong-cpp.github.io/cppwp/meta.rel">[meta.rel]</a>) could derive from other
<tt>integral_constant</tt> types making the contained names ambiguous
</li>
<li>
if any of the type traits (23.15.1 <a href="https://timsong-cpp.github.io/cppwp/meta.rqmts">[meta.rqmts]</a>, 23.15.4 <a href="https://timsong-cpp.github.io/cppwp/meta.unary">[meta.unary]</a>, 23.15.6 <a href="https://timsong-cpp.github.io/cppwp/meta.rel">[meta.rel]</a>) could have other base
classes that contain members hiding the name of the result type members
or make the contained member names ambiguous.
</li>
</ul>

<p><i>[
Batavia (2009-05):
]</i></p>

<blockquote>
<p>
Alisdair would prefer to factor some of the repeated text,
but modulo a corner case or two,
he believes the proposed wording is otherwise substantially correct.
</p>
<p>
Move to Open.
</p>
</blockquote>

<p><i>[
2009-10 post-Santa Cruz:
]</i></p>


<blockquote><p>
Move to Tentatively Ready.
</p></blockquote>



<p><b>Proposed resolution:</b></p>
<p><i>[
The usage of the notion of a <i>BaseCharacteristic</i> below might be
useful in other places - e.g. to define the base class relation in 23.14.5 <a href="https://timsong-cpp.github.io/cppwp/refwrap">[refwrap]</a>, 23.14.12 <a href="https://timsong-cpp.github.io/cppwp/func.memfn">[func.memfn]</a>, or 23.14.13.2 <a href="https://timsong-cpp.github.io/cppwp/func.wrap.func">[func.wrap.func]</a>. In this case it's definition should probably
be moved to Clause 17
]</i></p>


<ol>
<li>
<p>
Change 23.15.1 <a href="https://timsong-cpp.github.io/cppwp/meta.rqmts">[meta.rqmts]</a> p.1 as indicated:
</p>
<blockquote><p>
[..] It shall be <tt>DefaultConstructible</tt>, <tt>CopyConstructible</tt>, and publicly
<ins>and unambiguously</ins> derived, directly or indirectly, from
<ins>its <i>BaseCharacteristic</i>, which is</ins> a specialization of the
template <tt>integral_constant</tt> (20.6.3), with the arguments to the template
<tt>integral_constant</tt> determined by the requirements for the particular
property being described. <ins>The member names of the
<i>BaseCharacteristic</i> shall be unhidden and unambiguously
available in the <i>UnaryTypeTrait</i>.</ins>
</p></blockquote>
</li>
<li>
<p>
Change 23.15.1 <a href="https://timsong-cpp.github.io/cppwp/meta.rqmts">[meta.rqmts]</a> p.2 as indicated:
</p>
<blockquote><p>
[..] It shall be <tt>DefaultConstructible</tt>, <tt>CopyConstructible</tt>, and publicly
<ins>and unambiguously</ins> derived, directly or indirectly, from
<del>an instance</del> <ins>its <i>BaseCharacteristic</i>, which is a
specialization</ins> of the template <tt>integral_constant</tt> (20.6.3), with
the arguments to the template <tt>integral_constant</tt> determined by the
requirements for the particular relationship being described. <ins>The
member names of the <i>BaseCharacteristic</i> shall be unhidden
and unambiguously available in the <i>BinaryTypeTrait</i>.</ins>
</p></blockquote>
</li>
<li>
<p>
Change 23.15.4 <a href="https://timsong-cpp.github.io/cppwp/meta.unary">[meta.unary]</a> p.2 as indicated:
</p>
<blockquote><p>
Each of these templates shall be a <i>UnaryTypeTrait</i> (20.6.1),
<del>publicly derived directly or indirectly from <tt>true_type</tt> if the
corresponding condition is true, otherwise from <tt>false_type</tt></del>
<ins>where its <i>BaseCharacteristic</i> shall be <tt>true_type</tt> if the
corresponding condition is true, otherwise <tt>false_type</tt></ins>.
</p></blockquote>
</li>
<li>
<p>
Change 23.15.6 <a href="https://timsong-cpp.github.io/cppwp/meta.rel">[meta.rel]</a> p.2 as indicated:
</p>

<blockquote><p>
Each of these templates shall be a <i>BinaryTypeTrait</i> (20.6.1),
<del>publicly derived directly or indirectly from <tt>true_type</tt> if the
corresponding condition is true, otherwise from <tt>false_type</tt></del>
<ins>where its <i>BaseCharacteristic</i> shall be <tt>true_type</tt> if the
corresponding condition is true, otherwise <tt>false_type</tt></ins>.
</p></blockquote>
</li>
</ol>






</body>
</html>
