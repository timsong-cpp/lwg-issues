<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
    "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta charset="utf-8">
<title>Issue 2917: Parallel algorithms cannot easily work with InputIterators</title>
<style type="text/css">
  p {text-align:justify}
  li {text-align:justify}
  blockquote.note
  {
    background-color:#E0E0E0;
    padding-left: 15px;
    padding-right: 15px;
    padding-top: 1px;
    padding-bottom: 1px;
  }
  ins {background-color:#A0FFA0}
  del {background-color:#FFA0A0}
  table {border-collapse: collapse;}
</style>
</head>
<body>
<hr>
<h3><a name="2917" href="2917">2917.</a> Parallel algorithms cannot easily work with <tt>InputIterator</tt>s</h3>
<p><b>Section:</b> 99 [algorithm], 26.8 <a href="https://timsong-cpp.github.io/cppwp/numeric.ops">[numeric.ops]</a> <b>Status:</b> <a href="lwg-active.html#New">New</a>
 <b>Submitter:</b> United States <b>Opened:</b> 2017-02-03 <b>Last modified:</b> 2017-02-05 14:02:36 UTC</p>
<p><b>Priority: </b>Not Prioritized
</p>
<p><b>View all issues with</b> <a href="lwg-status.html#New">New</a> status.</p>
<p><b>Discussion:</b></p>
<b>Addresses US 156</b>

<p>Parallel algorithms cannot easily work with <tt>InputIterator</tt>s, as any attempt to partition the work is going to 
invalidate iterators used by other sub-tasks. While this may work for the sequential execution policy, the goal of that 
policy is to transparently switch between serial and parallel execution of code without changing semantics, so there 
should not be a special case extension for this policy. There is a corresponding concern for writing through 
<tt>OutputIterator</tt>s. Note that the input iterator problem could be mitigated, to some extent, by serially copying/moving 
data out of the input range and into temporary storage with a more favourable iterator category, and then the work of the 
algorithm can be parallelized. If this is the design intent, a note to confirm that in the standard would avoid future 
issues filed in this area. However, the requirement of an algorithm that must copy/move values into intermediate storage 
may not be the same as those acting immediately on a dereferenced input iterator, and further issues would be likely. 
It is not clear that anything can be done to improve the serial nature of writing to a simple output iterator though.</p>
<p>Proposed change: All algorithms in the <tt>&lt;algorithm&gt;</tt> and <tt>&lt;numeric&gt;</tt> headers that take an 
execution policy and an <tt>InputIterator</tt> type should update that iterator to a <tt>ForwardIterator</tt>, and similarly 
all such overloads taking an <tt>OutputIterator</tt> should update that iterator to a <tt>ForwardIterator</tt>.</p>
<p>(Conversely, if the design intent is confirmed to support input and output iterators, add a note to state that clearly and avoid confusion and more issues by future generations of library implementers.)</p>



<p><b>Proposed resolution:</b></p>
<p>
</p>










</body>
</html>
