<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
    "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta charset="utf-8">
<title>Issue 2715: What is 'aggregate initialization syntax'?</title>
<style type="text/css">
  p {text-align:justify}
  li {text-align:justify}
  blockquote.note
  {
    background-color:#E0E0E0;
    padding-left: 15px;
    padding-right: 15px;
    padding-top: 1px;
    padding-bottom: 1px;
  }
  ins {background-color:#A0FFA0}
  del {background-color:#FFA0A0}
  table {border-collapse: collapse;}
</style>
</head>
<body>
<hr>
<h3><a name="2715" href="lwg-defects.html#2715">2715.</a> What is 'aggregate initialization syntax'?</h3>
<p><b>Section:</b> 32.6 <a href="https://timsong-cpp.github.io/cppwp/atomics.types.generic">[atomics.types.generic]</a> <b>Status:</b> <a href="lwg-active.html#Resolved">Resolved</a>
 <b>Submitter:</b> S. B. Tam <b>Opened:</b> 2016-05-24 <b>Last modified:</b> 2017-03-20 14:48:03 UTC</p>
<p><b>Priority: </b>3
</p>
<p><b>View all other</b> <a href="lwg-index.html#atomics.types.generic">issues</a> in [atomics.types.generic].</p>
<p><b>View all issues with</b> <a href="lwg-status.html#Resolved">Resolved</a> status.</p>
<p><b>Discussion:</b></p>
<p>
32.6 <a href="https://timsong-cpp.github.io/cppwp/atomics.types.generic">[atomics.types.generic]</a> mentions 'aggregate initialization syntax'. It's unclear what it stands for, 
especially since atomic types are actually not aggregate types (they have user-provided constructors).
</p>

<p><i>[2016-11-13, Jonathan comments and provides wording]</i></p>

<p>
LWG agreed to simply strike those sentences. We believe their purpose
is to require that the same syntax as C programs use is valid, e.g.
</p>
<pre>
<tt>atomic_int i = { 1 };</tt>
</pre>
<p>
But such syntax is already required to work by the constructor
definitions, so there is no need to require it again here with
redundant wording.
It's unnecessary to require that syntax for the <tt>atomic&lt;T*&gt;</tt>
specializations because they have no equivalent in C anyway (unlike
the named atomic types for integers, there are no typedefs for
<tt>atomic&lt;T*&gt;</tt>).
<p/>
If wanted, we could add an example demonstrating the syntax that works
for both C and C++ but the preference was to not do so:
<p/>
[<i>Example:</i> For compatibility with the related types in the C library
the following syntax can be used:
</p>
<blockquote><pre>
 atomic_int i = { 1 };
</pre></blockquote>
<p>
&mdash; <i>end example</i>]
</p>
<p><i>[2016-11-12, Issaquah]</i></p>

<p>Sat PM: The key here is that we need to support <tt>= { ... }</tt></p>
<p>JW to provide wording</p>

<p><i>[2017-03-04, Kona]</i></p>

<p>This is resolved by P0558.</p>


<p><b>Proposed resolution:</b></p>
<p>This wording is relative to N4606.</p>

<ol>
<li>
<p>Edit 32.6 <a href="https://timsong-cpp.github.io/cppwp/atomics.types.generic">[atomics.types.generic]</a> as indicated:</p>

<blockquote>
<p>
-5- The atomic integral specializations and the specialization <tt>atomic&lt;bool&gt;</tt> shall have standard layout. They
shall each have a trivial default constructor and a trivial destructor. <del>They shall each support aggregate
initialization syntax.</del>
<p/>
-6- There shall be pointer partial specializations of the <tt>atomic</tt> class template. These specializations shall have
standard layout, trivial default constructors, and trivial destructors. <del>They shall each support aggregate
initialization syntax.</del>
</p>
</blockquote>
</li>
</ol>





</body>
</html>
