<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
    "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta charset="utf-8">
<title>Issue 650: regex_token_iterator and const correctness</title>
<style type="text/css">
  p {text-align:justify}
  li {text-align:justify}
  blockquote.note
  {
    background-color:#E0E0E0;
    padding-left: 15px;
    padding-right: 15px;
    padding-top: 1px;
    padding-bottom: 1px;
  }
  ins {background-color:#A0FFA0}
  del {background-color:#FFA0A0}
  table {border-collapse: collapse;}
</style>
</head>
<body>
<hr>
<h3><a name="650" href="lwg-defects.html#650">650.</a> regex_token_iterator and const correctness</h3>
<p><b>Section:</b> 31.12.2 <a href="https://timsong-cpp.github.io/cppwp/re.tokiter">[re.tokiter]</a> <b>Status:</b> <a href="lwg-active.html#CD1">CD1</a>
 <b>Submitter:</b> Daniel Kr&uuml;gler <b>Opened:</b> 2007-03-05 <b>Last modified:</b> 2016-01-28 10:19:27 UTC</p>
<p><b>Priority: </b>Not Prioritized
</p>
<p><b>View all other</b> <a href="lwg-index.html#re.tokiter">issues</a> in <a href="https://timsong-cpp.github.io/cppwp/re.tokiter">[re.tokiter]</a>.</p>
<p><b>View all issues with</b> <a href="lwg-status.html#CD1">CD1</a> status.</p>
<p><b>Discussion:</b></p>
<p>
Both the class definition of regex_token_iterator (31.12.2 <a href="https://timsong-cpp.github.io/cppwp/re.tokiter">[re.tokiter]</a>/6) and the latter member specifications (31.12.2.2 <a href="https://timsong-cpp.github.io/cppwp/re.tokiter.comp">[re.tokiter.comp]</a>/1+2) declare both comparison operators as
non-const functions. Furtheron, both dereference operators are
unexpectedly also declared as non-const in 31.12.2 <a href="https://timsong-cpp.github.io/cppwp/re.tokiter">[re.tokiter]</a>/6
as well as in (31.12.2.3 <a href="https://timsong-cpp.github.io/cppwp/re.tokiter.deref">[re.tokiter.deref]</a>/1+2).
</p>


<p><b>Proposed resolution:</b></p>
<p>
1) In (31.12.2 <a href="https://timsong-cpp.github.io/cppwp/re.tokiter">[re.tokiter]</a>/6) change the current declarations
</p>

<blockquote><pre>
bool operator==(const regex_token_iterator&amp;) <ins>const</ins>;
bool operator!=(const regex_token_iterator&amp;) <ins>const</ins>;
const value_type&amp; operator*() <ins>const</ins>;
const value_type* operator-&gt;() <ins>const</ins>;
</pre></blockquote>

<p>
2) In 31.12.2.2 <a href="https://timsong-cpp.github.io/cppwp/re.tokiter.comp">[re.tokiter.comp]</a> change the following declarations
</p>

<blockquote><pre>
bool operator==(const regex_token_iterator&amp; right) <ins>const</ins>;
bool operator!=(const regex_token_iterator&amp; right) <ins>const</ins>;
</pre></blockquote>

<p>
3) In 31.12.2.3 <a href="https://timsong-cpp.github.io/cppwp/re.tokiter.deref">[re.tokiter.deref]</a> change the following declarations
</p>

<blockquote><pre>
const value_type&amp; operator*() <ins>const</ins>;
const value_type* operator-&gt;() <ins>const</ins>;
</pre></blockquote>


<p><i>[
Kona (2007): The LWG adopted the proposed resolution of N2409 for this issue (which
is to adopt the proposed wording in this issue).
The LWG voted to accelerate this issue to Ready status to be voted into the WP at Kona.
]</i></p>





</body>
</html>
