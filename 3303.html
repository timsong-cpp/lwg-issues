<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
    "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta charset="utf-8">
<title>Issue 3303: Bad "constexpr" marker for destroy/destroy_n</title>
<style type="text/css">
  p {text-align:justify}
  li {text-align:justify}
  blockquote.note
  {
    background-color:#E0E0E0;
    padding-left: 15px;
    padding-right: 15px;
    padding-top: 1px;
    padding-bottom: 1px;
  }
  ins {background-color:#A0FFA0}
  del {background-color:#FFA0A0}
  table {border-collapse: collapse;}
</style>
</head>
<body>
<hr>
<h3><a name="3303" href="lwg-defects.html#3303">3303.</a> Bad "<tt>constexpr</tt>" marker for <tt>destroy/destroy_n</tt></h3>
<p><b>Section:</b> 20.10.2 <a href="https://timsong-cpp.github.io/cppwp/memory.syn">[memory.syn]</a> <b>Status:</b> <a href="lwg-active.html#WP">WP</a>
 <b>Submitter:</b> Jens Maurer <b>Opened:</b> 2019-10-10 <b>Last modified:</b> 2020-02-20 14:25:15 UTC</p>
<p><b>Priority: </b>0
</p>
<p><b>View all issues with</b> <a href="lwg-status.html#WP">WP</a> status.</p>
<p><b>Discussion:</b></p>
<p>
This issue was submitted as editorial issue 
<a href="https://github.com/cplusplus/draft/issues/3181">cplusplus/draft#3181</a> but is 
considered non-editorial.
<p/>
<a href="http://wg21.link/p0784r7">P0784R7</a>, approved in Cologne, added "<tt>constexpr</tt>" markers to
the overloads of <tt>destroy</tt> and <tt>destroy_n</tt> taking an <tt>ExecutionPolicy</tt> 
parameter.  This seems to be in error; parallel algorithms should not be marked "<tt>constexpr</tt>".
(None of the parallel algorithms in <tt>&lt;algorithm&gt;</tt> is marked "<tt>constexpr</tt>".)
</p>
<p><i>[2019-11 Marked as 'Ready' during Monday issue prioritization in Belfast]</i></p>



<p><b>Proposed resolution:</b></p>
<p>This wording is relative to <a href="http://wg21.link/n4830">N4830</a>.</p>

<ol>
<li><p>Modify 20.10.2 <a href="https://timsong-cpp.github.io/cppwp/memory.syn">[memory.syn]</a>, header <tt>&lt;memory&gt;</tt> synopsis, as indicated:</p>

<blockquote>
<pre>
namespace std {
  [&hellip;]
  
  <i>// 25.11.8 <a href="https://timsong-cpp.github.io/cppwp/specialized.destroy">[specialized.destroy]</a>, destroy</i>
  template&lt;class T&gt;
    constexpr void destroy_at(T* location);
  template&lt;class ForwardIterator&gt;
    constexpr void destroy(ForwardIterator first, ForwardIterator last);
  template&lt;class ExecutionPolicy, class ForwardIterator&gt;
    <del>constexpr</del> void destroy(ExecutionPolicy&amp;&amp; exec, <i>// see 25.3.5 <a href="https://timsong-cpp.github.io/cppwp/algorithms.parallel.overloads">[algorithms.parallel.overloads]</a></i>
                           ForwardIterator first, ForwardIterator last);
  template&lt;class ForwardIterator, class Size&gt;
    constexpr ForwardIterator destroy_n(ForwardIterator first, Size n);
  template&lt;class ExecutionPolicy, class ForwardIterator, class Size&gt;
    <del>constexpr</del> ForwardIterator destroy_n(ExecutionPolicy&amp;&amp; exec, <i>// see 25.3.5 <a href="https://timsong-cpp.github.io/cppwp/algorithms.parallel.overloads">[algorithms.parallel.overloads]</a></i>
                                        ForwardIterator first, Size n);  
  [&hellip;]
}
</pre>
</blockquote>
</li>

</ol>





</body>
</html>
