<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
    "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta charset="utf-8">
<title>Issue 2078: Throw specification of async() incomplete</title>
<style type="text/css">
  p {text-align:justify}
  li {text-align:justify}
  blockquote.note
  {
    background-color:#E0E0E0;
    padding-left: 15px;
    padding-right: 15px;
    padding-top: 1px;
    padding-bottom: 1px;
  }
  ins {background-color:#A0FFA0}
  del {background-color:#FFA0A0}
  table {border-collapse: collapse;}
</style>
</head>
<body>
<p>Revised 2016-11-15 at 21:11:26 UTC</p>
<hr>
<h3><a name="2078" href="#2078">2078.</a> Throw specification of <tt>async()</tt> incomplete</h3>
<p><b>Section:</b> 30.6.8 [futures.async] <b>Status:</b> <a href="lwg-active.html#C++14">C++14</a>
 <b>Submitter:</b> Nicolai Josuttis <b>Opened:</b> 2011-08-29 <b>Last modified:</b> 2016-11-15</p>
<p><b>Priority: </b>Not Prioritized
</p>
<p><b>View all other</b> <a href="lwg-index.html#futures.async">issues</a> in [futures.async].</p>
<p><b>View all issues with</b> <a href="lwg-status.html#C++14">C++14</a> status.</p>
<p><b>Discussion:</b></p>

<p>
The current throw specification of <tt>async()</tt> does state:
</p>
<blockquote><p>
-6- <i>Throws</i>: <tt>system_error</tt> if policy is <tt>launch::async</tt> and 
the implementation is unable to start a new thread.
</p></blockquote>
<p>
First it seems not clear whether this only applies if policy equals 
<tt>launch::async</tt> of if the <tt>async</tt> launch mode flag is set 
(if <tt>policy|launch::async!=0</tt>)
<p/>
In the discussion Lawrence Crowl also wrote:
</p>
<blockquote><p>
    More generally, I think what we want to say is that if the
    implementation cannot successfully execute on one of the policies
    allowed, then it must choose another. The principle would apply
    to implementation-defined policies as well.
</p></blockquote>

<p>
Peter Sommerlad:
</p>
<blockquote><p>
Should not throw. That was the intent. "is async" meat exactly.
</p></blockquote>

<p><i>[2012, Portland: move to Tentatively NAD Editorial]</i></p>

<p>
If no launch policy, it is undefined behavior.
</p>
<p>
Agree with Lawrence, should try all the allowed policies. We will rephrase so that
the policy argument should be <tt>lauch::async</tt>. Current wording seems good enough.
</p>
<p>
We believe this choice of policy statement is really an editorial issue.
</p>

<p><i>[2013-09 Chicago]</i></p>

<p>
If all the implementors read it and can't get it right - it is not editorial. Nico to provide wording
</p>
<p>
No objections to revised wording, so moved to Immediate.
</p>
<p>
Accept for Working Paper
</p>


<p><b>Proposed resolution:</b></p>
<p>This wording is relative to N3691.</p>

<ol>
<li><p>Change 30.6.8 [futures.async] p6, p7 as indicated:</p>

<blockquote>
<p>
-6- <i>Throws:</i> <tt>system_error</tt> if <tt>policy</tt> <del>is</del> <ins><tt>==</tt></ins> <tt>launch::async</tt> 
and the implementation is unable to start a new thread.
</p>
<p>
-7- <i>Error conditions:</i>
</p>
<ul>
<li><p> <tt>resource_unavailable_try_again</tt> &mdash; if <tt>policy</tt> <del>is</del> <ins><tt>==</tt></ins> <tt>launch::async</tt> 
and the system is unable to start a new thread.</p>
</li>
</ul>
</blockquote>
</li>
</ol>






</body>
</html>
